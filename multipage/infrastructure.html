<!DOCTYPE html><html class=split lang=en-US-x-hixie><script src=/html/link-fixup.js defer=""></script><meta charset=utf-8><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name=viewport><title>HTML Standard</title><meta content=#3c790a name=theme-color><link rel=stylesheet href=https://resources.whatwg.org/standard.css><link rel=stylesheet href=/html/resources/zh-cn.css><script defer="" src=/html/resources/dfn.js></script><script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
  </script><link rel=icon href=https://resources.whatwg.org/logo.svg><style>
   [hidden] { display: none; }

   .bad, .bad *:not(.X\58X) { color: gray; border-color: gray; background: transparent; }

   .fingerprint { position: absolute; right: 0; z-index: 5; }
   @media (max-width: 767px) {
     .fingerprint { max-width: 35px; }
   }

   .status { min-height: 0.6em; font: 1em sans-serif; width: 9em; padding: 0.3em; position: absolute; z-index: 8; right: 0.3em; background: #EEE; color: black; box-shadow: 0 0 3px #999; overflow: hidden; margin: -2em 0 0 0; border-collapse: initial; border-spacing: initial; }
   .status:hover { z-index: 9; }
   .status:focus-within { z-index: 9; }
   .status.wrapped > :not(input) { display: none; }
   .status > input { position: absolute; left: 0; top: 0; width: 1em; height: 1em; border: none; background: transparent; padding: 0; margin: 0; }
   .status > p { font-size: 0.6em; margin: 0; padding: 0; }
   .status > p + p { padding-top: 0.5em; }
   .status > p > strong { margin-left: 1.5em; }
   .status > .support { display: block; }
   .status > .support > span { padding: 0.2em 0; display: block; display: table; }
   .status > .support > span.partial { color: #666666; filter: grayscale(50%); }
   .status > .support > span.no { color: #CCCCCC; filter: grayscale(100%); }
   .status > .support > span.no::before { opacity: 0.5; }
   .status > .support > span:first-of-type { padding-top: 0.5em; }
   .status > .support > span > span { padding: 0 0.5em; display: table-cell; vertical-align: top; }
   .status > .support > span > span:first-child { width: 100%; }
   .status > .support > span > span:last-child { width: 100%; white-space: pre; padding: 0; }
   .status > .support > span::before { content: ' '; display: table-cell; min-width: 1.5em; height: 1.5em; background: no-repeat center center; background-size: contain; text-align: right; font-size: 0.75em; font-weight: bold; }
   .status > .support > .and_chr::before { background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg); }
   .status > .support > .and_ff::before { background-image: url(https://resources.whatwg.org/browser-logos/firefox.png); }
   .status > .support > .and_uc::before { background-image: url(https://resources.whatwg.org/browser-logos/uc.png); } /* UC Browser for Android */
   .status > .support > .android::before { background-image: url(https://resources.whatwg.org/browser-logos/android.svg); }
   .status > .support > .bb::before { background-image: url(https://resources.whatwg.org/browser-logos/bb.jpg); } /* Blackberry Browser */
   .status > .support > .chrome::before { background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg); }
   .status > .support > .edge::before { background-image: url(https://resources.whatwg.org/browser-logos/edge.svg); }
   .status > .support > .firefox::before { background-image: url(https://resources.whatwg.org/browser-logos/firefox.png); }
   .status > .support > .ie::before { background-image: url(https://resources.whatwg.org/browser-logos/ie.png); }
   .status > .support > .ie_mob::before { background-image: url(https://resources.whatwg.org/browser-logos/ie-mobile.svg); }
   .status > .support > .ios_saf::before { background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg); }
   .status > .support > .op_mini::before { background-image: url(https://resources.whatwg.org/browser-logos/opera-mini.png); }
   .status > .support > .op_mob::before { background-image: url(https://resources.whatwg.org/browser-logos/opera.png); }
   .status > .support > .opera::before { background-image: url(https://resources.whatwg.org/browser-logos/opera.png); }
   .status > .support > .safari::before { background-image: url(https://resources.whatwg.org/browser-logos/safari.png); }
   .status > .support > .samsung::before { background-image: url(https://resources.whatwg.org/browser-logos/samsung.png); }
   .status > .caniuse { text-align: right; font-style: italic; }
   .status > .caniuse + p { margin-top: 0.5em; border-top: 1px solid silver; }

   @media (max-width: 767px) {
     .status { right: -9em; }
   }

   .applies .yes, .yesno .yes { background: yellow; }
   .yesno .yes, .yesno .no { text-align: center; }

   .applies thead th > * { display: block; }
   .applies thead code { display: block; }
   .applies td { text-align: center; }

   .matrix, .matrix td { border: hidden; text-align: right; }
   .matrix { margin-left: 2em; }

   .vertical-summary-table tr > th[rowspan="2"]:first-child + th,
   .vertical-summary-table tr > td[rowspan="2"]:first-child + td { border-bottom: hidden; }

   .dice-example { border-collapse: collapse; border-style: hidden solid solid hidden; border-width: thin; margin-left: 3em; }
   .dice-example caption { width: 30em; font-size: smaller; font-style: italic; padding: 0.75em 0; text-align: left; }
   .dice-example td, .dice-example th { border: solid thin; width: 1.35em; height: 1.05em; text-align: center; padding: 0; }

   td.eg { border-width: thin; text-align: center; }

   #table-example-1 { border: solid thin; border-collapse: collapse; margin-left: 3em; }
   #table-example-1 caption { padding-bottom: 0.5em; }
   #table-example-1 thead, #table-example-1 tbody { border: none; }
   #table-example-1 th, #table-example-1 td { border: solid thin; }
   #table-example-1 th { font-weight: normal; }
   #table-example-1 td { border-style: none solid; vertical-align: top; }
   #table-example-1 th { padding: 0.5em; vertical-align: middle; text-align: center; }
   #table-example-1 tbody tr:first-child td { padding-top: 0.5em; }
   #table-example-1 tbody tr:last-child td { padding-bottom: 1.5em; }
   #table-example-1 tbody td:first-child { padding-left: 2.5em; padding-right: 0; width: 9em; }
   #table-example-1 tbody td:first-child::after { content: leader(". "); }
   #table-example-1 tbody td { padding-left: 2em; padding-right: 2em; }
   #table-example-1 tbody td:first-child + td { width: 10em; }
   #table-example-1 tbody td:first-child + td ~ td { width: 2.5em; }
   #table-example-1 tbody td:first-child + td + td + td ~ td { width: 1.25em; }

   .apple-table-examples { border: none; border-collapse: separate; border-spacing: 1.5em 0em; width: 40em; margin-left: 3em; }
   .apple-table-examples * { font-family: "Times", serif; }
   .apple-table-examples td, .apple-table-examples th { border: none; white-space: nowrap; padding-top: 0; padding-bottom: 0; }
   .apple-table-examples tbody th:first-child { border-left: none; width: 100%; }
   .apple-table-examples thead th:first-child ~ th { font-size: smaller; font-weight: bolder; border-bottom: solid 2px; text-align: center; }
   .apple-table-examples tbody th::after, .apple-table-examples tfoot th::after { content: leader(". ") }
   .apple-table-examples tbody th, .apple-table-examples tfoot th { font: inherit; text-align: left; }
   .apple-table-examples td { text-align: right; vertical-align: top; }
   .apple-table-examples.e1 tbody tr:last-child td { border-bottom: solid 1px; }
   .apple-table-examples.e1 tbody + tbody tr:last-child td { border-bottom: double 3px; }
   .apple-table-examples.e2 th[scope=row] { padding-left: 1em; }
   .apple-table-examples sup { line-height: 0; }

   .three-column-nowrap tr > td:first-child,
   .three-column-nowrap tr > td:first-child + td,
   .three-column-nowrap tr > td:first-child + td + td { white-space: nowrap; }

   .details-example img { vertical-align: top; }

   .parse-error-table td > p:first-child { margin-top: 0; }

   #base64-table {
     white-space: nowrap;
     font-size: 0.6em;
     column-width: 6em;
     column-count: 5;
     column-gap: 1em;
     -moz-column-width: 6em;
     -moz-column-count: 5;
     -moz-column-gap: 1em;
     -webkit-column-width: 6em;
     -webkit-column-count: 5;
     -webkit-column-gap: 1em;
   }
   #base64-table thead { display: none; }
   #base64-table * { border: none; }
   #base64-table tbody td:first-child:after { content: ':'; }
   #base64-table tbody td:last-child { text-align: right; }

   #named-character-references-table {
     white-space: nowrap;
     font-size: 0.6em;
     column-width: 30em;
     column-gap: 1em;
     -moz-column-width: 30em;
     -moz-column-gap: 1em;
     -webkit-column-width: 30em;
     -webkit-column-gap: 1em;
   }
   #named-character-references-table > table > tbody > tr > td:first-child + td,
   #named-character-references-table > table > tbody > tr > td:last-child { text-align: center; }
   #named-character-references-table > table > tbody > tr > td:last-child:hover > span { position: absolute; top: auto; left: auto; margin-left: 0.5em; line-height: 1.2; font-size: 5em; border: outset; padding: 0.25em 0.5em; background: white; width: 1.25em; height: auto; text-align: center; }
   #named-character-references-table > table > tbody > tr#entity-CounterClockwiseContourIntegral > td:first-child { font-size: 0.5em; }

   .glyph.control { color: red; }

   #table-example-1 * { font-family: "Essays1743", serif; line-height: 1.01em; }
   @font-face {
     font-family: 'Essays1743';
     src: url('/html/fonts/Essays1743.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-weight: bold;
     src: url('/html/fonts/Essays1743-Bold.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     src: url('/html/fonts/Essays1743-Italic.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     font-weight: bold;
     src: url('/html/fonts/Essays1743-BoldItalic.ttf');
   }

   @media (max-width: 767px) {
     #abstractimg { width: 100%; }
   }
   #abstractimg, #abstractimg text { font: inherit; }
   #abstractimg rect { fill: #424242; }
   #abstractimg text { fill: #ffffff; font-size: 18px }
   #abstractimg .top { word-spacing: 50px; text-anchor: middle; }
   #abstractimg .left, #abstractimg .bottom { word-spacing: 12px; }
   #abstractimg .right { font-size: 25px; }
  </style>
  <script data-file-issue-url=https://github.com/whatwg-cn/html/issues/new src=/html/resources/file-issue.js async=""></script>
  <header id=head class="head with-buttons">
   <p><a href=https://whatwg.org/ class=logo><img alt=WHATWG src=https://resources.whatwg.org/logo.svg width=100 height=100></a></p>
   <hgroup><h1 class=allcaps>HTML</h1><h2 id=living-standard class="no-num no-toc">Living Standard — Last Updated <span class=pubdate>4 June 2017</span></h2></hgroup>
   
   
   <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-91053840-1', 'auto');
      ga('send', 'pageview');
   </script>
  </header>

  

  

  
  

  
  

  

  <nav><a href=introduction.html>← 1 概述</a> — <a href=index.html>Table of Contents</a> — <a href=dom.html>3 HTML 文档的语义，结构，与API →</a></nav><ol class=toc><li id=toc-infrastructure><a href=infrastructure.html#infrastructure>2 公共基础设施</a><ol><li><a href=infrastructure.html#术语>2.1 术语</a><ol><li><a href=infrastructure.html#资源>2.1.1 资源</a><li><a href=infrastructure.html#xml>2.1.2 XML 兼容性</a><li><a href=infrastructure.html#dom-树>2.1.3 DOM 树</a><li><a href=infrastructure.html#脚本>2.1.4 脚本</a><li><a href=infrastructure.html#插件>2.1.5 插件</a><li><a href=infrastructure.html#encoding-terminology>2.1.6 字符编码</a><li><a href=infrastructure.html#符合性类别>2.1.7 符合性类别</a><li><a href=infrastructure.html#依赖>2.1.8 依赖</a><li><a href=infrastructure.html#可扩展性-2>2.1.9 可扩展性</a><li><a href=infrastructure.html#interactions-with-xpath-and-xslt>2.1.10 与 XPath 和 XSLT 交互</a></ol><li><a href=infrastructure.html#区分大小写和字符串比较>2.2 区分大小写和字符串比较</a><li><a href=infrastructure.html#公共微语法>2.3 公共微语法</a><ol><li><a href=infrastructure.html#常见的解析器风格>2.3.1 常见的解析器风格</a><li><a href=infrastructure.html#布尔属性>2.3.2 布尔属性</a><li><a href=infrastructure.html#关键字和枚举属性>2.3.3 关键字和枚举属性</a><li><a href=infrastructure.html#数字>2.3.4 数字</a><ol><li><a href=infrastructure.html#有符号整数>2.3.4.1 有符号整数</a><li><a href=infrastructure.html#非负整数>2.3.4.2 非负整数</a><li><a href=infrastructure.html#浮点数>2.3.4.3 浮点数</a><li><a href=infrastructure.html#percentages-and-dimensions>2.3.4.4 百分数和长度</a><li><a href=infrastructure.html#非零百分数和长度>2.3.4.5 非零百分数和长度</a><li><a href=infrastructure.html#浮点数列表>2.3.4.6 浮点数列表</a><li><a href=infrastructure.html#维度值列表>2.3.4.7 维度值列表</a></ol><li><a href=infrastructure.html#日期和时间>2.3.5 日期和时间</a><ol><li><a href=infrastructure.html#月份>2.3.5.1 月份</a><li><a href=infrastructure.html#日期>2.3.5.2 日期</a><li><a href=infrastructure.html#无年的日期>2.3.5.3 无年的日期</a><li><a href=infrastructure.html#时间>2.3.5.4 时间</a><li><a href=infrastructure.html#本地日期和时间>2.3.5.5 本地日期和时间</a><li><a href=infrastructure.html#时区>2.3.5.6 时区</a><li><a href=infrastructure.html#全球日期和时间>2.3.5.7 全球日期和时间</a><li><a href=infrastructure.html#星期>2.3.5.8 星期</a><li><a href=infrastructure.html#时间间隔>2.3.5.9 时间间隔</a><li><a href=infrastructure.html#模糊的时间>2.3.5.10 模糊的时间</a></ol><li><a href=infrastructure.html#colours>2.3.6 颜色</a><li><a href=infrastructure.html#空格分隔的令牌>2.3.7 空格分隔的令牌</a><li><a href=infrastructure.html#逗号分隔的令牌>2.3.8 逗号分隔的令牌</a><li><a href=infrastructure.html#syntax-references>2.3.9 引用</a><li><a href=infrastructure.html#mq>2.3.10 媒体查询</a></ol><li><a href=infrastructure.html#url-2>2.4 URL</a><ol><li><a href=infrastructure.html#术语-2>2.4.1 术语</a><li><a href=infrastructure.html#resolving-urls>2.4.2 解析 URL</a><li><a href=infrastructure.html#基-url-的动态变化>2.4.3 基 URL 的动态变化</a></ol><li><a href=infrastructure.html#fetching-resources>2.5 获取资源</a><ol><li><a href=infrastructure.html#术语-3>2.5.1 术语</a><li><a href=infrastructure.html#content-type-sniffing>2.5.2 确定响应类型</a><li><a href=infrastructure.html#从-meta-元素提取字符编码>2.5.3 从 <code>meta</code> 元素提取字符编码</a><li><a href=infrastructure.html#cors-设置属性>2.5.4 CORS 设置属性</a><li><a href=infrastructure.html#引荐来源策略属性>2.5.5 引荐来源策略属性</a></ol><li><a href=infrastructure.html#通用-dom-接口>2.6 通用 DOM 接口</a><ol><li><a href=infrastructure.html#在-idl-属性中反映内容属性>2.6.1 在 IDL 属性中反映内容属性</a><li><a href=infrastructure.html#集合>2.6.2 集合</a><ol><li><a href=infrastructure.html#htmlallcollection-接口>2.6.2.1 <code>HTMLAllCollection</code> 接口</a><li><a href=infrastructure.html#htmlformcontrolscollection-接口>2.6.2.2 <code>HTMLFormControlsCollection</code> 接口</a><li><a href=infrastructure.html#htmloptionscollection-接口>2.6.2.3 <code>HTMLOptionsCollection</code> 接口</a></ol><li><a href=infrastructure.html#domstringlist-接口>2.6.3 <code>DOMStringList</code> 接口</a><li><a href=infrastructure.html#垃圾回收>2.6.4 垃圾回收</a></ol><li><a href=infrastructure.html#安全地传递结构化数据>2.7 安全地传递结构化数据</a><ol><li><a href=infrastructure.html#可序列化对象>2.7.1 可序列化对象</a><li><a href=infrastructure.html#可传输对象>2.7.2 可传输对象</a><li><a href=infrastructure.html#structuredserializeinternal>2.7.3 StructuredSerializeInternal ( <var>value</var>，
  <var>forStorage</var> [ ，<var>memory</var> ] )</a><li><a href=infrastructure.html#structuredserialize>2.7.4 StructuredSerialize ( <var>value</var> )</a><li><a href=infrastructure.html#structuredserializeforstorage>2.7.5 StructuredSerializeForStorage ( <var>value</var> )</a><li><a href=infrastructure.html#structureddeserialize>2.7.6 StructuredDeserialize ( <var>serialized</var>，
  <var>targetRealm</var> [ ，<var>memory</var> ] )</a><li><a href=infrastructure.html#structuredserializewithtransfer>2.7.7 StructuredSerializeWithTransfer ( <var>value</var>，
  <var>transferList</var> )</a><li><a href=infrastructure.html#structureddeserializewithtransfer>2.7.8 StructuredDeserializeWithTransfer (
  <var>serializeWithTransferResult</var>，<var>targetRealm</var> )</a><li><a href=infrastructure.html#performing-structured-clones-from-other-specifications>2.7.9 在其他规范中执行序列化和传输</a><li><a href=infrastructure.html#blob-和-filelist-对象的猴子补丁>2.7.10 <code>Blob</code> 和 <code>FileList</code> 对象的猴子补丁</a></ol></ol></ol><h2 id=infrastructure>2 公共基础设施<a href=#infrastructure class=self-link></a></h2>

  <p>该标准依赖于 WHATWG Infra 标准。 <a href=references.html#refsINFRA>[INFRA]</a></p>

  <h3 id=术语>2.1 术语<a href=#术语 class=self-link></a></h3>

  <p>该标准所说的属性，指的是 HTML，XML 和 IDL 属性，通常在同一个上下文中。当未具体提及所指时，HTML 和 XML 属性指的是 <dfn>content attributes</dfn>，而 <dfn>IDL
  attributes</dfn>指的是在 IDL 接口中定义的属性。同样，“属性”这个词也同时指 Javascript 对象属性和 CSS 属性。在可能产生混淆时，
  该标准使用 <dfn>object properties</dfn> 和 <dfn>CSS properties</dfn> 来区别。</p>

  <p>一般而言，当该标准申明一个特性可以在 <a href=syntax.html#syntax id=术语:syntax>HTML 语法</a> 或 <a href=xhtml.html#the-xhtml-syntax id=术语:the-xhtml-syntax>XML 语法</a> 中应用，则在另一个中也可用。
  当一个特性仅在两个语言之一中应用时，该标准将显式申明它不能在另一个语言中使用，
  如：“可在 HTML 中使用，…… （该语法不可用于 XML）”。</p>

  <p>该标准使用术语 <a href=dom.html#document id=术语:document>文档</a>指任何 HTML，从短小精悍的文档到长篇累牍的论文，
  亦或是多媒体报告、完整的交互式应用程序。该术语同时指 <code id=术语:document-2><a href=dom.html#document>Document</a></code> 对象和他们的后裔 DOM 树。至于序列化的字节流，
  则根据上下文使用 <a href=syntax.html#syntax id=术语:syntax-2>HTML 语法</a> 或 <a href=xhtml.html#the-xhtml-syntax id=术语:the-xhtml-syntax-2>XML 语法</a> 来表示。</p>

  <p>在 DOM 结构的上下文中，使用的术语 <a href=https://dom.spec.whatwg.org/#html-document id=术语:html-documents data-x-internal=html-documents>HTML 文档</a> 和
  <a href=https://dom.spec.whatwg.org/#xml-document id=术语:xml-documents data-x-internal=xml-documents>XML 文档</a> 定义在 DOM 标准中，
  并且特指 <code id=术语:document-3><a href=dom.html#document>Document</a></code> 对象所处的两种不同模式。 <a href=references.html#refsDOM>[DOM]</a> （这样的使用都会超链接到它们的定义）</p>

  <p>在字节流的上下文中，术语 <a href=https://dom.spec.whatwg.org/#html-document id=术语:html-documents-2 data-x-internal=html-documents>HTML 文档</a> 指标记为 <code id=术语:text/html><a href=iana.html#text/html>text/html</a></code> 的资源，
  术语 <a href=https://dom.spec.whatwg.org/#xml-document id=术语:xml-documents-2 data-x-internal=xml-documents>XML 文档</a> 指标记为 <a id=术语:xml-mime-type href=https://mimesniff.spec.whatwg.org/#xml-mime-type data-x-internal=xml-mime-type>XML MIME type</a> 的资源。</p>

  <hr>

  <p>简单起见，像 <dfn>shown</dfn>, <dfn>displayed</dfn>, 以及
  <dfn>visible</dfn> 这样的术语可能会用来指明文档渲染给用户的方式，
  这些术语并不是指应用于视觉媒介；必须考虑将它们以等价的方式应用于其他的媒介。</p>
  <p class=comment>某个元素是visible的并不仅仅指该元素在视觉上可见，比如屏幕阅读器也应将该元素阅读给用户。</p>

  

  <p>B 算法返回给 A 算法，指的是 A 调用了 B。当返回给 A时，
  该实现必须从离开的时候（即调用 B 时）继续执行。
  有些算法是<dfn id=in-parallel data-export="">并行的</dfn>，
  这是指该算法后续的步骤会有序执行，但该过程是与本标准中的其他逻辑（例如<a href=webappapis.html#event-loop id=术语:event-loop>事件循环</a>）同时执行的。
  本标准并未精确地定义该行为的具体机制，例如分时合作式多任务、纤程、线程、进程，可以运行在不同的超线程、核心、CPU、甚至不同的机器上。
  相反地，<dfn id=immediately>立即</dfn>执行的操作必须中断当前正在执行的任务，执行它自己，然后恢复先前正在执行的任务。

  </p>

  
  <p>术语 "transparent black" 是指 red, green, blue, alpha 通道都设为0的颜色。</p>


  <h4 id=资源>2.1.1 资源<a href=#资源 class=self-link></a></h4>

  <p>本标准中术语 <dfn>支持</dfn>  是指用户代理是否实现了对外部资源的语义的解码能力。
  <i>支持</i> 某种格式或类型是指这一实现可以处理该格式或类型的外部资源，且处理过程不会忽略关键方面。
  是否 <i>支持</i> 某种特定资源取决于该资源类型有哪些在用的特性。</p>

  <p class=example>例如，如果可以解码和渲染 PNG 图片的像素数据，就可以认为支持 PNG 图片格式。
  即使这一实现不知道该图片还包含了动画数据。</p>

  <p class=example>如果不支持使用的压缩格式，即使实现可以从文件的元数据确定电影的尺寸，MPEG-4 视频文件也不会被视为支持的格式。</p>

  <p>有些标准中（特别是 HTTP 标准）中称为 <i>表示（representation）</i> 的在本标准中称为 <dfn>资源（resource）</dfn>。
  <a href=references.html#refsHTTP>[HTTP]</a></p>

  <p>资源的 <dfn id=critical-subresources>关键子资源</dfn> 是那些需要被正确处理的资源。
  哪些资源被认为是关键的，由定义该资源格式的标准来定义。</p>


  <h4 id=xml>2.1.2 XML 兼容性<a href=#xml class=self-link></a></h4>

  <p id=html-namespace>为了方便从 HTML 迁移到 XML，遵循本标准的用户代理会把 HTML 中的元素放在
  <code id=xml:html-namespace-2><a data-x-internal=html-namespace-2 href=https://infra.spec.whatwg.org/#html-namespace>http://www.w3.org/1999/xhtml</a></code> 命名空间，
  至少是为了 DOM 和 CSS 的目的。
  本标准中使用的术语 "<dfn id=html-elements>HTML 元素</dfn>"，是指所有在那个命名空间中的元素，
  包括 XML 文档中的。</p>

  <p>除非另有声明，所有本标准中定义和提到的元素均位于
  <a href=https://infra.spec.whatwg.org/#html-namespace id=xml:html-namespace-2-2 data-x-internal=html-namespace-2>HTML</a>
  （"<code>http：//www.w3.org/1999/xhtml</code>"），
  本标准中所有定义和提到的属性（Attribute）没有命名空间。</p>

  <p>术语 <dfn id=element-type>元素类型</dfn> 用于指代给定命名空间和局部名的那些元素。
  例如，<code id=xml:the-button-element><a href=forms.html#the-button-element>button</a></code> 元素的元素类型为 <code id=xml:the-button-element-2><a href=forms.html#the-button-element>button</a></code>，意味着它们的局部名为
  "<code>button</code>" 且（如上述定义地）命名空间为
  <a href=https://infra.spec.whatwg.org/#html-namespace id=xml:html-namespace-2-3 data-x-internal=html-namespace-2>HTML</a>。</p>

  <p>如果属性名匹配 XML 中定义的 <code id=xml:xml-name><a data-x-internal=xml-name href=https://www.w3.org/TR/xml/#NT-Name>Name</a></code> 生成式且不包含
  U+003A COLON 字符（：），那么它就是 <dfn id=xml-compatible>XML 兼容的</dfn> <a href=references.html#refsXML>[XML]</a></p>


  <h4 id=dom-树>2.1.3 DOM 树<a href=#dom-树 class=self-link></a></h4>

  <p>当声明 <dfn id=ignore>忽略</dfn> 某些元素或属性，或当作其他值处理，或当作其他东西处理时，
  都是指节点在 DOM 中之后的处理。在这些情形下用户代理禁止改动 DOM。</p>

  <p>只有内容属性的新值和原值不同时，才说内容属性的值发生了 <dfn>改变</dfn>；
  将内容属性设置到它已有的值不会让它发生改变。</p>

  <p>术语 <dfn>空</dfn> 用于属性值、<code id=dom-树:text><a data-x-internal=text href=https://dom.spec.whatwg.org/#interface-text>文本</a></code> 节点、或字符串时，
  表示文本的长度是零（即不包含<a href=https://infra.spec.whatwg.org/#control id=dom-树:control data-x-internal=control>控制字符</a> 或 U+0020 SPACE）。</p>

  <p>元素的 <dfn id=child-text-content data-export="">子文本内容</dfn> 是指该元素的所有子节点中的
  <code id=dom-树:text-2><a data-x-internal=text href=https://dom.spec.whatwg.org/#interface-text>文本</a></code> 节点（忽略其他的注释和元素节点）的
  <a href=https://dom.spec.whatwg.org/#concept-cd-data id=dom-树:concept-cd-data data-x-internal=concept-cd-data>数据</a> 以 <a href=https://dom.spec.whatwg.org/#concept-tree-order id=dom-树:tree-order data-x-internal=tree-order>树序</a> 连接。</p>

  <p><dfn id=nodes-are-inserted>插入节点 <var>A</var></dfn> 到节点 <var>B</var>
  是指以 <var>A</var> 作为参数调用 <a href=https://dom.spec.whatwg.org/#concept-node-insert-ext id=dom-树:concept-node-insert-ext data-x-internal=concept-node-insert-ext>插入步骤</a>，
  然后 <var>A</var> 新的父节点就是 <var>B</var>。类似地，从节点 <var>B</var>
  <dfn id=nodes-are-removed>移除节点 <var>A</var></dfn> 是指以 <var>A</var> 作为
  <var>removedNode</var> 参数，以 <var>B</var> 作为 <var>oldParent</var> 参数调用
  <a href=https://dom.spec.whatwg.org/#concept-node-remove-ext id=dom-树:concept-node-remove-ext data-x-internal=concept-node-remove-ext>移除步骤</a>。</p>

  <p><dfn id=insert-an-element-into-a-document data-lt="inserted into a document|node is inserted into a document" data-export="">插入节点到文档</dfn>
  是指把它作为参数调用 <a href=https://dom.spec.whatwg.org/#concept-node-insert-ext id=dom-树:concept-node-insert-ext-2 data-x-internal=concept-node-insert-ext>插入步骤</a>，
  然后它就 <a href=https://dom.spec.whatwg.org/#in-a-document-tree id=dom-树:in-a-document-tree data-x-internal=in-a-document-tree>在文档树中</a> 了。类似地，
  <dfn id=remove-an-element-from-a-document data-lt="removed from a document|node is removed from a document" data-export="">
  从文档中移除节点</dfn> 是指把它作为参数调用 <a href=https://dom.spec.whatwg.org/#concept-node-remove-ext id=dom-树:concept-node-remove-ext-2 data-x-internal=concept-node-remove-ext>移除步骤</a>，
  然后它就不 <a href=https://dom.spec.whatwg.org/#in-a-document-tree id=dom-树:in-a-document-tree-2 data-x-internal=in-a-document-tree>在文档树中</a> 了。</p>

  <p>把节点作为参数调用 <a href=https://dom.spec.whatwg.org/#concept-node-insert-ext id=dom-树:concept-node-insert-ext-3 data-x-internal=concept-node-insert-ext>插入步骤</a> 后，
  节点就 <dfn id=becomes-connected data-export="">变成已连接的</dfn>。
  类似地，把它作为参数调用 <a href=https://dom.spec.whatwg.org/#concept-node-remove-ext id=dom-树:concept-node-remove-ext-3 data-x-internal=concept-node-remove-ext>移除步骤</a> 后，
  节点就 <dfn id=becomes-disconnected data-lt="become disconnected" data-export="">
  变成了分离的</dfn>。</p>

  <p>如果节点是 <a href=https://dom.spec.whatwg.org/#connected id=dom-树:connected data-x-internal=connected>已连接的</a> 且它的
  <a href=https://dom.spec.whatwg.org/#concept-shadow-including-root id=dom-树:shadow-including-root data-x-internal=shadow-including-root>包含 Shadow 的根</a> 有
  <a href=browsers.html#concept-document-bc id=dom-树:concept-document-bc>浏览环境</a>，那么它是
  <dfn id=browsing-context-connected data-export="">连接到浏览环境的</dfn>。
  把节点作为参数调用 <a href=https://dom.spec.whatwg.org/#concept-node-insert-ext id=dom-树:concept-node-insert-ext-4 data-x-internal=concept-node-insert-ext>插入步骤</a> 后，
  它就 <dfn id=becomes-browsing-context-connected data-lt="become browsing-context connected" data-export="">连接到了浏览环境</dfn>。
  把节点作为参数调用<a href=https://dom.spec.whatwg.org/#concept-node-remove-ext id=dom-树:concept-node-remove-ext-4 data-x-internal=concept-node-remove-ext>移除步骤</a>，
  或者它的 <a href=https://dom.spec.whatwg.org/#concept-shadow-including-root id=dom-树:shadow-including-root-2 data-x-internal=shadow-including-root>包含 Shadow 的根</a> 不再拥有
  <a href=browsers.html#concept-document-bc id=dom-树:concept-document-bc-2>浏览环境</a> 后，
  它就 <dfn id=becomes-browsing-context-disconnected data-lt="become browsing-context disconnected" data-export="">与浏览环境分离了</dfn>。


  <h4 id=脚本>2.1.4 脚本<a href=#脚本 class=self-link></a></h4>

  <p>有时会用构造 "一个 <code>Foo</code> 对象"
  （其中 <code>Foo</code> 其实是一个接口），
  来表示 "一个实现了 <code>Foo</code> 接口的对象"。</p>

  <p>获取 IDL 属性的值称为 <dfn>获取</dfn>（例如在作者的脚本中），
  将新的值赋值给 IDL 属性则称为 <dfn>设置</dfn>。</p>

  <p>如果 DOM 对象是 <dfn id=live>活的</dfn>，该对象上的属性和方法
  必须 在真正的底层数据（而不是数据快照）上进行操作。</p>


  <h4 id=插件>2.1.5 插件<a href=#插件 class=self-link></a></h4>

  <p>术语 <dfn id=plugin>插件</dfn> 是指一些用户代理定义的内容处理程序，用户代理用它们
  参与 <code id=插件:document><a href=dom.html#document>Document</a></code> 对象的渲染，但不会作为 <code id=插件:document-2><a href=dom.html#document>Document</a></code> 的
  <a href=browsers.html#child-browsing-context id=插件:child-browsing-context>子浏览环境</a>，也不会给
  <code id=插件:document-3><a href=dom.html#document>Document</a></code> 的 DOM 引入任何 <code id=插件:node><a data-x-internal=node href=https://dom.spec.whatwg.org/#interface-node>Node</a></code> 对象。</p>

  <p>通常，这样的内容处理程序由第三方提供，尽管用户代理也可以将内置的内容处理程序指定为插件。</p>

  

  <p>用户代理不得将 <code id=插件:text/plain><a data-x-internal=text/plain href=https://tools.ietf.org/html/rfc2046#section-4.1.3>text/plain</a></code> 和 <code id=插件:application/octet-stream><a data-x-internal=application/octet-stream href=https://tools.ietf.org/html/rfc2046#section-4.5.1>application/octet-stream</a></code> 类型视为注册有
  <a href=#plugin id=插件:plugin>插件</a>。</p> 

  

  <p class=example>插件的一个例子是当用户导航到PDF文件时在
  <a href=browsers.html#browsing-context id=插件:browsing-context>浏览环境</a> 中实例化的PDF查看器。
  无论执行PDF查看器组件的一方是否与实现用户代理本身的方相同，这将被视为插件。
  但是根据定义，与用户代理（而不是使用相同的接口）分开启动的PDF查看器应用程序不是插件。</p>

  <p class=note>该规范没有定义与插件交互的机制，因为插件预期就是用户代理和平台特定的。
  UA 可以选择支持某种插件机制，比如 Netscape Plugin API；
  也可以选择对某些类型使用远程内容转换器或提供内置支持。
  实际上，本标准根本没有要求用户代理支持插件。<a href=references.html#refsNPAPI>[NPAPI]</a></p>

  <p><dfn id=concept-plugin-secure>安全</dfn> 插件应该遵循
  <code id=插件:attr-iframe-sandbox><a href=embedded-content.html#attr-iframe-sandbox>sandbox</a></code> 属性的语义。</p>

  <p class=example>例如，在沙盒 <code id=插件:the-iframe-element><a href=embedded-content.html#the-iframe-element>iframe</a></code> 中初始化的
  安全插件应该阻止其中的内容创建弹出窗口。</p>

  

  <p class=warning>在与 <a href=#plugin id=插件:plugin-2>插件</a> 的外部内容交互时，浏览器应该格外小心。
  当第三方软件以与用户代理本身相同的权限运行时，第三方软件中的漏洞变得与用户代理中的漏洞同样危险。</p>

  <p>因为不同的用户有不同的 <a href=#plugin id=插件:plugin-3>插件</a>，这提供了唯一识别用户的指纹向量，
  推荐用户代理对每个用户都支持同样的 <a href=#plugin id=插件:plugin-4>plugins</a>。
  <a id=插件:fingerprinting-vector title="There is a potential fingerprinting vector here." href=introduction.html#fingerprinting-vector class=fingerprint><img alt="(This is a fingerprinting vector.)" src=/html/images/fingerprint.png width=46 height=64></a>
  </p>

  



  <h4 id=encoding-terminology>2.1.6 字符编码<a href=#encoding-terminology class=self-link></a></h4>

  <p><dfn id=encoding><a href=https://encoding.spec.whatwg.org/#encoding>字符编码</a></dfn>
  或着没有歧义时说的 <i id=encoding-terminology:encoding><a data-x-internal=encoding href=https://encoding.spec.whatwg.org/#encoding>编码</a></i>，是一种字节流与 Unicode 字符串的转换，
  定义在 WHATWG Encoding 标准中。<a href=https://encoding.spec.whatwg.org/#encoding id=encoding-terminology:encoding-2 data-x-internal=encoding>编码</a> 包括一个
  <dfn id=encoding-name><a href=https：//encoding.spec.whatwg.org/#name>编码名称</a></dfn>
  和一个或更多的 <dfn id=encoding-label><a href=https：//encoding.spec.whatwg.org/#label>
  编码标签</a></dfn>，编码的 <i>名称</i> 和 <i>标签</i>
  定义在 Encoding 标准中。 <a href=references.html#refsENCODING>[ENCODING]</a></p>

  <p><a id=encoding-terminology:utf-16be href=https://encoding.spec.whatwg.org/#utf-16be data-x-internal=utf-16be>UTF-16BE</a> 都是 <a id=encoding-terminology:utf-16le href=https://encoding.spec.whatwg.org/#utf-16le data-x-internal=utf-16le>UTF-16LE</a> 都是 <dfn id=utf-16-encoding>UTF-16 编码</dfn>。<a href=references.html#refsENCODING>[ENCODING]</a></p>

  <p>任何 <a href=#utf-16-encoding id=encoding-terminology:utf-16-encoding>UTF-16 编码</a> 之外的 <a href=https://encoding.spec.whatwg.org/#encoding id=encoding-terminology:encoding-3 data-x-internal=encoding>编码</a>
  都是 <dfn id=ascii-compatible-encoding>ASCII 兼容的编码</dfn>。<a href=references.html#refsENCODING>[ENCODING]</a></p>

  <p class=note>因为 WHATWG Encoding 标准中没定义的编码都不允许使用，
  <a href=#utf-16-encoding id=encoding-terminology:utf-16-encoding-2>UTF-16 编码</a> 是本标准中唯一需要处理的
  不 <a href=#ascii-compatible-encoding id=encoding-terminology:ascii-compatible-encoding>ASCII 兼容的编码</a>。



  </p>

  <h4 id=符合性类别>2.1.7 符合性类别<a href=#符合性类别 class=self-link></a></h4>

  <p>本标准描述了 用户代理（实现者相关）和 文档
   （作者和编写工具的实现者相关） 的符合性标准。</p>

  <p><dfn id=conforming-documents>符合规范的文档</dfn> 是符合所有符合性要求的文档。
  为了提高可读性，有些符合性要求是对作者提出的；这些是对文档的隐性要求：
  按照定义所有文档都有对应的作者。（有些情况下，作者本身可能是一个用户代理
  — 这些用户代理受其他规则的约束，见下文。）
  </p>

  <p class=example>例如，如果一项要求声明 "作者 禁止使用
  <code>foobar</code> 元素"，意味着文档不允许包含名为 <code>foobar</code> 的元素。</p>

  <p class="note impl">文档的符合性要求与实现的符合性要求没有隐含的关系。
  用户代理不能随意处理不合规范的文档；不论输入的文档是否合规，本标准中描述的处理模型都适用。</p>

  <p>按照不同的符合性要求，用户代理分为（有重合的）几类。</p>

  <dl><dt id=interactive>Web 浏览器和其他交互式用户代理<dd>

    <p>支持 <a href=xhtml.html#the-xhtml-syntax id=符合性类别:the-xhtml-syntax>XML 语法</a> 的 Web 浏览器必须按照本标准的描述
    处理 XML 文档中 <a href=https://infra.spec.whatwg.org/#html-namespace id=符合性类别:html-namespace-2 data-x-internal=html-namespace-2>HTML 命名空间</a> 的元素和属性，
    以便用户与之交互，除非那些元素的语义已经被其他标准覆盖。</p>

    <p class=example>在 XML 文档中查找 <code id=符合性类别:the-script-element><a href=scripting.html#the-script-element>script</a></code> 元素时，符合规范的 Web
    浏览器会执行该元素包含的脚本。然而，如果该元素处于 XSLT 变换中（假设用户代理也支持 XSLT），
    那么处理器会将 <code id=符合性类别:the-script-element-2><a href=scripting.html#the-script-element>script</a></code> 元素作为组成这一变换的不透明元素处理。</p>

    <p>支持 <a href=syntax.html#syntax id=符合性类别:syntax>HTML 语法</a> 的 Web 浏览器必须按照本标准的描述
    处理标记为 <a href=https://mimesniff.spec.whatwg.org/#html-mime-type id=符合性类别:html-mime-type data-x-internal=html-mime-type>HTML MIME 类型</a> 的文档，以便用户与它们交互。</p>

    <p>支持脚本的用户代理也必须一致地实现本标准中的 IDL 片段，IDL 片段定义在 Web IDL 标准中。 <a href=references.html#refsWEBIDL>[WEBIDL]</a></p>

    <p class=note>除非明确声明，覆盖 HTML 元素语义的标准不覆盖对（表示这些元素的） DOM 对象的要求。
    例如，上面例子中的 <code id=符合性类别:the-script-element-3><a href=scripting.html#the-script-element>script</a></code> 元素仍然实现 <code id=符合性类别:htmlscriptelement><a href=scripting.html#htmlscriptelement>HTMLScriptElement</a></code> 接口。</p>

   <dt id=non-interactive>表示性的非交互式用户代理<dd>

    <p>处理 HTML 和 XML 文档并纯粹地渲染它们的非交互式版本的用户代理必须遵循与
    Web 浏览器同样的符合性规范，除了它们可以免除用户交互的要求。</p>

    <p class=note>非交互式用户代理的典型例子就是打印机（静态 UA）和投影仪（动态 UA）。
    多数静态的非交互式用户代理 <a href=#non-scripted>不支持脚本</a>。</p>

    <p class=example>非交互式的动态 UA 仍然会执行脚本，以便动态提交表单。
    但是因为没有获得焦点的概念，这些 UA 可能不需要实现焦点相关的 DOM API。</p>

   <dt id=renderingUA>支持建议默认渲染的可视化用户代理<dd>

    <p>无论是交互式还是非交互式用户代理，都可以被指定（比如通过作为用户选项）本标准定义的建议默认渲染。</p>

    <p>这并非强制要求，特别是即使用户代理实现了建议默认渲染，也建议为此提供设置来提升用户体验，
    例如改变色彩对比度，使用不同的焦点样式，或者其他提升可访问性和可用性的方式。</p>

    <p>如果指定了建议默认渲染，支持建议默认渲染的用户代理必须根据
    <a href=rendering.html#rendering>渲染部分</a> 定义的规则实现
    用户代理 <em>期望</em> 实现的行为。</p>

   <dt id=non-scripted>不支持脚本的用户代理<dd>

    <p>不支持脚本的实现（或者完全禁用了其脚本特性的用户代理）可以不支持本标准中提到的事件和 DOM 接口。
    但对于本标准中定义的事件模型和 DOM，这些用户代理仍然必须表现地像支持事件和 DOM 一样。</p>

    <p class=note>脚本可能是构成应用的一部分。不支持脚本或禁用了脚本的 Web 浏览器可能无法完全表达作者的意图。</p>

   <dt>符合性检查器<dd id=conformance-checkers>

    <p>符合性检查器必须验证文档是否符合

    符合性检查程序必须验证文档是否符合本规范中描述的适用的一致性标准。
    自动化的符合检查程序可以不必检测需要解释作者意图的错误（例如，
    <code id=符合性类别:the-blockquote-element><a href=semantics.html#the-blockquote-element>blockquote</a></code> 的内容不是引用文档就不符合标准，如果符合性检查程序在运行时没有人为判断的输入，
    就不必检查 <code id=符合性类别:the-blockquote-element-2><a href=semantics.html#the-blockquote-element>blockquote</a></code>  元素是否只包含引用的内容）。</p>

    <p>符合性检查器必须检查没有
    <a href=browsers.html#concept-document-bc id=符合性类别:concept-document-bc>浏览环境</a>
    （意味着没有脚本运行，并且禁用了解析器的
    <a href=syntax.html#scripting-flag id=符合性类别:scripting-flag>脚本标志</a>
    ）时解析输入文档符合规范，
    还应检查在会执行脚本的
    <a href=browsers.html#concept-document-bc id=符合性类别:concept-document-bc-2>浏览环境</a>
    下解析输入文档符合规范，并且脚本的执行永远不会导致不符合规范的状态（脚本执行过程中除外）出现。
    （这只是一个“应该”而不是“必须”的要求，因为这已被证明是不可能的。<a href=references.html#refsCOMPUTABLE>[COMPUTABLE]</a>）</p>

    <p>"HTML 校验器" 可以指代遵循本标准中的适用要求的符合性检查器。</p>

    <div class=note>

     <p>XML DTD 无法表达本标准的所有符合性要求。因此 XML 校验器加 DTD 不能代替符合性检查器。
     此外本标准中定义的这两种写作格式都不属于 SGML，因此 SGML 系统也不能代替符合性检查器。</p>

     <p>换句话说，有三种符合性规则：</p>

     <ol><li>DTD 可表达的规则。<li>DTD 不可表达但仍然可以由机器检查的规则。<li>只能由人工检查的规则。</ol>

     <p>符合性检查器可以检查前面两种。简单的基于 DTD 的校验器只能检查第一类错误，
     因此根据本标准，它不是一种遵循标准的符合性检查器。</p>

    </div>
   <dt>数据挖掘工具<dd id=data-mining>

    <p>不是出于渲染文档或检查文档是否符合规范目的的，处理 HTML 和 XML 文档的应用程序和工具，
    其行为应当与其处理的文档的语义保持一致。</p>

    <p class=example>只增加每个段落（paragraph）的嵌套层级但不增加每个章节（section）的嵌套层级的
    <a href=semantics.html#outline id=符合性类别:outline>文档大纲</a> 生成工具是不合规范的。</p>

    <p class=comment>只增加 <code>&lt;p></code> 的层级而不增加
    <code>&lt;section></code> 的层级会破坏 DOM 原有的语义，比如让段落变成了子段落。</p>

   <dt id=editors>编写工具和标记生成器<dd>

    <p>编写工具和标记生成器必须生成 <a href=#conforming-documents id=符合性类别:conforming-documents>符合规范的文档</a>。
    在适当的地方，适用于作者的符合性规则也适用于编写工具。</p>

    <p>如果编写工具还不能决定作者的意图，可以免除“只能按规定的用途使用元素”的严格要求。
    但是编写工具禁止自动地错误使用元素或鼓励它们的用户这样做。</p>

    <p class=example>例如，将 <code id=符合性类别:the-address-element><a href=semantics.html#the-address-element>address</a></code> 元素用于任意的联系信息是不合规范的；
    该元素只能用于标记文档或章节作者的联系信息。因为编写工具不能区分此意图，所以可以免除这项要求。
    但这不意味着（比如）编写工具可以为了斜体字而任意地使用 <code id=符合性类别:the-address-element-2><a href=semantics.html#the-address-element>address</a></code> 元素；
    只意味着编写工具可以在用户给章节插入联系信息时不验证它，
    也不需保证用户没用它做别的事或插入别的东西。</p>

    <p class=note>在符合性检查方面，文本编辑器必须像符合性检查器一样输出符合规范的文档。</p>

    <p>当使用编写工具编辑不符合规范的文档时，可以保持未编辑部分的符合性错误。
    （即允许错误的内容经过编辑工具而不发生改变）。
    但如果保持了错误，禁止编写工具声明其输出是符合规范的。</p>

    <p>编写工具大致分为两类：在结构化或语义数据上进行编辑，
    或者在所见即所得的（WYSIWYG）特定媒体上进行编辑。</p>

    <p>前者是编写 HTML 工具的理想机制，因为源码信息中的结构可用于更好地选择 HTML 元素和属性。</p>

    <p>但是 WYSIWYG 工具也是合理的。WYSIWYG 工具应该使用它们认为合适的元素，
    不应该使用它们不确定是否合适的元素。这可能在特定极端情况下意味着对能够使用的流式元素做出限制，
    比如 <code id=符合性类别:the-div-element><a href=semantics.html#the-div-element>div</a></code>，<code id=符合性类别:the-b-element><a href=semantics.html#the-b-element>b</a></code>，<code id=符合性类别:the-i-element><a href=semantics.html#the-i-element>i</a></code>，以及 <code id=符合性类别:the-span-element><a href=semantics.html#the-span-element>span</a></code>，以及使用大量的
    <code id=符合性类别:the-style-attribute><a href=dom.html#the-style-attribute>style</a></code> 属性。</p>

    <p>不论是不是 WYSIWYG，所有编写工具都应该尽量让用户创建良构的、语义丰富的、媒体无关的内容。</p>

   </dl>

  <p id=hardwareLimitations>为了防范诸如 DoS 攻击、内存耗尽，或解决平台相关的限制，
  用户代理可能会对本来不受约束的输入强加实现相关的限制。
  <a id=符合性类别:fingerprinting-vector title="There is a potential fingerprinting vector here." href=introduction.html#fingerprinting-vector class=fingerprint><img alt="(This is a fingerprinting vector.)" src=/html/images/fingerprint.png width=46 height=64></a>
  </p>

  <p>为了兼容既有内容与标准，本标准描述了两种写作格式：
  一种基于 <a href=xhtml.html#the-xhtml-syntax id=符合性类别:the-xhtml-syntax-2>XML</a>，
  另一种基于 SGML 启发的 <a href=syntax.html#writing>自定义格式</a>
  （称为 <a href=syntax.html#syntax id=符合性类别:syntax-2>HTML 语法</a>）。
  本标准鼓励实现同时支持以上两种格式，但至少支持其中一种。</p>

  <p>一些符合性要求称为元素、属性、方法或对象的要求。
  这些要求分为两类：描述内容模型限制的，和描述实现行为的。
  前者是对文档和编写工具的要求，后者是对用户代理的要求。
  类似地，另一些符合性要求称为对作者的要求；这些要求应解释为对作者产出的文档的符合性要求。
  （换句话说，本标准不区分对作者和对文档的符合性要求）</p>

  


  <h4 id=依赖>2.1.8 依赖<a href=#依赖 class=self-link></a></h4>

  <div data-noexport="">

  <p>本标准依赖于其他几个基本标准。</p>

  <dl><dt>Infra<dd>
    <p>下列术语定义在 WHATWG Infra 标准中：<a href=references.html#refsINFRA>[INFRA]</a></p>

    <ul class=brief><li>通用的迭代术语
         <dfn id=while><a href=https://infra.spec.whatwg.org/#iteration-while>while</a></dfn>,
         <dfn id=continue><a href=https://infra.spec.whatwg.org/#iteration-continue>continue</a></dfn>，和
         <dfn id=break><a href=https://infra.spec.whatwg.org/#iteration-break>break</a></dfn>。<li><dfn id=code-point><a href=https://infra.spec.whatwg.org/#code-point>code point</a></dfn> 和它的同义词
         <dfn id=character><a href=https://infra.spec.whatwg.org/#code-point>character</a></dfn><li><dfn id=surrogate><a href=https://infra.spec.whatwg.org/#surrogate>surrogate</a></dfn><li><dfn id=scalar-value><a href=https://infra.spec.whatwg.org/#scalar-value>scalar value</a></dfn><li><dfn id=noncharacter><a href=https://infra.spec.whatwg.org/#noncharacter>noncharacter</a></dfn><li><dfn id=javascript-string-length><a href=https://infra.spec.whatwg.org/#javascript-string-length>JavaScript string length</a></dfn><li><dfn id=string-length><a href=https://infra.spec.whatwg.org/#string-length>string length</a></dfn><li><dfn id=space-characters><a href=https://infra.spec.whatwg.org/#ascii-whitespace>ASCII whitespace</a></dfn><li><dfn id=control><a href=https://infra.spec.whatwg.org/#control>control</a></dfn><li><dfn id=ascii-digits><a href=https://infra.spec.whatwg.org/#ascii-digit>ASCII digit</a></dfn><li><dfn id=uppercase-ascii-hex-digits><a href=https://infra.spec.whatwg.org/#ascii-upper-hex-digit>ASCII upper hex digit</a></dfn><li><dfn id=lowercase-ascii-hex-digits><a href=https://infra.spec.whatwg.org/#ascii-lower-hex-digit>ASCII lower hex digit</a></dfn><li><dfn id=ascii-hex-digits><a href=https://infra.spec.whatwg.org/#ascii-hex-digit>ASCII hex digit</a></dfn><li><dfn id=uppercase-ascii-letters><a href=https://infra.spec.whatwg.org/#ascii-upper-alpha>ASCII upper alpha</a></dfn><li><dfn id=lowercase-ascii-letters><a href=https://infra.spec.whatwg.org/#ascii-lower-alpha>ASCII lower alpha</a></dfn><li><dfn id=ascii-letters><a href=https://infra.spec.whatwg.org/#ascii-alpha>ASCII alpha</a></dfn><li><dfn id=alphanumeric-ascii-characters><a href=https://infra.spec.whatwg.org/#ascii-alphanumeric>ASCII alphanumeric</a></dfn><li><dfn id=converted-to-ascii-lowercase><a href=https://infra.spec.whatwg.org/#ascii-lowercase>ASCII lowercase</a></dfn><li><dfn id=converted-to-ascii-uppercase><a href=https://infra.spec.whatwg.org/#ascii-uppercase>ASCII uppercase</a></dfn><li><dfn id=ascii-case-insensitive><a href=https://infra.spec.whatwg.org/#ascii-case-insensitive>ASCII case-insensitive</a></dfn><li><dfn id=strip-newlines><a href=https://infra.spec.whatwg.org/#strip-newlines>strip newlines</a></dfn><li><dfn id=strip-leading-and-trailing-ascii-whitespace><a href=https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace>strip leading and trailing ASCII whitespace</a></dfn><li><dfn id=strip-and-collapse-ascii-whitespace><a href=https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace>strip and collapse ASCII whitespace</a></dfn><li><dfn id=split-a-string-on-spaces><a href=https://infra.spec.whatwg.org/#split-on-ascii-whitespace>split a string on ASCII whitespace</a></dfn><li><dfn id=split-a-string-on-commas><a href=https://infra.spec.whatwg.org/#split-on-commas>split a string on commas</a></dfn><li><dfn id=collect-a-sequence-of-code-points><a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points>collect a sequence of code points</a></dfn> 和与之关联的
         <dfn id=position-variable><a href=https://infra.spec.whatwg.org/#string-position-variable>position variable</a></dfn><li><dfn id=skip-ascii-whitespace><a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace>skip ASCII whitespace</a></dfn><li><dfn id=ordered-map><a href=https://infra.spec.whatwg.org/#ordered-map>ordered map</a></dfn> 数据结构和与之关联的
             <dfn id=map-exists><a href=https://infra.spec.whatwg.org/#map-exists>exists</a></dfn>,
             <dfn id=map-get><a href=https://infra.spec.whatwg.org/#map-get>getting the value of an entry</a></dfn>，和
             <dfn id=map-set><a href=https://infra.spec.whatwg.org/#map-set>setting the value of an entry</a></dfn> 的定义<li><dfn id=list><a href=https://infra.spec.whatwg.org/#list>list</a></dfn> 数据结构和与之关联的
             <dfn id=list-append><a href=https://infra.spec.whatwg.org/#list-append>append</a></dfn>,
             <dfn id=list-remove><a href=https://infra.spec.whatwg.org/#list-remove>remove</a></dfn>,
             <dfn id=list-empty><a href=https://infra.spec.whatwg.org/#list-empty>empty</a></dfn>,
             <dfn id=list-contains><a href=https://infra.spec.whatwg.org/#list-contain>contains</a></dfn>,
             <dfn id=list-size><a href=https://infra.spec.whatwg.org/#list-size>size</a></dfn>,
             <dfn id=list-is-empty><a href=https://infra.spec.whatwg.org/#list-is-empty>is empty</a></dfn>，和
             <dfn id=list-iterate><a href=https://infra.spec.whatwg.org/#list-iterate>iterate</a></dfn> 的定义<li><dfn id=stack><a href=https://infra.spec.whatwg.org/#stack>stack</a></dfn> 数据结构和与之关联的
             <dfn id=stack-push><a href=https://infra.spec.whatwg.org/#stack-push>push</a></dfn>，和
             <dfn id=stack-pop><a href=https://infra.spec.whatwg.org/#stack-pop>pop</a></dfn> 的定义<li><dfn id=set><a href=https://infra.spec.whatwg.org/#ordered-set>ordered set</a></dfn> 数据结构和与之关联的
             <dfn id=set-append><a href=https://infra.spec.whatwg.org/#set-append>append</a></dfn> 的定义<li><dfn id=html-namespace-2><a href=https://infra.spec.whatwg.org/#html-namespace>HTML namespace</a></dfn><li><dfn id=mathml-namespace><a href=https://infra.spec.whatwg.org/#mathml-namespace>MathML namespace</a></dfn><li><dfn id=svg-namespace><a href=https://infra.spec.whatwg.org/#svg-namespace>SVG namespace</a></dfn><li><dfn id=xlink-namespace><a href=https://infra.spec.whatwg.org/#xlink-namespace>XLink namespace</a></dfn><li><dfn id=xml-namespace><a href=https://infra.spec.whatwg.org/#xml-namespace>XML namespace</a></dfn><li><dfn id=xmlns-namespace><a href=https://infra.spec.whatwg.org/#xmlns-namespace>XMLNS namespace</a></dfn></ul>

   <dt>Unicode 和编码<dd>

    <p>Unicode 字符集用于表示文本数据，WHATWG Encoding 标准定义了
    <a href=https://encoding.spec.whatwg.org/#encoding id=依赖:encoding data-x-internal=encoding>字符编码</a> 的相关要求。 <a href=references.html#refsUNICODE>[UNICODE]</a></p>

    <p class=note>本标准 <a href=#encoding-terminology>引入的术语</a> 基于上述标准中定义的术语。</p>

    <p>下列术语定义的使用遵循 WHATWG Encoding 标准：<a href=references.html#refsENCODING>[ENCODING]</a></p>

    <ul class=brief><li><dfn id=getting-an-encoding><a href=https://encoding.spec.whatwg.org/#concept-encoding-get>获取编码</a></dfn><li><dfn id=get-an-output-encoding><a href=https://encoding.spec.whatwg.org/#get-an-output-encoding>获取输出编码</a></dfn><li>接受字节流和一个编码并返回字符流的通用 <dfn id=decode><a href=https://encoding.spec.whatwg.org/#decode>解码</a></dfn> 算法<li><dfn id=utf-8-decode><a href=https://encoding.spec.whatwg.org/#utf-8-decode>UTF-8 解码</a></dfn>
     算法，接受字节流并返回字符流，同时切掉一个前导的 UTF-8 Byte Order Mark（BOM），如果有的话<li><dfn id=utf-8-decode-without-bom><a href=https://encoding.spec.whatwg.org/#utf-8-decode-without-bom>不带 BOM 的 UTF-8 解码</a></dfn>
     算法，除了不切掉前导的 UTF-8 Byte Order Mark （BOM）外等效于 <a href=https://encoding.spec.whatwg.org/#utf-8-decode id=依赖:utf-8-decode data-x-internal=utf-8-decode>UTF-8 解码</a><li><dfn id=utf-8-decode-without-bom-or-fail><a href=https://encoding.spec.whatwg.org/#utf-8-decode-without-bom-or-fail>不带 BOM 的 UTF-8 解码或失败</a></dfn> 算法，
     除了它在错误时返回失败之外，等同于 <a href=https://encoding.spec.whatwg.org/#utf-8-decode-without-bom id=依赖:utf-8-decode-without-bom data-x-internal=utf-8-decode-without-bom>不带 BOM 的 UTF-8 解码</a><li><dfn id=encode><a href=https://encoding.spec.whatwg.org/#encode>编码</a></dfn> 算法，
     接受字符流和编码并返回字节流<li><dfn id=utf-8-encode><a href=https://encoding.spec.whatwg.org/#utf-8-encode>UTF-8 编码</a></dfn> 算法，
     接受字符流并返回字节流</ul>

   <dt>XML 及其相关标准<dd>

    <p>支持 <a href=xhtml.html#the-xhtml-syntax id=依赖:the-xhtml-syntax>XML 语法</a> 的 HTML 实现必须支持一些 XML 版本，
    以及相应的命名空间标准，因为该语法使用带命名空间的 XML 序列化。 <a href=references.html#refsXML>[XML]</a> <a href=references.html#refsXMLNS>[XMLNS]</a></p>

    <p>数据挖掘工具等用户代理在执行内容的时候没有执行脚本、计算 CSS 或 XPath 表达式、
    或其他将结果 DOM 暴露给任意内容的情况。
    这些用户代理只断言它们的 DOM 节点的相似体在特定命名空间下就算“支持命名空间”，不需要真正地暴露命名空间字符串。</p>

    <p class=note>在 <a href=syntax.html#syntax id=依赖:syntax>HTML 语法</a> 中，命名空间前缀和命名空间声明的效果与 XML 不一样。
    例如，冒号在 HTML 元素名中没有特殊含义。</p>

    <hr>

    <p><a href=https://infra.spec.whatwg.org/#xml-namespace id=依赖:xml-namespace data-x-internal=xml-namespace>XML 命名空间</a> 中 <dfn id=attr-xml-space><code>xml:space</code></dfn> 标签名的属性
    由 XML 标准定义。 <a href=references.html#refsXML>[XML]</a></p>

    <p><dfn id=xml-name><a href=https://www.w3.org/TR/xml/#NT-Name>
    <code>名称</code></a></dfn> 生成式也定义在 XML 标准中。 <a href=references.html#refsXML>[XML]</a></p>

    <p>本标准也引用了
    <dfn id=xml-stylesheet><a href=https://www.w3.org/TR/xml-stylesheet/#the-xml-stylesheet-processing-instruction><code>&lt;?xml-stylesheet?></code></a></dfn>
    处理指令，它定义在 <cite>Associating Style Sheets with XML documents</cite> 标准中。 <a href=references.html#refsXMLSSPI>[XMLSSPI]</a></p>

    <p>本标准也非形式化地提到了 <dfn id=xsltprocessor><code>XSLTProcessor</code></dfn> 接口和它的 <dfn id=dom-xsltprocessor-transformtofragment><code>transformToFragment()</code></dfn> 和 <dfn id=dom-xsltprocessor-transformtodocument><code>transformToDocument()</code></dfn> 方法。 <a href=references.html#refsXSLTP>[XSLTP]</a></p>

   <dt>URL<dd>

    <p>下列术语定义在 WHATWG URL 标准中: <a href=references.html#refsURL>[URL]</a></p>

    <ul class=brief><li><dfn id=concept-host><a href=https://url.spec.whatwg.org/#concept-host>host</a></dfn><li><dfn id=concept-domain><a href=https://url.spec.whatwg.org/#concept-domain>域名</a></dfn><li><dfn id=ipv4-address><a href=https://url.spec.whatwg.org/#concept-ipv4>IPv4 地址</a></dfn><li><dfn id=ipv6-address><a href=https://url.spec.whatwg.org/#concept-ipv6>IPv6 地址</a></dfn><li><dfn id=url><a href=https://url.spec.whatwg.org/#concept-url>URL</a></dfn><li>URL 的 <dfn data-dfn-for=url id=concept-url-origin><a href=https://url.spec.whatwg.org/#concept-url-origin>Origin</a></dfn><li><dfn id=absolute-url><a href=https://url.spec.whatwg.org/#syntax-url-absolute>绝对 URL</a></dfn><li><dfn id=relative-url><a href=https://url.spec.whatwg.org/#syntax-url-relative>相对 URL</a></dfn><li>
      <dfn id=url-parser><a href=https://url.spec.whatwg.org/#concept-url-parser>URL 解析器</a></dfn> 和
      <dfn id=basic-url-parser><a href=https://url.spec.whatwg.org/#concept-basic-url-parser>basic URL 解析器</a></dfn>
      以及这些解析器状态：
      <ul class=brief><li><dfn id=scheme-start-state><a href=https://url.spec.whatwg.org/#scheme-start-state>scheme 开始状态</a></dfn><li><dfn id=host-state><a href=https://url.spec.whatwg.org/#host-state>host 状态</a></dfn><li><dfn id=hostname-state><a href=https://url.spec.whatwg.org/#hostname-state>hostname 状态</a></dfn><li><dfn id=port-state><a href=https://url.spec.whatwg.org/#port-state>port state</a></dfn><li><dfn id=path-start-state><a href=https://url.spec.whatwg.org/#path-start-state>path 开始状态</a></dfn><li><dfn id=query-state><a href=https://url.spec.whatwg.org/#query-state>query 状态</a></dfn><li><dfn id=fragment-state><a href=https://url.spec.whatwg.org/#fragment-state>fragment 状态</a></dfn></ul>
     <li>
      <dfn id=url-record><a href=https://url.spec.whatwg.org/#concept-url>URL 记录</a></dfn>，以及它的单个组件：
      <ul class=brief><li><dfn id=concept-url-scheme><a href=https://url.spec.whatwg.org/#concept-url-scheme>scheme</a></dfn><li><dfn id=concept-url-username><a href=https://url.spec.whatwg.org/#concept-url-username>用户名</a></dfn><li><dfn id=concept-url-password><a href=https://url.spec.whatwg.org/#concept-url-password>密码</a></dfn><li><dfn id=concept-url-host><a href=https://url.spec.whatwg.org/#concept-url-host>主机名</a></dfn><li><dfn id=concept-url-port><a href=https://url.spec.whatwg.org/#concept-url-port>端口</a></dfn><li><dfn id=concept-url-path><a href=https://url.spec.whatwg.org/#concept-url-path>路径</a></dfn><li><dfn id=concept-url-query><a href=https://url.spec.whatwg.org/#concept-url-query>query</a></dfn><li><dfn id=concept-url-fragment><a href=https://url.spec.whatwg.org/#concept-url-fragment>fragment</a></dfn><li><dfn id=cannot-be-a-base-url-flag><a href=https://url.spec.whatwg.org/#url-cannot-be-a-base-url-flag>不可作为 base URL 标志</a></dfn><li><dfn id=concept-url-object><a href=https://url.spec.whatwg.org/#concept-url-object>对象</a></dfn></ul>
     <li><dfn id=valid-url-string><a href=https://url.spec.whatwg.org/#valid-url-string>合法的 URL 字符串</a></dfn><li><dfn id=cannot-have-a-username/password/port><a href=https://url.spec.whatwg.org/#cannot-have-a-username-password-port>不可包含用户名/密码/端口</a></dfn> 概念<li><dfn id=concept-url-serializer><a href=https://url.spec.whatwg.org/#concept-url-serializer>URL 序列化器</a></dfn><li><dfn id=host-parser><a href=https://url.spec.whatwg.org/#concept-host-parser>主机名解析器</a></dfn><li><dfn id=host-serializer><a href=https://url.spec.whatwg.org/#concept-host-serializer>host 序列化器</a></dfn><li><dfn id=host-equals><a href=https://url.spec.whatwg.org/#concept-host-equals>主机名判等</a></dfn><li><dfn id=concept-url-equals><a href=https://url.spec.whatwg.org/#concept-url-equals>URL 判等</a></dfn><li><dfn id=serialize-an-integer><a href=https://url.spec.whatwg.org/#serialize-an-integer>整数序列化</a></dfn><li><dfn id=default-encode-set><a href=https://url.spec.whatwg.org/#default-encode-set>默认编码集</a></dfn><li><dfn id=utf-8-percent-encode><a href=https://url.spec.whatwg.org/#utf-8-percent-encode>UTF-8 百分号编码</a></dfn><li><dfn id=percent-decode><a href=https://url.spec.whatwg.org/#percent-decode>百分号解码</a></dfn><li><dfn id=set-the-username><a href=https://url.spec.whatwg.org/#set-the-username>设置用户名</a></dfn><li><dfn id=set-the-password><a href=https://url.spec.whatwg.org/#set-the-password>设置密码</a></dfn><li><dfn id=domain-to-unicode><a href=https://url.spec.whatwg.org/#concept-domain-to-unicode>域名转换为 Unicode</a></dfn> 算法<li><dfn id=application/x-www-form-urlencoded><a href=https://url.spec.whatwg.org/#concept-urlencoded><code>application/x-www-form-urlencoded</code></a></dfn> 格式<li><dfn id=application/x-www-form-urlencoded-serializer><a href=https://url.spec.whatwg.org/#concept-urlencoded-serializer><code>application/x-www-form-urlencoded</code> 序列化器</a></dfn></ul>

    <p>本标准也引用了这些 scheme 和协议：</p>

    <ul class=brief><li><dfn id=about-protocol><a href=https://tools.ietf.org/html/rfc6694#section-2><code>about:</code></a></dfn> scheme <a href=references.html#refsABOUT>[ABOUT]</a><li><dfn id=blob-protocol><a href=https://w3c.github.io/FileAPI/#DefinitionOfScheme><code>blob:</code></a></dfn> scheme <a href=references.html#refsFILEAPI>[FILEAPI]</a><li><dfn id=data-protocol><a href=https://tools.ietf.org/html/rfc2397#section-2><code>data:</code></a></dfn> scheme <a href=references.html#refsRFC2397>[RFC2397]</a><li><dfn id=http-protocol><a href=https://tools.ietf.org/html/rfc7230#section-2.7.1><code>http:</code></a></dfn> scheme <a href=references.html#refsHTTP>[HTTP]</a><li><dfn id=https-protocol><a href=https://tools.ietf.org/html/rfc7230#section-2.7.2><code>https:</code></a></dfn> scheme <a href=references.html#refsHTTP>[HTTP]</a><li><dfn id=mailto-protocol><a href=https://tools.ietf.org/html/rfc6068#section-2><code>mailto:</code></a></dfn> scheme <a href=references.html#refsMAILTO>[MAILTO]</a><li><dfn id=sms-protocol><a href=https://tools.ietf.org/html/rfc5724#section-2><code>sms:</code></a></dfn> scheme <a href=references.html#refsSMS>[SMS]</a><li><dfn id=urn-protocol><a href=https://tools.ietf.org/html/rfc2141#section-2><code>urn:</code></a></dfn> scheme <a href=references.html#refsURN>[URN]</a></ul>

    <p><dfn id=media-fragment-syntax><a href=https://www.w3.org/TR/media-frags/#media-fragment-syntax>Media 片段语法</a></dfn> 定义在
    <cite>Media Fragments URI</cite> 标准中。 <a href=references.html#refsMEDIAFRAG>[MEDIAFRAG]</a></p>
   <dt>HTTP 及其相关标准<dd>

    <p>下列术语定义在 HTTP 标准中：<a href=references.html#refsHTTP>[HTTP]</a></p>

    <ul class=brief><li>`<dfn id=http-accept><a href=https://tools.ietf.org/html/rfc7231#section-5.3.2><code>Accept</code></a></dfn>` 头部<li>`<dfn id=http-accept-language><a href=https://tools.ietf.org/html/rfc7231#section-5.3.5><code>Accept-Language</code></a></dfn>` 头部<li>`<dfn id=http-cache-control><a href=https://tools.ietf.org/html/rfc7234#section-5.2><code>Cache-Control</code></a></dfn>` 头部<li>`<dfn id=http-content-disposition><a href=https://tools.ietf.org/html/rfc6266><code>Content-Disposition</code></a></dfn>` 头部<li>`<dfn id=http-content-language><a href=https://tools.ietf.org/html/rfc7231#section-3.1.3.2><code>Content-Language</code></a></dfn>` 头部<li>`<dfn id=http-last-modified><a href=https://tools.ietf.org/html/rfc7232#section-2.2><code>Last-Modified</code></a></dfn>` 头部<li>`<dfn id=http-referer><a href=https://tools.ietf.org/html/rfc7231#section-5.5.2><code>Referer</code></a></dfn>` 头部</ul>

    <p>下列术语定义在 Cookie 标准中：<a href=references.html#refsCOOKIES>[COOKIES]</a></p>

    <ul class=brief><li><dfn id=cookie-string>cookie 字符串</dfn><li><dfn id=receives-a-set-cookie-string>接收设置 cookie 字符串</dfn><li>`<dfn id=http-cookie><code>Cookie</code></dfn>` 头部</ul>

    <p>下列术语定义在 Web Linking 标准中：<a href=references.html#refsWEBLINK>[WEBLINK]</a></p>

    <ul class=brief><li>`<dfn id=http-link><a href=https://tools.ietf.org/html/rfc5988#section-5><code>Link</code></a></dfn>` 头部</ul>

    <p>下列术语定义在 WHATWG MIME Sniffing 标准中：<a href=references.html#refsMIMESNIFF>[MIMESNIFF]</a></p>

    <ul class=brief><li><dfn id=mime-type><a href=https://mimesniff.spec.whatwg.org/#mime-type>MIME type</a></dfn><li><dfn id=valid-mime-type><a href=https://mimesniff.spec.whatwg.org/#valid-mime-type>合法的 MIME type</a></dfn><li><dfn id=valid-mime-type-with-no-parameters><a href=https://mimesniff.spec.whatwg.org/#valid-mime-type-with-no-parameters>无参数的合法 MIME type</a></dfn><li><dfn id=xml-mime-type><a href=https://mimesniff.spec.whatwg.org/#xml-mime-type>XML MIME type</a></dfn><li><dfn id=html-mime-type><a href=https://mimesniff.spec.whatwg.org/#html-mime-type>HTML MIME type</a></dfn></ul>

   <dt>Fetch<dd>

    <p>下列术语定义在 WHATWG Fetch 标准中：<a href=references.html#refsFETCH>[FETCH]</a></p>

    <ul class=brief><li><dfn id=about:blank><code>about:blank</code></dfn><li><dfn id=http(s)-scheme><a href=https://fetch.spec.whatwg.org/#http-scheme>HTTP(S) scheme</a></dfn><li><dfn id=network-scheme><a href=https://fetch.spec.whatwg.org/#network-scheme>网络 scheme</a></dfn><li><dfn id=fetch-scheme><a href=https://fetch.spec.whatwg.org/#fetch-scheme>fetch scheme</a></dfn><li><dfn id=https-state-value><a href=https://fetch.spec.whatwg.org/#concept-https-state-value>HTTPS 状态值</a></dfn><li><dfn id=cors-protocol><a href=https://fetch.spec.whatwg.org/#http-cors-protocol>CORS 协议</a></dfn><li><dfn id=default-user-agent-value><a href=https://fetch.spec.whatwg.org/#default-user-agent-value>
       默认 `<code>User-Agent</code>` 值</a></dfn><li><dfn id=extract-a-mime-type><a href=https://fetch.spec.whatwg.org/#concept-header-extract-mime-type>抽取 MIME type</a></dfn><li><dfn id=concept-fetch><a href=https://fetch.spec.whatwg.org/#concept-fetch>fetch</a></dfn><li><dfn id=http-redirect-fetch><a href=https://fetch.spec.whatwg.org/#concept-http-redirect-fetch>HTTP 重定向 fetch</a></dfn><li><dfn id=ok-status><a href=https://fetch.spec.whatwg.org/#ok-status>ok 状态</a></dfn><li><dfn id=navigation-request><a href=https://fetch.spec.whatwg.org/#navigation-request>导航请求</a></dfn><li><dfn id=network-error><a href=https://fetch.spec.whatwg.org/#concept-network-error>网络错误</a></dfn><li>`<dfn id=http-origin data-dfn-type=http-header><a href=https://fetch.spec.whatwg.org/#http-origin><code>Origin</code></a></dfn>` 头部<li><dfn id=process-response><a href=https://fetch.spec.whatwg.org/#process-response>处理响应</a></dfn><li><dfn id=concept-header-list-set><a href=https://fetch.spec.whatwg.org/#concept-header-list-set>设置头部</a></dfn><li><dfn id=concept-fetch-terminate><a href=https://fetch.spec.whatwg.org/#concept-fetch-terminate>终止 fetch</a></dfn><li><dfn id=requestcredentials><a href=https://fetch.spec.whatwg.org/#requestcredentials><code>RequestCredentials</code></a></dfn>枚举<li><dfn id=requestdestination><a href=https://fetch.spec.whatwg.org/#requestdestination><code>RequestDestination</code></a></dfn> 枚举<li>
      <dfn id=concept-response><a href=https://fetch.spec.whatwg.org/#concept-response>响应</a></dfn> 以及相关联的：
      <ul class=brief><li><dfn id=concept-response-type><a href=https://fetch.spec.whatwg.org/#concept-response-type>类型</a></dfn><li><dfn id=concept-response-url><a href=https://fetch.spec.whatwg.org/#concept-response-url>url</a></dfn><li><dfn id=concept-response-url-list><a href=https://fetch.spec.whatwg.org/#concept-response-url-list>url 列表</a></dfn><li><dfn id=concept-response-status><a href=https://fetch.spec.whatwg.org/#concept-response-status>状态</a></dfn><li><dfn id=concept-response-header-list><a href=https://fetch.spec.whatwg.org/#concept-response-header-list>头部列表</a></dfn><li><dfn id=concept-response-body><a href=https://fetch.spec.whatwg.org/#concept-response-body>响应体</a></dfn><li><dfn id=concept-internal-response><a href=https://fetch.spec.whatwg.org/#concept-internal-response>内部响应</a></dfn><li><dfn id=concept-response-csp-list><a href=https://fetch.spec.whatwg.org/#concept-response-csp-list>CSP 列表</a></dfn><li><dfn id=concept-response-https-state><a href=https://fetch.spec.whatwg.org/#concept-response-https-state>HTTPS 状态</a></dfn><li><dfn id=concept-response-location-url><a href=https://fetch.spec.whatwg.org/#concept-response-location-url>地址 URL</a></dfn></ul>
     <li>
      <dfn id=concept-request><a href=https://fetch.spec.whatwg.org/#concept-request>请求</a></dfn> 以及相关联的：
      <ul class=brief><li><dfn id=concept-request-url><a href=https://fetch.spec.whatwg.org/#concept-request-url>url</a></dfn><li><dfn id=concept-request-method><a href=https://fetch.spec.whatwg.org/#concept-request-method>方法</a></dfn><li><dfn id=concept-request-header-list><a href=https://fetch.spec.whatwg.org/#concept-request-header-list>头部列表</a></dfn><li><dfn id=concept-request-body><a href=https://fetch.spec.whatwg.org/#concept-request-body>请求体</a></dfn><li><dfn id=concept-request-client><a href=https://fetch.spec.whatwg.org/#concept-request-client>客户端</a></dfn><li><dfn id=concept-request-reserved-client><a href=https://fetch.spec.whatwg.org/#concept-request-reserved-client>保留客户端</a></dfn><li><dfn id=concept-request-target-client-id><a href=https://fetch.spec.whatwg.org/#concept-request-target-client-id>目标客户端 ID</a></dfn><li><dfn id=concept-request-initiator><a href=https://fetch.spec.whatwg.org/#concept-request-initiator>initiator</a></dfn><li><dfn id=concept-request-type><a href=https://fetch.spec.whatwg.org/#concept-request-type>类型</a></dfn><li><dfn id=concept-request-destination><a href=https://fetch.spec.whatwg.org/#concept-request-destination>目标地址</a></dfn><li><dfn id=concept-potential-destination><a href=https://fetch.spec.whatwg.org/#concept-potential-destination>
         潜在目标地址</a></dfn><li><dfn id=concept-potential-destination-translate><a href=https://fetch.spec.whatwg.org/#concept-potential-destination-translate>翻译</a></dfn>
         <a href=https://fetch.spec.whatwg.org/#concept-potential-destination id=依赖:concept-potential-destination data-x-internal=concept-potential-destination>潜在目标地址</a><li><dfn id=concept-request-priority><a href=https://fetch.spec.whatwg.org/#concept-request-priority>优先级</a></dfn><li><dfn data-dfn-for=request id=concept-request-origin><a href=https://fetch.spec.whatwg.org/#concept-request-origin>origin</a></dfn><li><dfn id=concept-request-referrer><a href=https://fetch.spec.whatwg.org/#concept-request-referrer>referrer</a></dfn><li><dfn id=synchronous-flag><a href=https://fetch.spec.whatwg.org/#synchronous-flag>同步标记</a></dfn><li><dfn id=concept-request-mode><a href=https://fetch.spec.whatwg.org/#concept-request-mode>模式</a></dfn><li><dfn id=concept-request-credentials-mode><a href=https://fetch.spec.whatwg.org/#concept-request-credentials-mode>credentials 模式</a></dfn><li><dfn id=use-url-credentials-flag><a href=https://fetch.spec.whatwg.org/#concept-request-use-url-credentials-flag>使用 URL credentials 标记</a></dfn><li><dfn id=unsafe-request-flag><a href=https://fetch.spec.whatwg.org/#unsafe-request-flag>不安全请求标记</a></dfn><li><dfn id=concept-request-cache-mode><a href=https://fetch.spec.whatwg.org/#concept-request-cache-mode>缓存模式</a></dfn><li><dfn id=concept-request-redirect-mode><a href=https://fetch.spec.whatwg.org/#concept-request-redirect-mode>重定向模式</a></dfn><li><dfn id=concept-request-referrer-policy><a href=https://fetch.spec.whatwg.org/#concept-request-referrer-policy>referrer 策略</a></dfn><li><dfn id=concept-request-nonce-metadata><a href=https://fetch.spec.whatwg.org/#concept-request-nonce-metadata>加密随机元数据</a></dfn><li><dfn id=concept-request-integrity-metadata><a href=https://fetch.spec.whatwg.org/#concept-request-integrity-metadata>完整性元数据</a></dfn><li><dfn id=concept-request-parser-metadata><a href=https://fetch.spec.whatwg.org/#concept-request-parser-metadata>解析器元数据</a></dfn></ul>
     </ul>

    <p>下列术语定义在 <cite>Referrer Policy</cite> 中：<a href=references.html#refsREFERRERPOLICY>[REFERRERPOLICY]</a></p>

    <ul class=brief><li><dfn id=referrer-policy><a href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy>referrer 策略</a></dfn><li>The `<dfn id=http-referrer-policy><a href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-header-dfn><code>Referrer-Policy</code></a></dfn>` HTTP 头部<li><dfn id=parse-referrer-policy-header><a href=https://w3c.github.io/webappsec-referrer-policy/#parse-referrer-policy-from-header>从 `<code>Referrer-Policy</code>` 头部解析 referrer 策略</a></dfn> 算法<li>The "<dfn id=referrer-policy-no-referrer><a href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-no-referrer><code>no-referrer</code></a></dfn>",
             "<dfn id=referrer-policy-no-referrer-when-downgrade><a href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-no-referrer-when-downgrade><code>no-referrer-when-downgrade</code></a></dfn>",
             "<dfn id=referrer-policy-origin-when-cross-origin><a href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-origin-when-cross-origin><code>no-referrer-when-downgrade</code></a></dfn>"，和
             "<dfn id=referrer-policy-unsafe-url><a href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-unsafe-url><code>unsafe-url</code></a></dfn>" referrer 策略</ul>

    <p>下列术语定义在 <cite>Mixed Content</cite>：<a href=references.html#refsMIX>[MIX]</a></p>

    <ul class=brief><li><dfn id=a-priori-authenticated-url><a href=https://w3c.github.io/webappsec-mixed-content/#a-priori-authenticated-url>
       <i>先验的</i> 已认证 URL</a></dfn></ul>

   <dt>Web IDL<dd>

    <p>本标准中的 IDL 片段必须按照符合规范的 IDL 片段的要求来解释，参考 Web IDL 标准中的定义。 <a href=references.html#refsWEBIDL>[WEBIDL]</a></p>

    <p>下列术语定义在 Web IDL 标准中：</p>

    <ul class=brief><li><dfn id=extended-attribute><a href=https://heycam.github.io/webidl/#dfn-extended-attribute>扩展属性</a></dfn><li><dfn id=named-constructor><a href=https://heycam.github.io/webidl/#dfn-named-constructor>命名构造器</a></dfn><li><dfn id=array-index-property-name><a href=https://heycam.github.io/webidl/#dfn-array-index-property-name>数组下标属性名</a></dfn><li><dfn id=supported-property-indices><a href=https://heycam.github.io/webidl/#dfn-supported-property-indices>支持的属性下标</a></dfn><li><dfn id=determine-the-value-of-an-indexed-property><a href=https://heycam.github.io/webidl/#dfn-determine-the-value-of-an-indexed-property>决定下标属性的值</a></dfn><li><dfn id=set-the-value-of-an-existing-indexed-property><a href=https://heycam.github.io/webidl/#dfn-set-the-value-of-an-existing-indexed-property>设置已存在的下标属性的值</a></dfn><li><dfn id=set-the-value-of-a-new-indexed-property><a href=https://heycam.github.io/webidl/#dfn-set-the-value-of-a-new-indexed-property>设置新的下标属性的值</a></dfn><li><dfn id=support-named-properties><a href=https://heycam.github.io/webidl/#dfn-support-named-properties>支持命名属性</a></dfn><li><dfn id=supported-property-names><a href=https://heycam.github.io/webidl/#dfn-supported-property-names>支持的属性名</a></dfn><li><dfn id=determine-the-value-of-a-named-property><a href=https://heycam.github.io/webidl/#dfn-determine-the-value-of-a-named-property>决定命名属性的值</a></dfn><li><dfn id=set-the-value-of-an-existing-named-property><a href=https://heycam.github.io/webidl/#dfn-set-the-value-of-an-existing-named-property>设置已存在命名属性的值</a></dfn><li><dfn id=set-the-value-of-a-new-named-property><a href=https://heycam.github.io/webidl/#dfn-set-the-value-of-a-new-named-property>设置新命名属性的值</a></dfn><li><dfn id=delete-an-existing-named-property><a href=https://heycam.github.io/webidl/#dfn-delete-an-existing-named-property>删除已存在的命名属性</a></dfn><li><dfn id=perform-a-security-check><a href=https://heycam.github.io/webidl/#dfn-perform-a-security-check>执行安全检查</a></dfn><li><dfn id=platform-object><a href=https://heycam.github.io/webidl/#dfn-platform-object>平台对象</a></dfn><li><dfn id=primary-interface><a href=https://heycam.github.io/webidl/#dfn-primary-interface>主接口</a></dfn><li><dfn id=interface-object><a href=https://heycam.github.io/webidl/#dfn-interface-object>借口对象</a></dfn><li><dfn id=interface-prototype-object><a href=https://heycam.github.io/webidl/#dfn-interface-prototype-object>接口原型对象</a></dfn><li>平台对象 <dfn id=global-environment-associated-with><a href=https://heycam.github.io/webidl/#es-platform-objects>关联的全局环境</a></dfn><li><dfn id=callback-context><a href=https://heycam.github.io/webidl/#dfn-callback-context>回调上下文</a></dfn><li><dfn id=frozen-array><a href=https://heycam.github.io/webidl/#dfn-frozen-array-type>冻结的数组</a></dfn> 和
         <dfn id=creating-a-frozen-array><a href=https://heycam.github.io/webidl/#dfn-create-frozen-array>创建冻结的数组</a></dfn><li><dfn id=dfn-callback-this-value><a href=https://heycam.github.io/webidl/#dfn-callback-this-value>回调 this 值</a></dfn><li>在 Web IDL 类型与 JS 类型之间的
       <dfn id=concept-idl-convert><a href=https://heycam.github.io/webidl/#es-type-mapping>转换</a></dfn><li><dfn id=es-invoking-callback-functions><a href=https://heycam.github.io/webidl/#invoke-a-callback-function>调用</a></dfn> 和
         <dfn id=es-constructing-callback-functions><a href=https://heycam.github.io/webidl/#construct-a-callback-function>构造</a></dfn> 回调函数<li><dfn id=converting-to-a-sequence-of-unicode-scalar-values><a href=https://heycam.github.io/webidl/#dfn-obtain-unicode>转换为 Unicode 标量序列</a></dfn></ul>

    <p>Web IDL 标准也定义了本标准的 Web IDL 片段中用到的下列类型：</p>

    <ul class=brief><li><dfn id=idl-arraybuffer><a href=https://heycam.github.io/webidl/#idl-ArrayBuffer><code>ArrayBuffer</code></a></dfn><li><dfn id=idl-arraybufferview><a href=https://heycam.github.io/webidl/#common-ArrayBufferView><code>ArrayBufferView</code></a></dfn><li><dfn id=idl-boolean><a href=https://heycam.github.io/webidl/#idl-boolean><code>boolean</code></a></dfn><li><dfn id=idl-domstring><a href=https://heycam.github.io/webidl/#idl-DOMString><code>DOMString</code></a></dfn><li><dfn id=idl-double><a href=https://heycam.github.io/webidl/#idl-double><code>double</code></a></dfn><li><dfn id=idl-enumeration><a href=https://heycam.github.io/webidl/#idl-enums>enumeration</a></dfn><li><dfn id=idl-error><a href=https://heycam.github.io/webidl/#idl-Error><code>Error</code></a></dfn><li><dfn id=idl-function><a href=https://heycam.github.io/webidl/#common-Function><code>Function</code></a></dfn><li><dfn id=idl-long><a href=https://heycam.github.io/webidl/#idl-long><code>long</code></a></dfn><li><dfn id=idl-object><a href=https://heycam.github.io/webidl/#idl-object><code>object</code></a></dfn><li><dfn id=idl-regexp><a href=https://heycam.github.io/webidl/#idl-RegExp><code>RegExp</code></a></dfn><li><dfn id=idl-uint8clampedarray><a href=https://heycam.github.io/webidl/#idl-Uint8ClampedArray><code>Uint8ClampedArray</code></a></dfn><li><dfn id=idl-unrestricted-double><a href=https://heycam.github.io/webidl/#idl-unrestricted-double><code>unrestricted double</code></a></dfn><li><dfn id=idl-unsigned-long><a href=https://heycam.github.io/webidl/#idl-unsigned-long><code>unsigned long</code></a></dfn><li><dfn id=idl-usvstring><a href=https://heycam.github.io/webidl/#idl-USVString><code>USVString</code></a></dfn></ul>

    <p>本标准中术语 <dfn id=throw><a href=https://heycam.github.io/webidl/#dfn-throw>throw</a></dfn> 的使用遵循 Web IDL 标准的定义。
    本标准用到的
    <dfn id=domexception><a href=https://heycam.github.io/webidl/#dfn-DOMException><code>DOMException</code></a></dfn>
    类型以及下列异常名定义在 Web IDL 中：</p>

    <ul class=brief><li><dfn id=indexsizeerror><a href=https://heycam.github.io/webidl/#indexsizeerror>"<code>IndexSizeError</code>"</a></dfn><li><dfn id=hierarchyrequesterror><a href=https://heycam.github.io/webidl/#hierarchyrequesterror>"<code>HierarchyRequestError</code>"</a></dfn><li><dfn id=invalidcharactererror><a href=https://heycam.github.io/webidl/#invalidcharactererror>"<code>InvalidCharacterError</code>"</a></dfn><li><dfn id=notfounderror><a href=https://heycam.github.io/webidl/#notfounderror>"<code>NotFoundError</code>"</a></dfn><li><dfn id=notsupportederror><a href=https://heycam.github.io/webidl/#notsupportederror>"<code>NotSupportedError</code>"</a></dfn><li><dfn id=invalidstateerror><a href=https://heycam.github.io/webidl/#invalidstateerror>"<code>InvalidStateError</code>"</a></dfn><li><dfn id=syntaxerror><a href=https://heycam.github.io/webidl/#syntaxerror>"<code>SyntaxError</code>"</a></dfn><li><dfn id=invalidaccesserror><a href=https://heycam.github.io/webidl/#invalidaccesserror>"<code>InvalidAccessError</code>"</a></dfn><li><dfn id=securityerror><a href=https://heycam.github.io/webidl/#securityerror>"<code>SecurityError</code>"</a></dfn><li><dfn id=networkerror><a href=https://heycam.github.io/webidl/#networkerror>"<code>NetworkError</code>"</a></dfn><li><dfn id=aborterror><a href=https://heycam.github.io/webidl/#aborterror>"<code>AbortError</code>"</a></dfn><li><dfn id=quotaexceedederror><a href=https://heycam.github.io/webidl/#quotaexceedederror>"<code>QuotaExceededError</code>"</a></dfn><li><dfn id=datacloneerror><a href=https://heycam.github.io/webidl/#datacloneerror>"<code>DataCloneError</code>"</a></dfn><li><dfn id=encodingerror><a href=https://heycam.github.io/webidl/#encodingerror>"<code>EncodingError</code>"</a></dfn><li><dfn id=notallowederror><a href=https://heycam.github.io/webidl/#notallowederror>"<code>NotAllowedError</code>"</a></dfn></ul>

    <p>当本标准要求用户代理 <dfn id=create-a-date-object>创建一个 <code>Date</code> 对象</dfn>
    来表示特定的时间（可能是 Not-a-Number 特殊值）时，该时间的毫秒部分（如果有的话）必须截断到一个整数，
    并且新创建的 <code id=依赖:date><a data-x-internal=date href=https://tc39.github.io/ecma262/#sec-date-objects>Date</a></code> 对象的时间值必须表示截断后的结果时间。</p>

    <p class=example>例如，给定2000年1月1日01:00 UTC 后 23045 微秒的时间，即 2000-01-01T00:00:00.023045Z，
    那么表示这一时间的 <code id=依赖:date-2><a data-x-internal=date href=https://tc39.github.io/ecma262/#sec-date-objects>Date</a></code> 对象与表示 2000-01-01T00:00:00.023Z（早 45 微秒）的对象表示同样的时间。
    如果给定的时间是 NaN，那么结果 <code id=依赖:date-3><a data-x-internal=date href=https://tc39.github.io/ecma262/#sec-date-objects>Date</a></code> 对象表示的时间值就是 NaN（表示该对象不代表具体的时刻）。</p>

   <dt>JavaScript<dd>

    <p>本标准描述的语言中有些部分只支持 JavaScript 作为底层脚本语言。 <a href=references.html#refsJAVASCRIPT>[JAVASCRIPT]</a></p>

    <p>支持 JavaScript 的用户代理必须也实现 <cite>ECMAScript Internationalization API Specification</cite>。 <a href=references.html#refsJSINTL>[JSINTL]</a></p>

    <p class=note>用术语 "JavaScript" 而不是官方的 ECMAScript 来指代 ECMA-262，因为 JavaScript 更广为人知。类似地，
    用于指代本标准中的 JavaScript 的 <a id=依赖:mime-type href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIME type</a> 是 <code>text/javascript</code>，也是因为它是最广泛使用的 type，<a href=introduction.html#willful-violation id=依赖:willful-violation>即使这一类型已经被官方废弃</a>，根据 RFC 4329。 <a href=references.html#refsRFC4329>[RFC4329]</a></p>

    <p>本标准中用到的下列术语定义在 JavaScript 标准中：</p>

    <ul class=brief><li><dfn id=active-function-object><a href=https://tc39.github.io/ecma262/#active-function-object>active 函数对象</a></dfn><li><dfn id=agent><a href=https://tc39.github.io/ecma262/#sec-agents>agent</a></dfn> 和
         <dfn id=agent-cluster><a href=https://tc39.github.io/ecma262/#sec-agent-clusters>agent 集群</a></dfn><li><dfn id=automatic-semicolon-insertion><a href=https://tc39.github.io/ecma262/#sec-automatic-semicolon-insertion>自动分号插入</a></dfn><li><dfn id=current-realm-record><a href=https://tc39.github.io/ecma262/#current-realm>当前 Realm Record</a></dfn><li><dfn id=early-error><a href=https://tc39.github.io/ecma262/#early-error-rule>early error</a></dfn><li><dfn id=directive-prologue><a href=https://tc39.github.io/ecma262/#directive-prologue>Directive Prologue</a></dfn><li><dfn id=invariants-of-the-essential-internal-methods><a href=https://tc39.github.io/ecma262/#sec-invariants-of-the-essential-internal-methods>基本内部方法的不变量</a></dfn><li><dfn id=javascript-execution-context><a href=https://tc39.github.io/ecma262/#sec-execution-contexts>JavaScript 执行上下文</a></dfn><li><dfn id=javascript-execution-context-stack><a href=https://tc39.github.io/ecma262/#execution-context-stack>JavaScript 执行上下文栈</a></dfn><li><dfn id=javascript-realm><a href=https://tc39.github.io/ecma262/#sec-code-realms>JavaScript realm</a></dfn><li><dfn id=running-javascript-execution-context><a href=https://tc39.github.io/ecma262/#running-execution-context>运行 JavaScript 执行上下文</a></dfn><li><dfn id=use-strict-directive><a href=https://tc39.github.io/ecma262/#use-strict-directive>使用 Strict 指令</a></dfn><li><dfn id=well-known-symbols><a href=https://tc39.github.io/ecma262/#sec-well-known-symbols>著名符号</a></dfn>，包括
         <dfn id=@@hasinstance>@@hasInstance</dfn>,
         <dfn id=@@isconcatspreadable>@@isConcatSpreadable</dfn>,
         <dfn id=@@toprimitive>@@toPrimitive</dfn>，和
         <dfn id=@@tostringtag>@@toStringTag</dfn><li><dfn id=well-known-intrinsic-objects><a href=https://tc39.github.io/ecma262/#sec-well-known-intrinsic-objects>著名的固有对象</a></dfn>，包括
         <dfn id=%arraybuffer%><a href=https://tc39.github.io/ecma262/#sec-arraybuffer-constructor>%ArrayBuffer%</a></dfn>,
         <dfn id=%arrayprototype%><a href=https://tc39.github.io/ecma262/#sec-properties-of-the-array-prototype-object>%ArrayPrototype%</a></dfn>，和
         <dfn id=%objproto_valueof%><a href=https://tc39.github.io/ecma262/#sec-object.prototype.valueof>%ObjProto_valueOf%</a></dfn><li><dfn id=js-prod-functionbody><a href=https://tc39.github.io/ecma262/#prod-FunctionBody><i>FunctionBody</i></a></dfn> 生成式<li><dfn id=js-prod-module><a href=https://tc39.github.io/ecma262/#prod-Module><i>Module</i></a></dfn> 生成式<li><dfn id=js-prod-pattern><a href=https://tc39.github.io/ecma262/#prod-Pattern><i>Pattern</i></a></dfn> 生成式<li><dfn id=js-prod-script><a href=https://tc39.github.io/ecma262/#prod-Script><i>Script</i></a></dfn> 生成式<li><dfn id=js-type><a href=https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values>Type</a></dfn> 标记<li><dfn id=js-list><a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type>List</a></dfn> 和
             <dfn id=record><a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type>Record</a></dfn> 说明类型<li><dfn id=propertydescriptor><a href=https://tc39.github.io/ecma262/#sec-property-descriptor-specification-type>Property Descriptor</a></dfn> 说明类型<li><dfn id=source-text-module-record><a href=https://tc39.github.io/ecma262/#sec-source-text-module-records>Source Text Module Record</a></dfn> 说明类型及其
             <dfn id=js-moduleevaluation><a href=https://tc39.github.io/ecma262/#sec-moduleevaluation>ModuleEvaluation</a></dfn> 和
             <dfn id=js-moduledeclarationinstantiation><a href=https://tc39.github.io/ecma262/#sec-moduledeclarationinstantiation>ModuleDeclarationInstantiation</a></dfn> 方法<li><dfn id=arraycreate><a href=https://tc39.github.io/ecma262/#sec-arraycreate>ArrayCreate</a></dfn> 抽象操作<li><dfn id=call><a href=https://tc39.github.io/ecma262/#sec-call>Call</a></dfn> 抽象操作<li><dfn id=construct><a href=https://tc39.github.io/ecma262/#sec-construct>Construct</a></dfn> 抽象操作<li><dfn id=copydatablockbytes><a href=https://tc39.github.io/ecma262/#sec-copydatablockbytes>CopyDataBlockBytes</a></dfn> 抽象操作<li><dfn id=createbytedatablock><a href=https://tc39.github.io/ecma262/#sec-createbytedatablock>CreateByteDataBlock</a></dfn> 抽象操作<li><dfn id=createdataproperty><a href=https://tc39.github.io/ecma262/#sec-createdataproperty>CreateDataProperty</a></dfn> 抽象操作<li><dfn id=detacharraybuffer><a href=https://tc39.github.io/ecma262/#sec-detacharraybuffer>DetachArrayBuffer</a></dfn> 抽象操作<li><dfn id=js-enqueuejob><a href=https://tc39.github.io/ecma262/#sec-enqueuejob>EnqueueJob</a></dfn> 抽象操作<li><dfn id=enumerableownproperties><a href=https://tc39.github.io/ecma262/#sec-enumerableownproperties>EnumerableOwnProperties</a></dfn> 抽象操作<li><dfn id=js-functioncreate><a href=https://tc39.github.io/ecma262/#sec-functioncreate>FunctionCreate</a></dfn> 抽象操作<li><dfn id=js-get><a href=https://tc39.github.io/ecma262/#sec-get-o-p>Get</a></dfn> 抽象操作<li><dfn id=getfunctionrealm><a href=https://tc39.github.io/ecma262/#sec-getfunctionrealm>GetFunctionRealm</a></dfn> 抽象操作<li><dfn id=hasownproperty><a href=https://tc39.github.io/ecma262/#sec-hasownproperty>HasOwnProperty</a></dfn> 抽象操作<li><dfn id=js-hostensurecancompilestrings><a href=https://tc39.github.io/ecma262/#sec-hostensurecancompilestrings>HostEnsureCanCompileStrings</a></dfn> 抽象操作<li><dfn id=js-hostpromiserejectiontracker><a href=https://tc39.github.io/ecma262/#sec-host-promise-rejection-tracker>HostPromiseRejectionTracker</a></dfn> 抽象操作<li><dfn id=js-hostresolveimportedmodule><a href=https://tc39.github.io/ecma262/#sec-hostresolveimportedmodule>HostResolveImportedModule</a></dfn> 抽象操作<li><dfn id=js-initializehostdefinedrealm><a href=https://tc39.github.io/ecma262/#sec-initializehostdefinedrealm>InitializeHostDefinedRealm</a></dfn> 抽象操作<li><dfn id=isaccessordescriptor><a href=https://tc39.github.io/ecma262/#sec-isaccessordescriptor>IsAccessorDescriptor</a></dfn> 抽象操作<li><dfn id=iscallable><a href=https://tc39.github.io/ecma262/#sec-iscallable>IsCallable</a></dfn> 抽象操作<li><dfn id=isconstructor><a href=https://tc39.github.io/ecma262/#sec-isconstructor>IsConstructor</a></dfn> 抽象操作<li><dfn id=isdatadescriptor><a href=https://tc39.github.io/ecma262/#sec-isdatadescriptor>IsDataDescriptor</a></dfn> 抽象操作<li><dfn id=isdetachedbuffer><a href=https://tc39.github.io/ecma262/#sec-isdetachedbuffer>IsDetachedBuffer</a></dfn> 抽象操作<li><dfn id=issharedarraybuffer><a href=https://tc39.github.io/ecma262/#sec-issharedarraybuffer>IsSharedArrayBuffer</a></dfn> 抽象操作<li><dfn id=js-newobjectenvironment><a href=https://tc39.github.io/ecma262/#sec-newobjectenvironment>NewObjectEnvironment</a></dfn> 抽象操作<li><dfn id=ordinarygetprototypeof><a href=https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof>OrdinaryGetPrototypeOf</a></dfn> 抽象操作<li><dfn id=ordinarysetprototypeof><a href=https://tc39.github.io/ecma262/#sec-ordinarysetprototypeof>OrdinarySetPrototypeOf</a></dfn> 抽象操作<li><dfn id=ordinaryisextensible><a href=https://tc39.github.io/ecma262/#sec-ordinaryisextensible>OrdinaryIsExtensible</a></dfn> 抽象操作<li><dfn id=ordinarypreventextensions><a href=https://tc39.github.io/ecma262/#sec-ordinarypreventextensions>OrdinaryPreventExtensions</a></dfn> 抽象操作<li><dfn id=ordinarygetownproperty><a href=https://tc39.github.io/ecma262/#sec-ordinarygetownproperty>OrdinaryGetOwnProperty</a></dfn> 抽象操作<li><dfn id=ordinarydefineownproperty><a href=https://tc39.github.io/ecma262/#sec-ordinarydefineownproperty>OrdinaryDefineOwnProperty</a></dfn> 抽象操作<li><dfn id=ordinaryget><a href=https://tc39.github.io/ecma262/#sec-ordinaryget>OrdinaryGet</a></dfn> 抽象操作<li><dfn id=ordinaryset><a href=https://tc39.github.io/ecma262/#sec-ordinaryset>OrdinarySet</a></dfn> 抽象操作<li><dfn id=ordinarydelete><a href=https://tc39.github.io/ecma262/#sec-ordinarydelete>OrdinaryDelete</a></dfn> 抽象操作<li><dfn id=ordinaryownpropertykeys><a href=https://tc39.github.io/ecma262/#sec-ordinaryownpropertykeys>OrdinaryOwnPropertyKeys</a></dfn> 抽象操作<li><dfn id=js-parsemodule><a href=https://tc39.github.io/ecma262/#sec-parsemodule>ParseModule</a></dfn> 抽象操作<li><dfn id=js-parsescript><a href=https://tc39.github.io/ecma262/#sec-parse-script>ParseScript</a></dfn> 抽象操作<li><dfn id=runjobs><a href=https://tc39.github.io/ecma262/#sec-runjobs>RunJobs</a></dfn> 抽象操作<li><dfn id=samevalue><a href=https://tc39.github.io/ecma262/#sec-samevalue>SameValue</a></dfn> 抽象操作<li><dfn id=js-scriptevaluation><a href=https://tc39.github.io/ecma262/#sec-runtime-semantics-scriptevaluation>ScriptEvaluation</a></dfn> 抽象操作<li><dfn id=setimmutableprototype><a href=https://tc39.github.io/ecma262/#sec-set-immutable-prototype>SetImmutablePrototype</a></dfn> 抽象操作<li><dfn id=js-toboolean><a href=https://tc39.github.io/ecma262/#sec-toboolean>ToBoolean</a></dfn> 抽象操作<li><dfn id=tostring><a href=https://tc39.github.io/ecma262/#sec-tostring>ToString</a></dfn> 抽象操作<li><dfn id=touint32><a href=https://tc39.github.io/ecma262/#sec-touint32>ToUint32</a></dfn> 抽象操作<li><dfn id=typedarraycreate><a href=https://tc39.github.io/ecma262/#typedarray-create>TypedArrayCreate</a></dfn> 抽象操作<li><dfn id=js-abstract-equality><a href=https://tc39.github.io/ecma262/#sec-abstract-equality-comparison>Abstract Equality Comparison</a></dfn> 算法<li><dfn id=js-strict-equality><a href=https://tc39.github.io/ecma262/#sec-strict-equality-comparison>Strict Equality Comparison</a></dfn> 算法<li><dfn id=date><a href=https://tc39.github.io/ecma262/#sec-date-objects><code>Date</code></a></dfn> 类<li><dfn id=sharedarraybuffer><a href=https://tc39.github.io/ecma262/#sec-sharedarraybuffer-objects><code>SharedArrayBuffer</code></a></dfn> 类<li><dfn id=typeerror><a href=https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror><code>TypeError</code></a></dfn> 类<li><dfn id=js-rangeerror><a href=https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-rangeerror><code>RangeError</code></a></dfn> 类<li><dfn id=js-typeof><a href=https://tc39.github.io/ecma262/#sec-typeof-operator><code>typeof</code></a></dfn> 操作<li><dfn id=typedarray-constructors><a href=https://tc39.github.io/ecma262/#table-49><var>TypedArray</var> Constructors</a></dfn> 表格</ul>

   <dt>DOM<dd>

    <p>Document Object Model （DOM）是文档及其内容的 — 模型 —。
    DOM 不仅是 API；本标准中 HTML 实现的符合性规则是按照 DOM 上的操作来定义的。 <a href=references.html#refsDOM>[DOM]</a></p>

    <p>实现必须支持 DOM UI Events 中定义的事件，因为本标准是按照 DOM 来定义的 ，并且
    有些特性被定义为 DOM 接口的扩展。<a href=references.html#refsDOM>[DOM]</a> <a href=references.html#refsUIEVENTS>[UIEVENTS]</a></p>

    <p>特别是定义在 WHATWG DOM 中的下列特性：<a href=references.html#refsDOM>[DOM]</a></p>

    <ul class=brief><li><dfn id=attr><a href=https://dom.spec.whatwg.org/#interface-attr><code>Attr</code></a></dfn> 接口<li><dfn id=comment-2><a href=https://dom.spec.whatwg.org/#interface-comment><code>Comment</code></a></dfn> 接口<li><dfn id=domimplementation><a href=https://dom.spec.whatwg.org/#interface-domimplementation><code>DOMImplementation</code></a></dfn> 接口<li><dfn id=dom-document><a href=https://dom.spec.whatwg.org/#interface-document><code>Document</code></a></dfn> 接口<li><dfn id=documentfragment><a href=https://dom.spec.whatwg.org/#interface-documentfragment><code>DocumentFragment</code></a></dfn> 接口<li><dfn id=documenttype><a href=https://dom.spec.whatwg.org/#interface-documenttype><code>DocumentType</code></a></dfn> 接口<li><dfn id=childnode><a href=https://dom.spec.whatwg.org/#interface-childnode><code>ChildNode</code></a></dfn> 接口<li><dfn id=element><a href=https://dom.spec.whatwg.org/#interface-element><code>Element</code></a></dfn> 接口<li><dfn id=node><a href=https://dom.spec.whatwg.org/#interface-node><code>Node</code></a></dfn> 接口<li><dfn id=nodelist><a href=https://dom.spec.whatwg.org/#interface-nodelist><code>NodeList</code></a></dfn> 接口<li><dfn id=processinginstruction><a href=https://dom.spec.whatwg.org/#interface-processinginstruction><code>ProcessingInstruction</code></a></dfn> 接口<li><dfn id=shadowroot><a href=https://dom.spec.whatwg.org/#interface-shadowroot><code>ShadowRoot</code></a></dfn> 接口<li><dfn id=text><a href=https://dom.spec.whatwg.org/#interface-text><code>Text</code></a></dfn> 接口<li><dfn id=node-document><a href=https://dom.spec.whatwg.org/#concept-node-document>节点文档</a></dfn> 概念<li><dfn id=concept-documentfragment-host><a href=https://dom.spec.whatwg.org/#concept-documentfragment-host>host</a></dfn> 概念<li><dfn id=shadow-root><a href=https://dom.spec.whatwg.org/#concept-shadow-root>shadow root</a></dfn> 概念<li><dfn id=htmlcollection><a href=https://dom.spec.whatwg.org/#interface-htmlcollection><code>HTMLCollection</code></a></dfn> 接口<li><dfn id=dom-htmlcollection-length><a href=https://dom.spec.whatwg.org/#dom-htmlcollection-length><code>HTMLCollection.length</code></a></dfn> 属性<li><dfn id=dom-htmlcollection-item><a href=https://dom.spec.whatwg.org/#dom-htmlcollection-item><code>HTMLCollection.item()</code></a></dfn> 方法<li><dfn id=dom-htmlcollection-nameditem><a href=https://dom.spec.whatwg.org/#dom-htmlcollection-nameditem><code>HTMLCollection.namedItem()</code></a></dfn> 方法<li>术语 <dfn id=concept-collection><a href=https://dom.spec.whatwg.org/#concept-collection>collection</a></dfn> 和
       <dfn id=represented-by-the-collection><a href=https://dom.spec.whatwg.org/#represented-by-the-collection>由 collection 表示</a></dfn><li><dfn id=domtokenlist><a href=https://dom.spec.whatwg.org/#interface-domtokenlist><code>DOMTokenList</code></a></dfn> 接口<li><dfn id=dom-domtokenlist-value><a href=https://dom.spec.whatwg.org/#dom-domtokenlist-value><code>DOMTokenList.value</code></a></dfn> 属性<li><dfn id=dom-domimplementation-createdocument><a href=https://dom.spec.whatwg.org/#dom-domimplementation-createdocument><code>createDocument()</code></a></dfn> 方法<li><dfn id=dom-domimplementation-createhtmldocument><a href=https://dom.spec.whatwg.org/#dom-domimplementation-createhtmldocument><code>createHTMLDocument()</code></a></dfn> 方法<li><dfn id=dom-document-createelement><a href=https://dom.spec.whatwg.org/#dom-document-createelement><code>createElement()</code></a></dfn> 方法<li><dfn id=dom-document-createelementns><a href=https://dom.spec.whatwg.org/#dom-document-createelementns><code>createElementNS()</code></a></dfn> 方法<li><dfn id=dom-document-getelementbyid><a href=https://dom.spec.whatwg.org/#dom-nonelementparentnode-getelementbyid><code>getElementById()</code></a></dfn> 方法<li><dfn id=dom-document-getelementsbyclassname><a href=https://dom.spec.whatwg.org/#dom-document-getelementsbyclassname><code>getElementsByClassName()</code></a></dfn> 方法<li><dfn id=dom-node-appendchild><a href=https://dom.spec.whatwg.org/#dom-node-appendchild><code>appendChild()</code></a></dfn> 方法<li><dfn id=dom-node-clonenode><a href=https://dom.spec.whatwg.org/#dom-node-clonenode><code>cloneNode()</code></a></dfn> 方法<li><dfn id=dom-document-importnode><a href=https://dom.spec.whatwg.org/#dom-document-importnode><code>importNode()</code></a></dfn> 方法<li><dfn id=dom-event-preventdefault><a href=https://dom.spec.whatwg.org/#dom-event-preventdefault><code>preventDefault()</code></a></dfn> 方法<li><dfn id=dom-element-id><a href=https://dom.spec.whatwg.org/#dom-element-id><code>id</code></a></dfn> 属性<li><dfn id=textcontent><a href=https://dom.spec.whatwg.org/#dom-node-textcontent><code>textContent</code></a></dfn> 属性<li><dfn id=tree><a href=https://dom.spec.whatwg.org/#concept-tree>树</a></dfn> 和
       <dfn id=shadow-tree><a href=https://dom.spec.whatwg.org/#concept-shadow-tree>shadow 树</a></dfn> 的概念<li><dfn id=tree-order><a href=https://dom.spec.whatwg.org/#concept-tree-order>树序</a></dfn> 和
       <dfn id=shadow-including-tree-order><a href=https://dom.spec.whatwg.org/#concept-shadow-including-tree-order>包含 shadow 的树序</a></dfn> 的概念<li><dfn id=concept-tree-child><a href=https://dom.spec.whatwg.org/#concept-tree-child>子节点</a></dfn> 概念<li><dfn id=root><a href=https://dom.spec.whatwg.org/#concept-tree-root>root</a></dfn> 和
       <dfn id=shadow-including-root><a href=https://dom.spec.whatwg.org/#concept-shadow-including-root>包含 shadow 的 root</a></dfn> 的概念<li><dfn id=inclusive-ancestor><a href=https://dom.spec.whatwg.org/#concept-tree-inclusive-ancestor>包含的祖先</a></dfn> 和
       <dfn id=shadow-including-descendant><a href=https://dom.spec.whatwg.org/#concept-shadow-including-descendant>包含 shadow 的后代</a></dfn> 的概念<li><dfn id=first-child><a href=https://dom.spec.whatwg.org/#concept-tree-first-child>第一个子节点</a></dfn> 和
       <dfn id=next-sibling><a href=https://dom.spec.whatwg.org/#concept-tree-next-sibling>下一个兄弟节点</a></dfn> 的概念<li><dfn id=document-element><a href=https://dom.spec.whatwg.org/#document-element>文档元素</a></dfn> 的概念<li><dfn id=in-a-document-tree><a href=https://dom.spec.whatwg.org/#in-a-document-tree>在文档树中</a></dfn>，
       <dfn id=in-a-document><a href=https://dom.spec.whatwg.org/#in-a-document>在文档中</a></dfn> （遗留的），和
       <dfn id=connected><a href=https://dom.spec.whatwg.org/#connected>已连接的</a></dfn> 的概念<li><dfn id=concept-slot><a href=https://dom.spec.whatwg.org/#concept-slot>槽</a></dfn> 的概念，及其
       <dfn id=slot-name><a href=https://dom.spec.whatwg.org/#slot-name>名称</a></dfn> 和
       <dfn id=assigned-nodes><a href=https://dom.spec.whatwg.org/#slot-assigned-nodes>指定的节点</a></dfn><li><dfn id=finding-flattened-slotables><a href=https://dom.spec.whatwg.org/#find-flattened-slotables>寻找扁平化后的插槽</a></dfn> 算法<li><dfn id=assign-a-slot><a href=https://dom.spec.whatwg.org/#assign-a-slot>指定插槽</a></dfn> 算法<li>节点的 <dfn id=pre-insert><a href=https://dom.spec.whatwg.org/#concept-node-pre-insert>预插入</a></dfn>，
       <dfn id=concept-node-insert><a href=https://dom.spec.whatwg.org/#concept-node-insert>插入</a></dfn>，
       <dfn id=concept-node-append><a href=https://dom.spec.whatwg.org/#concept-node-append>追加</a></dfn>，
       <dfn id=concept-node-replace><a href=https://dom.spec.whatwg.org/#concept-node-replace>替换</a></dfn>，
       <dfn id=concept-node-replace-all><a href=https://dom.spec.whatwg.org/#concept-node-replace-all>全部替换</a></dfn>，
       <dfn id=concept-node-remove><a href=https://dom.spec.whatwg.org/#concept-node-remove>移除</a></dfn>，和
       <dfn id=concept-node-adopt><a href=https://dom.spec.whatwg.org/#concept-node-adopt>接受</a></dfn> 算法<li>属性的 <dfn id=concept-element-attributes-change><a href=https://dom.spec.whatwg.org/#concept-element-attributes-change>改变</a></dfn>，
       <dfn id=concept-element-attributes-append><a href=https://dom.spec.whatwg.org/#concept-element-attributes-append>追加</a></dfn>，
       <dfn id=concept-element-attributes-remove><a href=https://dom.spec.whatwg.org/#concept-element-attributes-remove>移除</a></dfn>，
       <dfn id=concept-element-attributes-replace><a href=https://dom.spec.whatwg.org/#concept-element-attributes-replace>替换</a></dfn>，和
       <dfn id=concept-element-attributes-set-value><a href=https://dom.spec.whatwg.org/#concept-element-attributes-set-value>设置值</a></dfn> 算法<li><dfn id=concept-node-insert-ext><a href=https://dom.spec.whatwg.org/#concept-node-insert-ext>插入步骤</a></dfn>,
             <dfn id=concept-node-remove-ext><a href=https://dom.spec.whatwg.org/#concept-node-remove-ext>移除步骤</a></dfn>，和
             <dfn id=concept-node-adopt-ext><a href=https://dom.spec.whatwg.org/#concept-node-adopt-ext>接受步骤</a></dfn> 的钩子<li><dfn id=attribute-list><a href=https://dom.spec.whatwg.org/#concept-element-attribute>属性列表</a></dfn> 概念<li>文本节点的 <dfn id=concept-cd-data><a href=https://dom.spec.whatwg.org/#concept-cd-data>数据</a></dfn><li><dfn id=event><a href=https://dom.spec.whatwg.org/#interface-event><code>event</code></a></dfn> 接口<li><dfn id=eventtarget><a href=https://dom.spec.whatwg.org/#interface-eventtarget><code>EventTarget</code></a></dfn> 接口<li><dfn id=activation-behaviour><a href=https://dom.spec.whatwg.org/#eventtarget-activation-behavior>激活行为</a></dfn> 钩子<li><dfn id=legacy-pre-activation-behavior><a href=https://dom.spec.whatwg.org/#eventtarget-legacy-pre-activation-behavior>
         遗留的预激活行为</a></dfn> 钩子<li><dfn id=legacy-canceled-activation-behavior><a href=https://dom.spec.whatwg.org/#eventtarget-legacy-canceled-activation-behavior>遗留的取消激活行为</a></dfn> 钩子<li><dfn id=creating-an-event><a href=https://dom.spec.whatwg.org/#concept-event-create>创建事件</a></dfn> 算法<li><dfn id=concept-event-fire><a href=https://dom.spec.whatwg.org/#concept-event-fire>触发事件</a></dfn> 算法<li><dfn id=canceled-flag><a href=https://dom.spec.whatwg.org/#canceled-flag>已取消标记</a></dfn><li><dfn id=concept-event-dispatch><a href=https://dom.spec.whatwg.org/#concept-event-dispatch>分发</a></dfn> 算法<li><dfn id=eventinit><a href=https://dom.spec.whatwg.org/#dictdef-eventinit><code>EventInit</code></a></dfn> 字典类型<li><dfn id=dom-event-type><a href=https://dom.spec.whatwg.org/#dom-event-type><code>type</code></a></dfn> 属性<li><dfn id=dom-event-target><a href=https://dom.spec.whatwg.org/#dom-event-target><code>target</code></a></dfn> 属性<li><dfn id=dom-event-currenttarget><a href=https://dom.spec.whatwg.org/#dom-event-currenttarget><code>currentTarget</code></a></dfn> 属性<li><dfn id=dom-event-bubbles><a href=https://dom.spec.whatwg.org/#dom-event-bubbles><code>bubbles</code></a></dfn> 属性<li><dfn id=dom-event-cancelable><a href=https://dom.spec.whatwg.org/#dom-event-cancelable><code>cancelable</code></a></dfn> 属性<li><dfn id=dom-event-istrusted><a href=https://dom.spec.whatwg.org/#dom-event-istrusted><code>isTrusted</code></a></dfn> 属性<li><dfn id=dom-event-initevent><a href=https://dom.spec.whatwg.org/#dom-event-initevent><code>initEvent()</code></a></dfn> 方法<li><dfn id=dom-eventtarget-addeventlistener><a href=https://dom.spec.whatwg.org/#dom-eventtarget-addeventlistener><code>addEventListener()</code></a></dfn> 方法<li><dfn id=dom-eventlistener><a href=https://dom.spec.whatwg.org/#callbackdef-eventlistener><code>EventListener</code></a></dfn> 回调接口<li>事件的 <dfn id=concept-event-type><a href=https://dom.spec.whatwg.org/#dom-event-type>type</a></dfn><li><dfn id=concept-event-listener><a href=https://dom.spec.whatwg.org/#concept-event-listener>事件监听器</a></dfn>
       和关联到 <code id=依赖:eventtarget><a data-x-internal=eventtarget href=https://dom.spec.whatwg.org/#interface-eventtarget>EventTarget</a></code> 的 <a href=https://dom.spec.whatwg.org/#concept-event-listener id=依赖:concept-event-listener data-x-internal=concept-event-listener>事件监听器</a> 的概念<li><dfn id="document's-character-encoding"><a href=https://dom.spec.whatwg.org/#concept-document-encoding>编码</a></dfn>（这里是 <i>字符编码</i>） 和
       <code id=依赖:document><a href=dom.html#document>Document</a></code> 的 <dfn id=concept-document-content-type><a href=https://dom.spec.whatwg.org/#concept-document-content-type>content type</a></dfn><li><dfn id=xml-documents><a href=https://dom.spec.whatwg.org/#xml-document>XML 文档</a></dfn> 和
         <dfn id=html-documents><a href=https://dom.spec.whatwg.org/#html-document>HTML 文档</a></dfn> 的区分<li>术语 <dfn id=quirks-mode><a href=https://dom.spec.whatwg.org/#concept-document-quirks>怪异模式</a></dfn>,
         <dfn id=limited-quirks-mode><a href=https://dom.spec.whatwg.org/#concept-document-limited-quirks>受限的怪异模式</a></dfn>，和
         <dfn id=no-quirks-mode><a href=https://dom.spec.whatwg.org/#concept-document-no-quirks>非怪异模式</a></dfn><li><dfn id=concept-node-clone><a href=https://dom.spec.whatwg.org/#concept-node-clone>克隆</a></dfn> <code id=依赖:node><a data-x-internal=node href=https://dom.spec.whatwg.org/#interface-node>Node</a></code> 算法，和该算法使用的
         <dfn id=concept-node-clone-ext><a href=https://dom.spec.whatwg.org/#concept-node-clone-ext>克隆步骤</a></dfn> 的概念<li><dfn id=base-url-change-steps>base URL 改变步骤</dfn> 的概念和当元素
         <dfn id=affected-by-a-base-url-change>受 base URL 改变影响时</dfn> 发生的情况的定义<li>元素 <dfn id=concept-id><a href=https://dom.spec.whatwg.org/#concept-id>唯一标识（ID）</a></dfn> 的概念<li>术语 <dfn id=concept-supported-tokens><a href=https://dom.spec.whatwg.org/#concept-supported-tokens>支持的 token</a></dfn><li>DOM <dfn id=concept-range><a href=https://dom.spec.whatwg.org/#concept-range>范围</a></dfn> 的概念，和范围中的
             <dfn id=concept-range-start><a href=https://dom.spec.whatwg.org/#concept-range-start>开始</a></dfn>,
             <dfn id=concept-range-end><a href=https://dom.spec.whatwg.org/#concept-range-end>结束</a></dfn>，和
             <dfn id=concept-range-bp><a href=https://dom.spec.whatwg.org/#concept-range-bp>边界点</a></dfn> 等术语。<li><dfn id=create-an-element><a href=https://dom.spec.whatwg.org/#concept-create-element>创建元素</a></dfn> 算法<li><dfn id=element-interface><a href=https://dom.spec.whatwg.org/#concept-element-interface>元素接口</a></dfn> 的概念<li><dfn id=concept-element-defined><a href=https://dom.spec.whatwg.org/#concept-element-defined>defined</a></dfn> 和
         <dfn id=concept-element-custom><a href=https://dom.spec.whatwg.org/#concept-element-custom>custom</a></dfn> 元素的
         <dfn id=custom-element-state><a href=https://dom.spec.whatwg.org/#concept-element-custom-element-state>custom element 状态</a></dfn><li>元素的 <dfn id=concept-element-custom-element-definition><a href=https://dom.spec.whatwg.org/#concept-element-custom-element-definition>custom element 定义</a></dfn><li>元素的 <dfn id=concept-element-is-value><a href=https://dom.spec.whatwg.org/#concept-element-is-value><code>is</code> 值</a></dfn><li><dfn id=mutationobserver><a href=https://dom.spec.whatwg.org/#mutationobserver><code>MutationObserver</code></a></dfn> interface 和 <dfn id=mutation-observers><a href=https://dom.spec.whatwg.org/#mutation-observers>mutation observers</a></dfn> in general</ul>

    <p>下列特性 定义在UI Events 标准中：<a href=references.html#refsUIEVENTS>[UIEVENTS]</a></p>

    <ul class=brief><li><dfn id=mouseevent><a href=https://w3c.github.io/uievents/#interface-MouseEvent><code>MouseEvent</code></a></dfn> 接口<li><code id=依赖:mouseevent><a data-x-internal=mouseevent href=https://w3c.github.io/uievents/#interface-MouseEvent>MouseEvent</a></code> interface's <dfn id=dom-mouseevent-relatedtarget><a href=https://w3c.github.io/uievents/#widl-MouseEvent-relatedTarget><code>relatedTarget</code></a></dfn> 属性<li><dfn id=mouseeventinit><a href=https://w3c.github.io/uievents/#idl-def-MouseEventInit><code>MouseEventInit</code></a></dfn> dictionary type<li><dfn id=focusevent><a href=https://w3c.github.io/uievents/#interface-FocusEvent><code>FocusEvent</code></a></dfn> 接口<li><code id=依赖:focusevent><a data-x-internal=focusevent href=https://w3c.github.io/uievents/#interface-FocusEvent>FocusEvent</a></code> interface's <dfn id=dom-focusevent-relatedtarget><a href=https://w3c.github.io/uievents/#widl-FocusEvent-relatedTarget><code>relatedTarget</code></a></dfn> 属性<li><dfn id=ui事件><a href=https://w3c.github.io/uievents/#interface-UIEvent><code>UI事件</code></a></dfn> 接口<li><code id=依赖:ui事件><a data-x-internal=ui事件 href=https://w3c.github.io/uievents/#interface-UIEvent>UI事件</a></code> interface's <dfn id=dom-uievent-view><a href=https://w3c.github.io/uievents/#widl-UIEvent-view><code>view</code></a></dfn> 属性<li><dfn id=event-click><a href=https://w3c.github.io/uievents/#event-type-click><code>click</code></a></dfn> 事件<li><dfn id=event-dblclick><a href=https://w3c.github.io/uievents/#event-type-dblclick><code>dblclick</code></a></dfn> 事件<li><dfn id=event-mousedown><a href=https://w3c.github.io/uievents/#event-type-mousedown><code>mousedown</code></a></dfn> 事件<li><dfn id=event-mouseenter><a href=https://w3c.github.io/uievents/#event-type-mouseenter><code>mouseenter</code></a></dfn> 事件<li><dfn id=event-mouseleave><a href=https://w3c.github.io/uievents/#event-type-mouseleave><code>mouseleave</code></a></dfn> 事件<li><dfn id=event-mousemove><a href=https://w3c.github.io/uievents/#event-type-mousemove><code>mousemove</code></a></dfn> 事件<li><dfn id=event-mouseout><a href=https://w3c.github.io/uievents/#event-type-mouseout><code>mouseout</code></a></dfn> 事件<li><dfn id=event-mouseover><a href=https://w3c.github.io/uievents/#event-type-mouseover><code>mouseover</code></a></dfn> 事件<li><dfn id=event-mouseup><a href=https://w3c.github.io/uievents/#event-type-mouseup><code>mouseup</code></a></dfn> 事件<li><dfn id=event-wheel><a href=https://w3c.github.io/uievents/#event-type-wheel><code>wheel</code></a></dfn> 事件<li><dfn id=event-keydown><a href=https://w3c.github.io/uievents/#event-type-keydown><code>keydown</code></a></dfn> 事件<li><dfn id=event-keyup><a href=https://w3c.github.io/uievents/#event-type-keyup><code>keyup</code></a></dfn> 事件<li><dfn id=event-keypress><a href=https://w3c.github.io/uievents/#event-type-keypress><code>keypress</code></a></dfn> 事件</ul>

    <p>下列特性定义在 Touch Events 标准中：<a href=references.html#refsTOUCH>[TOUCH]</a></p>

    <ul class=brief><li><dfn id=touch><a href=https://w3c.github.io/touch-events/#touch-interface><code>Touch</code></a></dfn> 接口<li><dfn id=touch-point><a href=https://w3c.github.io/touch-events/#dfn-touch-point>Touch point</a></dfn> 概念<li><dfn id=event-touchend><a href=https://w3c.github.io/touch-events/#event-touchend><code>touchend</code></a></dfn> 事件</ul>

    <p>下列特性定义在 Pointer Events 标准中：<a href=references.html#refsPOINTEREVENTS>[POINTEREVENTS]</a></p>

    <ul class=brief><li><dfn id=event-pointerup><a href=https://w3c.github.io/pointerevents/#the-pointerup-event><code>pointerup</code></a></dfn> event</ul>

    <p>下列特性定义在 auxclick 标准中：<a href=references.html#refsAUXCLICK>[AUXCLICK]</a></p>

    <ul class=brief><li><dfn id=event-auxclick><a href=https://wicg.github.io/auxclick/#the-auxclick-event><code>auxclick</code></a></dfn> event</ul>

    <p>本标准有时使用术语 <dfn>名称</dfn> 来指代事件的 <a href=https://dom.spec.whatwg.org/#dom-event-type id=依赖:concept-event-type data-x-internal=concept-event-type>类型</a>；比如，"名为 <code>click</code> 的事件" 或 "如果事件名是 <code>keypress</code>"。事件的 "名称" 和 "类型" 是同义词。</p>

    <p>下列特性定义在 <cite>DOM Parsing 和 Serialization</cite> 标准中：<a href=references.html#refsDOMPARSING>[DOMPARSING]</a></p>

    <ul class=brief><li><dfn id=domparser><a href=https://w3c.github.io/DOM-Parsing/#the-domparser-interface><code>DOMParser</code></a></dfn><li><dfn id=dom-innerhtml><a href=https://w3c.github.io/DOM-Parsing/#widl-Element-innerHTML><code>innerHTML</code></a></dfn><li><dfn id=dom-outerhtml><a href=https://w3c.github.io/DOM-Parsing/#widl-Element-outerHTML><code>outerHTML</code></a></dfn></ul>

    <p><dfn id=selection><a href=https://w3c.github.io/selection-api/#selection-interface><code>Selection</code></a></dfn>
    接口定义在 <cite>Selection API</cite> 标准中。 <a href=references.html#refsSELECTION>[SELECTION]</a></p>

    <p class=note>鼓励用户代理实现 <cite>execCommand</cite> 标准中描述的特性。 <a href=references.html#refsEXECCOMMAND>[EXECCOMMAND]</a></p>

    <p>本标准也引用了 WHATWG Fullscreen API 标准中一些部分，用于 <code id=依赖:the-dialog-element><a href=forms.html#the-dialog-element>dialog</a></code> 元素渲染的定义，
    以及 Fullscreen API 与 HTML 交互的定义： <a href=references.html#refsFULLSCREEN>[FULLSCREEN]</a></p>

    <ul class=brief><li><dfn id=top-layer><a href=https://fullscreen.spec.whatwg.org/#top-layer>top layer</a></dfn> 及其
         <dfn id=top-layer-add><a href=https://fullscreen.spec.whatwg.org/#top-layer-add>添加</a></dfn> 和
         <dfn id=top-layer-remove><a href=https://fullscreen.spec.whatwg.org/#top-layer-remove>移除</a></dfn> 算法<li><dfn id=dom-element-requestfullscreen><a href=https://fullscreen.spec.whatwg.org/#dom-element-requestfullscreen><code>requestFullscreen()</code></a></dfn></ul>

    <p><cite>High Resolution Time</cite> 标准提供了 <dfn id=domhighrestimestamp><a href=https://w3c.github.io/hr-time/#dom-domhighrestimestamp><code>DOMHighResTimeStamp</code></a></dfn>
    类型定义和 <dfn id=performance><a href=https://w3c.github.io/hr-time/#the-performance-interface><code>Performance</code></a></dfn>
    接口的 <dfn id=dom-performance-now><a href=https://w3c.github.io/hr-time/#dom-performance-now><code>now()</code></a></dfn>
    方法。 <a href=references.html#refsHRT>[HRT]</a></p>

   <dt>File API<dd>

    <p>本标准使用了 File API 标准中的下列特性：<a href=references.html#refsFILEAPI>[FILEAPI]</a></p>

    <ul class=brief><li><dfn id=blob><a href=https://w3c.github.io/FileAPI/#blob><code>Blob</code></a></dfn> 接口及其
             <dfn id=dom-blob-type><a href=https://w3c.github.io/FileAPI/#dfn-type><code>type</code></a></dfn> 属性<li><dfn id=file><a href=https://w3c.github.io/FileAPI/#file><code>File</code></a></dfn> 接口及其
             <dfn id=dom-file-name><a href=https://w3c.github.io/FileAPI/#dfn-name><code>name</code></a></dfn> 和
             <dfn id=dom-file-lastmodified><a href=https://w3c.github.io/FileAPI/#dfn-lastModified><code>lastModified</code></a></dfn> 属性<li><dfn id=filelist><a href=https://w3c.github.io/FileAPI/#filelist-section><code>FileList</code></a></dfn> 接口<li><code id=依赖:blob><a data-x-internal=blob href=https://w3c.github.io/FileAPI/#blob>Blob</a></code>'s <dfn id=snapshot-state><a href=https://w3c.github.io/FileAPI/#snapshot-state>snapshot state</a></dfn>的概念<li><dfn id=file-error-read>read errors</dfn>的概念<li><dfn id=blob-url-store><a href=https://w3c.github.io/FileAPI/#BlobURLStore>Blob URL Store</a></dfn></ul>

   <dt>Indexed Database API<dd><p>本标准使用了 Indexed Database API 标准中定义的 <dfn id=cleanup-indexed-database-transactions><a href=https://w3c.github.io/IndexedDB/#cleanup-indexed-database-transactions>清理 Indexed Database 事务</a></dfn> 。 <a href=#refsINDEXEDDB>[INDEXEDDB]</a></p>



   <dt>Media Source Extensions<dd>

    <p>下列术语定义在 Media Source Extensions 标准中：<a href=references.html#refsMEDIASOURCE>[MEDIASOURCE]</a></p>

    <ul class=brief><li><dfn id=mediasource><a href=https://w3c.github.io/media-source/#idl-def-MediaSource><code>MediaSource</code></a></dfn> 接口<li><dfn id=detaching-from-a-media-element><a href=https://w3c.github.io/media-source/#mediasource-detach>从媒体元素卸载</a></dfn></ul>

   <dt>Media Capture 和 Streams<dd>

    <p>下列术语定义在 Media Capture 和 Streams 标准中：<a href=references.html#refsMEDIASTREAM>[MEDIASTREAM]</a></p>

    <ul class=brief><li><dfn id=mediastream><a href=https://w3c.github.io/mediacapture-main/getusermedia.html#idl-def-MediaStream><code>MediaStream</code></a></dfn> 接口<li><dfn id=dom-mediadevices-getusermedia><a href=https://w3c.github.io/mediacapture-main/#dom-mediadevices-getusermedia><code>getUserMedia()</code></a></dfn> 方法</ul>

   <dt>XMLHttpRequest<dd>

    <p>本标准引用了 XMLHttpRequest 标准来描述这两个标准间的交互
    及其 <code id=依赖:progressevent><a data-x-internal=progressevent href=https://xhr.spec.whatwg.org/#interface-progressevent>ProgressEvent</a></code> 特性的使用。下列特性和术语定义在 XMLHttpRequest 标准中：<a href=references.html#refsXHR>[XHR]</a></p>

    <ul class=brief><li><dfn id=xmlhttprequest><a href=https://xhr.spec.whatwg.org/#xmlhttprequest><code>XMLHttpRequest</code></a></dfn> 接口<li><dfn id=dom-xmlhttprequest-responsexml><a href=https://xhr.spec.whatwg.org/#dom-xmlhttprequest-responsexml><code>XMLHttpRequest.responseXML</code></a></dfn> 属性<li><dfn id=progressevent><a href=https://xhr.spec.whatwg.org/#interface-progressevent><code>ProgressEvent</code></a></dfn> 接口<li><dfn id=dom-progressevent-lengthcomputable><a href=https://xhr.spec.whatwg.org/#dom-progressevent-lengthcomputable><code>ProgressEvent.lengthComputable</code></a></dfn> 属性<li><dfn id=dom-progressevent-loaded><a href=https://xhr.spec.whatwg.org/#dom-progressevent-loaded><code>ProgressEvent.loaded</code></a></dfn> 属性<li><dfn id=dom-progressevent-total><a href=https://xhr.spec.whatwg.org/#dom-progressevent-total><code>ProgressEvent.total</code></a></dfn> 属性<li><dfn id=fire-a-progress-event><a href=https://xhr.spec.whatwg.org/#concept-event-fire-progress>Fire a progress event named <var>e</var></a></dfn></ul>

   <dt>Battery Status<dd>

    <p>下列特性定义在 <cite>Battery Status API</cite> 标准中：<a href=references.html#refsBATTERY>[BATTERY]</a></p>

    <ul class=brief><li><dfn id=dom-navigator-getbattery><a href=https://w3c.github.io/battery/#widl-Navigator-getBattery-Promise-BatteryManager><code>getBattery()</code></a></dfn> 方法</ul>

   <dt>媒体查询<dd>

    <p>实现必须支持 <cite>Media Queries</cite>。其中定义了 <dfn id=media-condition><a href=https://drafts.csswg.org/mediaqueries/#typedef-media-condition>&lt;media-condition></a></dfn>
    特性。 <a href=references.html#refsMQ>[MQ]</a></p>

   <dt>CSS 模块<dd>

    <p>虽然本标准不要求实现支持整个 CSS（但至少推荐 Web 浏览器这样做），有些特性使用特定的 CSS 要求来定义。</p>

    <p>当本标准要求某种东西 <dfn id=parse-something-according-to-a-css-grammar><a href=https://drafts.csswg.org/css-syntax/#parse-grammar>按照特定的 CSS 语法解析</a></dfn> 时，
    必须遵循 CSS Syntax 标准中的相关算法。<a href=references.html#refsCSSSYNTAX>[CSSSYNTAX]</a></p>

    <p>特别的，有些特性要求 <dfn id=parsed-as-a-css-color-value>作为 CSS &lt;color> 值来解析</dfn> 字符串。
    解析 CSS 值时，要求用户代理按照 CSS 标准来应用一些错误处理规则。 这些也适用于本标准。 <a href=references.html#refsCSSCOLOR>[CSSCOLOR]</a>
    <a href=references.html#refsCSS>[CSS]</a></p>

    <p class=example>例如，要求用户代理在找到意外的样式表结尾时关闭所有已打开的构造。
    因此当解析字符串 "<code>rgb（0,0,0</code>" （缺失了结束括号）到色值时，根据本错误处理规则暗示着添加结束括号，
    这样就得到了色值 'black'。
    但相似的构造 "<code>rgb（0,0,</code>" （同时缺失了括号和 "blue" 值）就不能成功解析，
    因为结束打开的构造不能得到一个合理的值。</p>

    <p>下列术语和特性定义在 CSS 标准中：<a href=references.html#refsCSS>[CSS]</a></p>

    <ul class=brief><li><dfn id=viewport><a href=https://drafts.csswg.org/css2/visuren.html#viewport>viewport</a></dfn><li><dfn id=line-box><a href=https://drafts.csswg.org/css2/visuren.html#line-box>line box</a></dfn><li><dfn id=out-of-flow><a href=https://drafts.csswg.org/css2/visuren.html#x24>out-of-flow</a></dfn><li><dfn id=in-flow><a href=https://drafts.csswg.org/css2/visuren.html#x25>in-flow</a></dfn><li><dfn id=replaced-element><a href=https://drafts.csswg.org/css2/conform.html#replaced-element>replaced element</a></dfn><li><dfn id=intrinsic-dimensions><a href=https://drafts.csswg.org/css2/conform.html#intrinsic>intrinsic dimensions</a></dfn><li><dfn id=content-area><a href=https://drafts.csswg.org/css2/box.html#box-content-area>content area</a></dfn><li><dfn id=content-box><a href=https://drafts.csswg.org/css2/box.html#x10>content box</a></dfn><li><dfn id=border-box><a href=https://drafts.csswg.org/css2/box.html#x14>border box</a></dfn><li><dfn id=margin-box><a href=https://drafts.csswg.org/css2/box.html#x17>margin box</a></dfn><li><dfn id=border-edge><a href=https://drafts.csswg.org/css2/box.html#border-edge>border edge</a></dfn><li><dfn id=margin-edge><a href=https://drafts.csswg.org/css2/box.html#margin-edge>margin edge</a></dfn><li><dfn id=collapsing-margins><a href=https://drafts.csswg.org/css2/box.html#collapsing-margins>collapsing margins</a></dfn><li><dfn id=containing-block><a href=https://drafts.csswg.org/css2/visudet.html#containing-block-details>containing block</a></dfn><li><dfn id=inline-box><a href=https://drafts.csswg.org/css2/visuren.html#inline-box>inline box</a></dfn><li><dfn id=block-box><a href=https://drafts.csswg.org/css2/visuren.html#x9>block box</a></dfn><li><dfn id="'margin-top'"><a href=https://drafts.csswg.org/css2/box.html#propdef-margin-top>'margin-top'</a></dfn>,
              <dfn id="'margin-bottom'"><a href=https://drafts.csswg.org/css2/box.html#propdef-margin-bottom>'margin-bottom'</a></dfn>,
              <dfn id="'margin-left'"><a href=https://drafts.csswg.org/css2/box.html#propdef-margin-left>'margin-left'</a></dfn>，和
              <dfn id="'margin-right'"><a href=https://drafts.csswg.org/css2/box.html#propdef-margin-right>'margin-right'</a></dfn> 属性<li><dfn id="'padding-top'"><a href=https://drafts.csswg.org/css2/box.html#propdef-padding-top>'padding-top'</a></dfn>,
              <dfn id="'padding-bottom'"><a href=https://drafts.csswg.org/css2/box.html#propdef-padding-bottom>'padding-bottom'</a></dfn>,
              <dfn id="'padding-left'"><a href=https://drafts.csswg.org/css2/box.html#propdef-padding-left>'padding-left'</a></dfn>，和
              <dfn id="'padding-right'"><a href=https://drafts.csswg.org/css2/box.html#propdef-padding-right>'padding-right'</a></dfn> 属性<li><dfn id="'top'"><a href=https://drafts.csswg.org/css2/visuren.html#propdef-top>'top'</a></dfn>,
              <dfn id="'bottom'"><a href=https://drafts.csswg.org/css2/visuren.html#propdef-bottom>'bottom'</a></dfn>,
              <dfn id="'left'"><a href=https://drafts.csswg.org/css2/visuren.html#propdef-left>'left'</a></dfn>，和
              <dfn id="'right'"><a href=https://drafts.csswg.org/css2/visuren.html#propdef-right>'right'</a></dfn> 属性<li><dfn id="'float'"><a href=https://drafts.csswg.org/css2/visuren.html#float-position>'float'</a></dfn> 属性<li><dfn id="'clear'"><a href=https://drafts.csswg.org/css2/visuren.html#flow-control>'clear'</a></dfn> 属性<li><dfn id="'width'"><a href=https://drafts.csswg.org/css2/visudet.html#the-width-property>'width'</a></dfn> 属性<li><dfn id="'height'"><a href=https://drafts.csswg.org/css2/visudet.html#the-height-property>'height'</a></dfn> 属性<li><dfn id="'line-height'"><a href=https://drafts.csswg.org/css2/visudet.html#propdef-line-height>'line-height'</a></dfn> 属性<li><dfn id="'vertical-align'"><a href=https://drafts.csswg.org/css2/visudet.html#propdef-vertical-align>'vertical-align'</a></dfn> 属性<li><dfn id="'content'"><a href=https://drafts.csswg.org/css2/generate.html#content>'content'</a></dfn> 属性<li><a id="依赖:'display'" href=https://drafts.csswg.org/css2/visuren.html#display-prop data-x-internal="'display'">'display'</a> 属性的 <dfn id="'inline-block'"><a href=https://drafts.csswg.org/css2/visuren.html#value-def-inline-block>'inline-block'</a></dfn> 值<li><dfn id="'visibility'"><a href=https://drafts.csswg.org/css2/visufx.html#propdef-visibility>'visibility'</a></dfn> 属性</ul>

    <p>CSS 标准也定义了下列边框属性：<a href=references.html#refsCSS>[CSS]</a></p>

    <table><caption>边框属性
     </caption><tr><td>
       <th>上
       <th>下
       <th>做
       <th>右
      <tr><th>宽度
       <td><dfn id="'border-top-width'"><a href=https://drafts.csswg.org/css2/box.html#propdef-border-top-width>'border-top-width'</a></dfn>
       <td><dfn id="'border-bottom-width'"><a href=https://drafts.csswg.org/css2/box.html#propdef-border-bottom-width>'border-bottom-width'</a></dfn>
       <td><dfn id="'border-left-width'"><a href=https://drafts.csswg.org/css2/box.html#propdef-border-left-width>'border-left-width'</a></dfn>
       <td><dfn id="'border-right-width'"><a href=https://drafts.csswg.org/css2/box.html#propdef-border-right-width>'border-right-width'</a></dfn>
      <tr><th>样式
       <td><dfn id="'border-top-style'"><a href=https://drafts.csswg.org/css2/box.html#propdef-border-top-style>'border-top-style'</a></dfn>
       <td><dfn id="'border-bottom-style'"><a href=https://drafts.csswg.org/css2/box.html#propdef-border-bottom-style>'border-bottom-style'</a></dfn>
       <td><dfn id="'border-left-style'"><a href=https://drafts.csswg.org/css2/box.html#propdef-border-left-style>'border-left-style'</a></dfn>
       <td><dfn id="'border-right-style'"><a href=https://drafts.csswg.org/css2/box.html#propdef-border-right-style>'border-right-style'</a></dfn>
      <tr><th>颜色
       <td><dfn id="'border-top-color'"><a href=https://drafts.csswg.org/css2/box.html#propdef-border-top-color>'border-top-color'</a></dfn>
       <td><dfn id="'border-bottom-color'"><a href=https://drafts.csswg.org/css2/box.html#propdef-border-bottom-color>'border-bottom-color'</a></dfn>
       <td><dfn id="'border-left-color'"><a href=https://drafts.csswg.org/css2/box.html#propdef-border-left-color>'border-left-color'</a></dfn>
       <td><dfn id="'border-right-color'"><a href=https://drafts.csswg.org/css2/box.html#propdef-border-right-color>'border-right-color'</a></dfn>
    </table>

    <p>术语 <dfn id=intrinsic-width>intrinsic width</dfn> 和 <dfn id=intrinsic-height>intrinsic height</dfn> 分别指代 <a id=依赖:intrinsic-dimensions href=https://drafts.csswg.org/css2/conform.html#intrinsic data-x-internal=intrinsic-dimensions>intrinsic dimensions</a> 的宽度和高度。</p>

    <p><dfn id="'display'"><a href=https://drafts.csswg.org/css2/visuren.html#display-prop>'display'</a></dfn> 属性的基本版本
    定义在 <cite>CSS</cite> 标准中，该属性被其他 CSS 模块扩展。 <a href=references.html#refsCSS>[CSS]</a> <a href=references.html#refsCSSRUBY>[CSSRUBY]</a> <a href=references.html#refsCSSTABLE>[CSSTABLE]</a></p>

    <p>下列术语和特性定义在 <cite>CSS Logical Properties</cite> 标准中：<a href=references.html#refsCSSLOGICAL>[CSSLOGICAL]</a></p>

    <ul class=brief><li><dfn id="'margin-block-start'"><a href=https://drafts.csswg.org/css-logical-props/#propdef-margin-block-start>'margin-block-start'</a></dfn>,
              <dfn id="'margin-block-end'"><a href=https://drafts.csswg.org/css-logical-props/#propdef-margin-block-end>'margin-block-end'</a></dfn>,
              <dfn id="'margin-inline-start'"><a href=https://drafts.csswg.org/css-logical-props/#propdef-margin-inline-start>'margin-inline-start'</a></dfn>，和
              <dfn id="'margin-inline-end'"><a href=https://drafts.csswg.org/css-logical-props/#propdef-margin-inline-end>'margin-inline-end'</a></dfn> 属性<li><dfn id="'padding-block-start'"><a href=https://drafts.csswg.org/css-logical-props/#propdef-padding-block-start>'padding-block-start'</a></dfn>,
              <dfn id="'padding-block-end'"><a href=https://drafts.csswg.org/css-logical-props/#propdef-padding-block-end>'padding-block-end'</a></dfn>,
              <dfn id="'padding-inline-start'"><a href=https://drafts.csswg.org/css-logical-props/#propdef-padding-inline-start>'padding-inline-start'</a></dfn>，和
              <dfn id="'padding-inline-end'"><a href=https://drafts.csswg.org/css-logical-props/#propdef-padding-inline-end>'padding-inline-end'</a></dfn> 属性</ul>

    <p>下列术语和特性定义在 <cite>CSS Color</cite> 标准中：<a href=references.html#refsCSSCOLOR>[CSSCOLOR]</a></p>

    <ul class=brief><li><dfn id=named-color><a href=https://drafts.csswg.org/css-color/#named-color>named color</a></dfn><li><dfn id=color><a href=https://drafts.csswg.org/css-color/#typedef-color>&lt;color></a></dfn><li><dfn id="'color'"><a href=https://drafts.csswg.org/css-color/#the-color-property>'color'</a></dfn> 属性</ul>

    <p>术语 <dfn id=paint-source><a href=https://drafts.csswg.org/css-images-4/#paint-source>paint source</a></dfn> 定义在
    <cite>CSS Image Values 和 Replaced Content</cite> 标准中，用来定义特定 HTML 元素与 CSS 'element()' 函数之间的交互。 <a href=references.html#refsCSSIMAGES>[CSSIMAGES]</a></p>

    <p>术语 <dfn id=default-object-size><a href=https://drafts.csswg.org/css-images/#default-object-size>default object size</a></dfn> 和 <dfn id="'object-fit'"><a href=https://drafts.csswg.org/css-images/#the-object-fit>'object-fit'</a></dfn> 属性也定义在
    <cite>CSS Image Values and Replaced Content</cite> 标准中。 <a href=references.html#refsCSSIMAGES>[CSSIMAGES]</a></p>

    <p>下列特性定义在 <cite>CSS Backgrounds and Borders</cite> 标准中：<a href=references.html#refsCSSBG>[CSSBG]</a></p>

    <ul class=brief><li><dfn id="'background-color'"><a href=https://drafts.csswg.org/css-backgrounds/#the-background-color>'background-color'</a></dfn> 属性<li><dfn id="'background-image'"><a href=https://drafts.csswg.org/css-backgrounds/#the-background-image>'background-image'</a></dfn> 属性<li><dfn id=position><a href=https://drafts.csswg.org/css-backgrounds/#position>&lt;position></a></dfn> CSS 数据类型</ul>

    <p>术语 <dfn id=block-level><a href=https://drafts.csswg.org/css-display/#block-level>block-level</a></dfn> 定义在 <cite>CSS Display</cite> 标准中。 <a href=references.html#refsCSSDISPLAY>[CSSDISPLAY]</a></p>

    <p>下列特性定义在 <cite>CSS Fonts</cite> 标准中：<a href=references.html#refsCSSFONTS>[CSSFONTS]</a></p>

    <ul class=brief><li><dfn id="'font-family'"><a href=https://drafts.csswg.org/css-fonts/#font-family-prop>'font-family'</a></dfn> 属性<li><dfn id="'font-weight'"><a href=https://drafts.csswg.org/css-fonts/#font-weight-prop>'font-weight'</a></dfn> 属性<li><dfn id="'font-size'"><a href=https://drafts.csswg.org/css-fonts/#font-size-prop>'font-size'</a></dfn> 属性<li><dfn id="'font'"><a href=https://drafts.csswg.org/css-fonts/#font-prop>'font'</a></dfn> 属性</ul>

    <p><dfn id="'list-style-type'"><a href=https://drafts.csswg.org/css-lists/#propdef-list-style-type>'list-style-type'</a></dfn>
    属性定义在 <cite>CSS Lists and Counters</cite> 标准中。 <a href=references.html#refsCSSLISTS>[CSSLISTS]</a></p>

    <p><dfn id="'overflow'"><a href=https://drafts.csswg.org/css-overflow/#propdef-overflow>'overflow'</a></dfn> property
    及其 <dfn id="'hidden'"><a href=https://drafts.csswg.org/css-overflow/#valdef-overflow-hidden>'hidden'</a></dfn> value
    定义在<cite>CSS Overflow</cite> 标准中。 <a href=references.html#refsCSSOVERFLOW>[CSSOVERFLOW]</a></p>

    <p>下列特性 定义在<cite>CSS Positioned Layout</cite> 标准中：
    <a href=references.html#refsCSSPOSITION>[CSSPOSITION]</a></p>

    <ul class=brief><li><dfn id="'position'"><a href=https://drafts.csswg.org/css-position/#position-property>'position'</a></dfn> property 及其
              <dfn id="'static'"><a href=https://drafts.csswg.org/css-position/#valdef-position-static>'static'</a></dfn> value</ul>

    <p><dfn id="'ruby-base'"><a href=https://drafts.csswg.org/css-ruby/#valdef-display-ruby-base>'ruby-base'</a></dfn>
    value of the <a id="依赖:'display'-2" href=https://drafts.csswg.org/css2/visuren.html#display-prop data-x-internal="'display'">'display'</a> property 定义在 <cite>CSS Ruby Layout</cite>
    标准中。 <a href=references.html#refsCSSRUBY>[CSSRUBY]</a></p>

    <p>下列特性 定义在<cite>CSS Table</cite> 标准中：<a href=references.html#refsCSSTABLE>[CSSTABLE]</a></p>

    <ul class=brief><li><dfn id="'border-spacing'"><a href=https://drafts.csswg.org/css-tables/#propdef-border-spacing>'border-spacing'</a></dfn> 属性<li><dfn id="'border-collapse'"><a href=https://drafts.csswg.org/css-tables/#border-collapse-property>'border-collapse'</a></dfn> 属性<li><dfn id="'table-cell'"><a href=https://drafts.csswg.org/css-tables/#table-cell>'table-cell'</a></dfn>,
              <dfn id="'table-row'"><a href=https://drafts.csswg.org/css-tables/#table-row>'table-row'</a></dfn>,
              <dfn id="'table-caption'"><a href=https://drafts.csswg.org/css-tables/#table-caption>'table-caption'</a></dfn>，和
              <dfn id="'table'"><a href=https://drafts.csswg.org/css-tables/#table>'table'</a></dfn> values of the <a id="依赖:'display'-3" href=https://drafts.csswg.org/css2/visuren.html#display-prop data-x-internal="'display'">'display'</a> 属性</ul>

    <p>下列特性 定义在<cite>CSS Text</cite> 标准中：<a href=references.html#refsCSSTEXT>[CSSTEXT]</a></p>

    <ul class=brief><li><dfn id="'text-transform'"><a href=https://drafts.csswg.org/css-text/#text-transform-property>'text-transform'</a></dfn> 属性<li><dfn id="'white-space'"><a href=https://drafts.csswg.org/css-text/#white-space-property>'white-space'</a></dfn> 属性<li><dfn id="'text-align'"><a href=https://drafts.csswg.org/css-text/#text-align-property>'text-align'</a></dfn> 属性<li><dfn id="'letter-spacing'"><a href=https://drafts.csswg.org/css-text/#letter-spacing-property>'letter-spacing'</a></dfn> 属性</ul>

    <p>下列特性 定义在<cite>CSS Writing Modes</cite> 标准中：<a href=references.html#refsCSSWM>[CSSWM]</a></p>

    <ul class=brief><li><dfn id="'direction'"><a href=https://drafts.csswg.org/css-writing-modes/#direction>'direction'</a></dfn> 属性<li><dfn id="'unicode-bidi'"><a href=https://drafts.csswg.org/css-writing-modes/#unicode-bidi>'unicode-bidi'</a></dfn> 属性<li><dfn id=block-flow-direction><a href=https://drafts.csswg.org/css-writing-modes/#block-flow-direction>block flow direction</a></dfn>,
              <dfn id=block-size><a href=https://drafts.csswg.org/css-writing-modes/#block-size>block size</a></dfn>,
              <dfn id=inline-size><a href=https://drafts.csswg.org/css-writing-modes/#inline-size>inline size</a></dfn>,
              <dfn id=block-start><a href=https://drafts.csswg.org/css-writing-modes/#block-start>block-start</a></dfn>,
              <dfn id=block-end><a href=https://drafts.csswg.org/css-writing-modes/#block-end>block-end</a></dfn>,
              <dfn id=inline-start><a href=https://drafts.csswg.org/css-writing-modes/#inline-start>inline-start</a></dfn>,
              <dfn id=inline-end><a href=https://drafts.csswg.org/css-writing-modes/#inline-end>inline-end</a></dfn>,
              <dfn id=line-left><a href=https://drafts.csswg.org/css-writing-modes/#line-left>line-left</a></dfn>，和
              <dfn id=line-right><a href=https://drafts.csswg.org/css-writing-modes/#line-right>line-right</a></dfn> concepts</ul>

    <p>下列特性定义在<cite>CSS Basic User 接口</cite> 标准中：<a href=references.html#refsCSSUI>[CSSUI]</a></p>

    <ul class=brief><li><dfn id="'outline'"><a href=https://drafts.csswg.org/css-ui/#outline>'outline'</a></dfn> 属性<li><dfn id="'cursor'"><a href=https://drafts.csswg.org/css-ui/#cursor>'cursor'</a></dfn> 属性<li><dfn id="'appearance'"><a href=https://drafts.csswg.org/css-ui-4/#appearance-switching>'appearance'</a></dfn> 属性</ul>

    <p>支持脚本的实现必须支持 CSS Object Model。下列特性和术语定义在CSSOM 标准中： <a href=references.html#refsCSSOM>[CSSOM]</a> <a href=references.html#refsCSSOMVIEW>[CSSOMVIEW]</a>

    <ul class=brief><li><dfn id=screen><a href=https://drafts.csswg.org/cssom-view/#the-screen-interface><code>Screen</code></a></dfn> 接口<li><dfn id=linkstyle><a href=https://drafts.csswg.org/cssom/#the-linkstyle-interface><code>LinkStyle</code></a></dfn> 接口<li><dfn id=cssstyledeclaration><a href=https://drafts.csswg.org/cssom/#the-cssstyledeclaration-interface><code>CSSStyleDeclaration</code></a></dfn> 接口<li><code id=依赖:cssstyledeclaration><a data-x-internal=cssstyledeclaration href=https://drafts.csswg.org/cssom/#the-cssstyledeclaration-interface>CSSStyleDeclaration</a></code> 的
       <dfn id=dom-cssstyledeclaration-csstext><a href=https://drafts.csswg.org/cssom/#dom-cssstyledeclaration-csstext>
         <code>cssText</code></a></dfn> 属性<li><dfn id=stylesheet><a href=https://drafts.csswg.org/cssom/#the-stylesheet-interface><code>StyleSheet</code></a></dfn> 接口<li><dfn id=create-a-css-style-sheet><a href=https://drafts.csswg.org/cssom/#create-a-css-style-sheet>创建 CSS 样式表</a></dfn><li><dfn id=remove-a-css-style-sheet><a href=https://drafts.csswg.org/cssom/#remove-a-css-style-sheet>移除 CSS 样式表</a></dfn><li><dfn id=associated-css-style-sheet><a href=https://drafts.csswg.org/cssom/#associated-css-style-sheet>关联的 CSS 样式表</a></dfn><li>
      <dfn id=css-style-sheet><a href=https://drafts.csswg.org/cssom/#css-style-sheet>CSS 样式表</a></dfn> 及其属性：
      <ul class=brief><li><dfn id=concept-css-style-sheet-type><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-type>type</a></dfn><li><dfn id=concept-css-style-sheet-location><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-location>location</a></dfn><li><dfn id=concept-css-style-sheet-parent-css-style-sheet><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-parent-css-style-sheet>parent CSS style sheet</a></dfn><li><dfn id=concept-css-style-sheet-owner-node><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-owner-node>owner node</a></dfn><li><dfn id=concept-css-style-sheet-owner-css-rule><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-owner-css-rule>owner CSS rule</a></dfn><li><dfn id=concept-css-style-sheet-media><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-media>media</a></dfn><li><dfn id=concept-css-style-sheet-title><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-title>title</a></dfn><li><dfn id=concept-css-style-sheet-alternate-flag><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-alternate-flag>alternate flag</a></dfn><li><dfn id=concept-css-style-sheet-disabeld-flag><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-disabled-flag>disabled flag</a></dfn><li><dfn id=concept-css-style-sheet-css-rules><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-css-rules>CSS rules</a></dfn><li><dfn id=concept-css-style-sheet-origin-clean-flag><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-origin-clean-flag>origin-clean flag</a></dfn></ul>
     <li><dfn id=css-style-sheet-set><a href=https://drafts.csswg.org/cssom/#css-style-sheet-set>CSS 样式表集合</a></dfn><li><dfn id=css-style-sheet-set-name><a href=https://drafts.csswg.org/cssom/#css-style-sheet-set-name>CSS 样式表集合名</a></dfn><li><dfn id=preferred-css-style-sheet-set-name><a href=https://drafts.csswg.org/cssom/#preferred-css-style-sheet-set-name>偏好 CSS 样式表集合名</a></dfn><li><dfn id=change-the-preferred-css-style-sheet-set-name><a href=https://drafts.csswg.org/cssom/#change-the-preferred-css-style-sheet-set-name>更改偏好 CSS 样式表集合名</a></dfn><li><dfn id=serializing-a-css-value><a href=https://drafts.csswg.org/cssom/#serialize-a-css-value>序列化 CSS 值</a></dfn><li><dfn id=run-the-resize-steps><a href=https://drafts.csswg.org/cssom-view/#run-the-resize-steps>执行 resize 步骤</a></dfn><li><dfn id=run-the-scroll-steps><a href=https://drafts.csswg.org/cssom-view/#run-the-scroll-steps>执行 scroll 步骤</a></dfn><li><dfn id=evaluate-media-queries-and-report-changes><a href=https://drafts.csswg.org/cssom-view/#evaluate-media-queries-and-report-changes>计算媒体查询并报告改变</a></dfn><li><dfn id=scroll-an-element-into-view><a href=https://drafts.csswg.org/cssom-view/#scroll-an-element-into-view>将元素滚动到视图内</a></dfn><li><dfn id=scroll-to-the-beginning-of-the-document><a href=https://drafts.csswg.org/cssom-view/#scroll-to-the-beginning-of-the-document>滚动到文档起始</a></dfn><li><dfn id=event-resize><a href=https://drafts.csswg.org/cssom-view/#eventdef-window-resize><code>resize</code></a></dfn> 事件<li><dfn id=event-scroll><a href=https://drafts.csswg.org/cssom-view/#eventdef-document-scroll><code>scroll</code></a></dfn> 事件<li><dfn id=set-up-browsing-context-features><a href=https://drafts.csswg.org/cssom-view/#set-up-browsing-context-features>建立浏览环境特性</a></dfn></ul>

    <p>下列特性和术语定义在<cite>CSS Syntax</cite> 标准中：
    <a href=references.html#refsCSSSYNTAX>[CSSSYNTAX]</a></p>

    <ul class=brief><li><dfn id=parse-a-comma-separated-list-of-component-values><a href=https://drafts.csswg.org/css-syntax/#parse-a-comma-separated-list-of-component-values>Parse a comma-separated list of component values</a></dfn><li><dfn id=component-value><a href=https://drafts.csswg.org/css-syntax/#component-value>component value</a></dfn><li><dfn id=environment-encoding><a href=https://drafts.csswg.org/css-syntax/#environment-encoding>environment encoding</a></dfn><li><dfn id=whitespace-token><a href=https://drafts.csswg.org/css-syntax/#typedef-whitespace-token>&lt;whitespace-token></a></dfn></ul>

    <p>下列术语定义在 the <cite>Selectors</cite> 标准中：<a href=references.html#refsSELECTORS>[SELECTORS]</a></p>

    <ul class=brief><li><dfn id=type-selector><a href=https://drafts.csswg.org/selectors/#type-selector>type selector</a></dfn><li><dfn id=attribute-selector><a href=https://drafts.csswg.org/selectors/#attribute-selector>attribute selector</a></dfn><li><dfn id=pseudo-class><a href=https://drafts.csswg.org/selectors/#pseudo-class>pseudo-class</a></dfn></ul>

    <p>下列特性 定义在<cite>CSS Values and Units</cite> 标准中：
    <a href=references.html#refsCSSVALUES>[CSSVALUES]</a></p>

    <ul class=brief><li><dfn id=length><a href=https://drafts.csswg.org/css-values/#lengths>&lt;length></a></dfn><li><dfn id="'em'"><a href=https://drafts.csswg.org/css-values/#em>'em'</a></dfn> unit<li><dfn id="'ex'"><a href=https://drafts.csswg.org/css-values/#ex>'ex'</a></dfn> unit<li><dfn id="'vw'"><a href=https://drafts.csswg.org/css-values/#vw>'vw'</a></dfn> unit<li><dfn id="'in'"><a href=https://drafts.csswg.org/css-values/#in>'in'</a></dfn> unit<li><dfn id="'px'"><a href=https://drafts.csswg.org/css-values/#px>'px'</a></dfn> unit<li><dfn id="'attr()'"><a href=https://drafts.csswg.org/css-values/#funcdef-attr>'attr()'</a></dfn> function<li><dfn id="'calc()'"><a href=https://drafts.csswg.org/css-values/#funcdef-calc>'calc()'</a></dfn> function</ul>

    <p>术语 <dfn id=css-styling-attribute><a href=https://drafts.csswg.org/css-style-attr/#style-attribute>style 属性</a></dfn>
    定义在 <cite>CSS Style Attributes</cite> 标准中。 <a href=references.html#refsCSSATTR>[CSSATTR]</a></p>

    <p>下列术语定义在 <cite>CSS Cascading and Inheritance</cite> 标准中：<a href=references.html#refsCSSCASCADE>[CSSCASCADE]</a></p>

    <ul class=brief><li><dfn id=specified-value><a href=https://drafts.csswg.org/css-cascade/#specified-value>specified value</a></dfn><li><dfn id=computed-value><a href=https://drafts.csswg.org/css-cascade/#computed-value>computed value</a></dfn><li><dfn id=used-value><a href=https://drafts.csswg.org/css-cascade/#used-value>used value</a></dfn></ul>

    <p><code id=依赖:canvasrenderingcontext2d><a href=scripting.html#canvasrenderingcontext2d>CanvasRenderingContext2D</a></code> 对象中使用的字体依赖于
    CSS <cite>Fonts</cite> 和 <cite>Font Loading</cite> 标准中描述的特性，尤其包括
    <dfn id=fontface><code>FontFace</code></dfn> 对象和 <dfn id=font-source><a href=https://drafts.csswg.org/css-font-loading/#font-source>font source</a></dfn> 概念。
    <a href=references.html#refsCSSFONTS>[CSSFONTS]</a> <a href=references.html#refsCSSFONTLOAD>[CSSFONTLOAD]</a></p>

    <p>下列接口和术语定义在 Geometry Interfaces Module 标准中：<a href=references.html#refsGEOMETRY>[GEOMETRY]</a></p>

    <ul class=brief><li><dfn id=dommatrix><a href=https://drafts.fxtf.org/geometry/#dommatrix><code>DOMMatrix</code></a></dfn> 接口<li><dfn id=dommatrixinit><a href=https://drafts.fxtf.org/geometry/#dictdef-dommatrixinit><code>DOMMatrixInit</code></a></dfn> 接口<li><code id=依赖:dommatrixinit><a data-x-internal=dommatrixinit href=https://drafts.fxtf.org/geometry/#dictdef-dommatrixinit>DOMMatrixInit</a></code> 的 <dfn id=create-a-dommatrix-from-a-dictionary><a href=https://drafts.fxtf.org/geometry/#create-a-dommatrix-from-the-dictionary>
       从字典创建一个 <code>DOMMatrix</code></a></dfn> 算法</ul>

   <dt>Intersection Observer<dd>

    <p>下列术语定义在 Intersection Observer 标准中：<a href=references.html#refsINTERSECTIONOBSERVER>[INTERSECTIONOBSERVER]</a></p>

    <ul class=brief><li><dfn id=run-the-update-intersection-observations-steps><a href=https://wicg.github.io/IntersectionObserver/#run-the-update-intersection-observations-steps>
       执行更新插入操作的观察者步骤</a></dfn></ul>

   <dt>WebGL<dd>

    <p>下列接口定义在 WebGL 标准中：<a href=references.html#refsWEBGL>[WEBGL]</a></p>

    <ul class=brief><li><dfn id=webglrenderingcontext><a href=https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLRenderingContext><code>WebGLRenderingContext</code></a></dfn> 接口</ul>

   <dt>WebVTT<dd>

    <p>实现可以支持 WebVTT 作为媒体资源的子标题、图表标题、章节标题、元数据等的字幕格式。 <a href=references.html#refsWEBVTT>[WEBVTT]</a></p>

    <p>本标准中使用的下列术语定义在 WebVTT 标准中：</p>

    <ul class=brief><li><dfn id=webvtt-file><a href=https://w3c.github.io/webvtt/#webvtt-file>WebVTT 文件</a></dfn><li><dfn id=webvtt-file-using-cue-text><a href=https://w3c.github.io/webvtt/#webvtt-file-using-cue-text>使用字幕的 WebVTT 文件</a></dfn><li><dfn id=webvtt-file-using-chapter-title-text><a href=https://w3c.github.io/webvtt/#webvtt-file-using-chapter-title-text>使用章节标题的 WebVTT 文件</a></dfn><li><dfn id=webvtt-file-using-only-nested-cues><a href=https://w3c.github.io/webvtt/#webvtt-file-using-only-nested-cues>只使用嵌套字幕的 WebVTT 文件</a></dfn><li><dfn id=webvtt-parser><a href=https://w3c.github.io/webvtt/#webvtt-parser>WebVTT 解析器</a></dfn><li><dfn id=rules-for-updating-the-display-of-webvtt-text-tracks><a href=https://w3c.github.io/webvtt/#rules-for-updating-the-display-of-webvtt-text-tracks>更新 WebVTT 字幕的规则</a></dfn><li>WebVTT
       <dfn id=text-track-cue-writing-direction><a href=https://w3c.github.io/webvtt/#webvtt-cue-writing-direction>字幕书写方向</a></dfn><li><dfn id=vttcue><a href=https://w3c.github.io/webvtt/#vttcue><code>VTTCue</code></a></dfn> 接口</ul>

   <dt>WebSocket 协议<dd>
    <p>下列术语定义在 WHATWG Fetch 标准中：<a href=references.html#refsFETCH>[FETCH]</a></p>

    <ul class=brief><li><dfn id=concept-websocket-establish><a href=https://fetch.spec.whatwg.org/#concept-websocket-establish>建立 WebSocket l连接</a></dfn></ul>

    <p>下列术语定义在 WebSocket 协议标准中：<a href=references.html#refsWSP>[WSP]</a></p>

    <ul class=brief><li><dfn id=concept-websocket-established>已建立 WebSocket 连接</dfn><li><dfn id=concept-websockets-active-extensions>在使用的扩展</dfn><li><dfn id=concept-websocket-subprotocol>在使用的子协议</dfn><li><dfn id=concept-websocket-message-received>已收到的 WebSocket 消息</dfn><li><dfn id=concept-websocket-send>发送一条 WebSocket 消息</dfn><li><dfn id=concept-websocket-fail>使 WebSocket 连接失败</dfn><li><dfn id=concept-websocket-close>关闭 WebSocket 连接</dfn><li><dfn id=concept-websocket-start-closing-handshake>开始关闭 WebSocket 握手</dfn><li><dfn id=concept-websocket-closing-handshake>关闭 WebSocket 握手已开始</dfn><li><dfn id=concept-websocket-closed>WebSocket 连接已关闭</dfn>（可能是 <i>干净的</i>）<li><dfn id=concept-websocket-close-code>WebSocket 连接关闭代码</dfn><li><dfn id=concept-websocket-close-reason>WebSocket 连接关闭原因</dfn><li><dfn id=http-sec-websocket-protocol><code>Sec-WebSocket-Protocol</code></dfn> 字段</ul>

   <dt>ARIA<dd>

    <p><dfn id=attr-aria-role><code>role</code></dfn> 属性定义在 ARIA 标准中，包括下列角色：<a href=references.html#refsARIA>[ARIA]</a></p>

    <ul class=brief><li><dfn id=attr-aria-role-button><a href=https://w3c.github.io/aria/aria/aria.html#button><code>button</code></a></dfn><li><dfn id=attr-aria-role-presentation><a href=https://w3c.github.io/aria/aria/aria.html#presentation><code>presentation</code></a></dfn></ul>

    <p>此外，下列 <dfn id=attr-aria-*><code>aria-*</code></dfn> 内容属性定义在 ARIA 标准中：<a href=references.html#refsARIA>[ARIA]</a></p>

    <ul class=brief><li><dfn id=attr-aria-describedby><a href=https://w3c.github.io/aria/aria/aria.html#aria-describedby><code>aria-describedby</code></a></dfn><li><dfn id=attr-aria-disabled><a href=https://w3c.github.io/aria/aria/aria.html#aria-disabled><code>aria-disabled</code></a></dfn><li><dfn id=attr-aria-label><a href=https://w3c.github.io/aria/aria/aria.html#aria-label><code>aria-label</code></a></dfn></ul>

    <p>下列术语也定义在 ARIA 标准中：<a href=references.html#refsARIA>[ARIA]</a></p>

    <ul class=brief><li><dfn id=concept-accessible-name><a href=https://w3c.github.io/aria/aria/aria.html#dfn-accessible-name>可访问名称</a></dfn></ul>

   <dt>内容安全策略<dd>

    <p>下列术语定义在 <cite>Content Security Policy</cite> 中：<a href=references.html#refsCSP>[CSP]</a></p>

    <ul class=brief><li><dfn id=content-security-policy><a href=https://w3c.github.io/webappsec-csp/#content-security-policy-object>内容安全策略</a></dfn><li><dfn id=content-security-policy-directive><a href=https://w3c.github.io/webappsec-csp/#directives>内容安全策略指令</a></dfn><li><dfn id=content-security-policy-syntax><a href=https://w3c.github.io/webappsec-csp/#grammardef-serialized-policy>内容安全策略语法</a></dfn><li><dfn id=enforce-the-policy><a href=https://w3c.github.io/webappsec-csp/#enforced>强制策略</a></dfn><li><dfn id=parse-a-serialized-content-security-policy><a href=https://w3c.github.io/webappsec-csp/#parse-serialized-policy>解析序列化的内容安全策略</a></dfn> 算法<li><dfn id="initialize-a-global-object's-csp-list"><a href=https://w3c.github.io/webappsec-csp/#initialize-global-object-csp>初始化全局对象的 CSP 列表</a></dfn> 算法<li><dfn id="initialize-a-document's-csp-list"><a href=https://w3c.github.io/webappsec-csp/#initialize-document-csp>初始化文档的 CSP 列表</a></dfn> 算法<li><dfn id="should-element's-inline-behavior-be-blocked-by-content-security-policy"><a href=https://w3c.github.io/webappsec-csp/#should-block-inline>
       内容安全策略是否阻止元素的内联行为？</a></dfn> 算法<li><dfn id=should-navigation-request-of-type-from-source-in-target-be-blocked-by-content-security-policy><a href=https://w3c.github.io/webappsec-csp/#should-block-navigation-request>
       内容安全策略是否阻止从目标源发起的某种类型的导航请求？</a></dfn> 算法<li><dfn id=should-navigation-response-to-navigation-request-of-type-from-source-in-target-be-blocked-by-content-security-policy><a href=https://w3c.github.io/webappsec-csp/#should-block-navigation-response>
       内容安全策略是否阻止从目标源发起的某种类型的导航请求的导航响应？</a></dfn> 算法<li><dfn id=report-uri-directive><a href=https://w3c.github.io/webappsec-csp/#report-uri><code>report-uri</code> 指令</a></dfn><li><dfn id=csp-ensurecspdoesnotblockstringcompilation><a href=https://w3c.github.io/webappsec-csp/#can-compile-strings>EnsureCSPDoesNotBlockStringCompilation</a></dfn> 抽象操作<li><dfn id=is-base-allowed-for-document><a href=https://w3c.github.io/webappsec-csp/#allow-base-for-document>文档是否允许 base？</a></dfn> 算法<li><dfn id=frame-ancestors-directive><a href=https://w3c.github.io/webappsec-csp/#frame-ancestors><code>frame-ancestors</code> 指令</a></dfn><li><dfn id=sandbox-directive><a href=https://w3c.github.io/webappsec-csp/#sandbox><code>sandbox</code> 指令</a></dfn><li><dfn id=should-element-be-blocked-a-priori-by-content-security-policy><a href=https://w3c.github.io/webappsec-csp/#should-plugin-element-be-blocked-a-priori-by-content-security-policy>
       内容安全策略是否 <i>先验地</i> 阻止元素？</a></dfn> algorithm</ul>

   <dt>Service Workers<dd>

    <p>下列术语定义在 <cite>Service Workers</cite> 中：<a href=references.html#refsSW>[SW]</a></p>

    <ul class=brief><li><dfn id=dfn-active-worker><a href=https://w3c.github.io/ServiceWorker/#dfn-active-worker>激活的 worker</a></dfn><li><dfn id=dfn-client-message-queue><a href=https://w3c.github.io/ServiceWorker/#dfn-client-message-queue>客户消息队列</a></dfn><li><dfn id=dfn-control><a href=https://w3c.github.io/ServiceWorker/#dfn-control>控制</a></dfn><li><dfn id=on-fetch-request-algorithm><a href=https://w3c.github.io/ServiceWorker/#on-fetch-request-algorithm>处理 fetch</a></dfn><li><dfn id=scope-match-algorithm><a href=https://w3c.github.io/ServiceWorker/#scope-match-algorithm>匹配 service worker 注册</a></dfn><li><dfn id=scope-url><a href=https://w3c.github.io/ServiceWorker/#dfn-scope-url>scope url</a></dfn><li><dfn id=script-url><a href=https://w3c.github.io/ServiceWorker/#dfn-script-url>脚本 url</a></dfn><li><dfn id=dfn-service-worker><a href=https://w3c.github.io/ServiceWorker/#dfn-service-worker>service worker</a></dfn><li><dfn id=serviceworkercontainer-service-worker-client><a href=https://w3c.github.io/ServiceWorker/#serviceworkercontainer-service-worker-client>service worker 客户</a></dfn><li><dfn id=service-worker-registration><a href=https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration>service worker 注册</a></dfn><li><dfn id=service-worker-type><a href=https://w3c.github.io/ServiceWorker/#dfn-type>service worker 类型</a></dfn><li><dfn id=serviceworker-link><a href=https://w3c.github.io/ServiceWorker/#dfn-serviceworker-link>serviceworker link</a></dfn><li><dfn id=serviceworker><a href=https://w3c.github.io/ServiceWorker/#serviceworker><code>ServiceWorker</code></a></dfn> 接口<li><dfn id=serviceworkercontainer><a href=https://w3c.github.io/ServiceWorker/#serviceworkercontainer><code>ServiceWorkerContainer</code></a></dfn> 接口<li><dfn id=serviceworkerglobalscope><a href=https://w3c.github.io/ServiceWorker/#serviceworkerglobalscope><code>ServiceWorkerGlobalScope</code></a></dfn> 接口<li><dfn id=use-cache><a href=https://w3c.github.io/ServiceWorker/#dfn-use-cache>使用缓存</a></dfn></ul>

   <dt>安全上下文<dd>

    <p>下列术语定义在 <cite>Secure Contexts</cite> 中：<a href=#refsSECURE-CONTEXTS>[SECURE-CONTEXTS]</a></p>

    <ul class=brief><li><dfn id=is-environment-settings-object-a-secure-context><a href=https://w3c.github.io/webappsec-secure-contexts/#settings-object>环境设置对象是不是一个安全的上下文？</a></dfn><li><dfn id=non-secure-context><a href=https://w3c.github.io/webappsec-secure-contexts/#non-secure-context>不安全的上下文</a></dfn><li><dfn id=secure-context><a href=https://w3c.github.io/webappsec-secure-contexts/#secure-context>安全的上下文</a></dfn></ul>

   <dt>Payment Request API<dd>
    <p>下列特性定义在 <cite>Payment Request API</cite> 标准中：<a href=references.html#refsPAYMENTREQUEST>[PAYMENTREQUEST]</a></p>

    <ul class=brief><li><dfn id=paymentrequest><a href=https://w3c.github.io/browser-payment-api/#paymentrequest-interface><code>PaymentRequest</code></a></dfn> 接口</ul>
   <dt>MathML<dd>
    <p>虽然本标准不要求完整支持 MathML（但鼓励浏览器这样做），某些特性依赖于实现一小部分 MathML。 <a href=references.html#refsMATHML>[MATHML]</a></p>

    <p>下列特性定义在 MathML 标准中：</p>

    <ul class=brief><li><dfn id=mathml-annotation-xml><a href=https://www.w3.org/Math/draft-spec/chapter5.html#mixing.elements.annotation.xml>MathML <code>annotation-xml</code></a></dfn> 元素<li><dfn id=mathml-math><a href=https://www.w3.org/Math/draft-spec/chapter2.html#interf.toplevel>MathML <code>math</code></a></dfn> 元素<li><dfn id=mathml-merror><a href=https://www.w3.org/Math/draft-spec/chapter3.html#presm.merror>MathML <code>merror</code></a></dfn> 元素<li><dfn id=mathml-mi><a href=https://www.w3.org/Math/draft-spec/chapter3.html#presm.mi>MathML <code>mi</code></a></dfn> 元素<li><dfn id=mathml-mn><a href=https://www.w3.org/Math/draft-spec/chapter3.html#presm.mn>MathML <code>mn</code></a></dfn> 元素<li><dfn id=mathml-mo><a href=https://www.w3.org/Math/draft-spec/chapter3.html#presm.mo>MathML <code>mo</code></a></dfn> 元素<li><dfn id=mathml-ms><a href=https://www.w3.org/Math/draft-spec/chapter3.html#presm.ms>MathML <code>ms</code></a></dfn> 元素<li><dfn id=mathml-mtext><a href=https://www.w3.org/Math/draft-spec/chapter3.html#presm.mtext>MathML <code>mtext</code></a></dfn> 元素</ul>
   <dt>SVG<dd>
    <p>虽然本标准不要求完整支持 SVG（但鼓励浏览器这样做），某些特性依赖于实现一部分 SVG。</p>

    <p>此外，SVG 标准不反应实现现状。实现大多是 SVG 1.1 和 SVG Tiny 1.2 的子集。
    虽然我们希望正在开发中的 SVG 2 标准是一个更加现实的实现目标，但该标准就绪之前，实现 SVG 的用户代理
    必须遵循下列 <a href=introduction.html#willful-violation id=依赖:willful-violation-2>有意的违规</a> 和附加条款。 <a href=references.html#refsSVG>[SVG]</a> <a href=references.html#refsSVGTINY12>[SVGTINY12]</a> <a href=references.html#refsSVG2>[SVG2]</a></p>

    <p>实现 SVG 的用户代理禁止实现 SVG 1.1 中的下列特性：</p>

    <ul class=brief><li><code>tref</code> 元素<li><code>cursor</code> 元素（使用 CSS 的 <code>cursor</code> 属性代替）<li>字体定义 SVG 元素：<code>font</code>，<code>glyph</code>,
     <code>missing-glyph</code>，<code>hkern</code>，<code>vkern</code>，<code>font-face</code>，<code>font-face-src</code>,
     <code>font-face-uri</code>，<code>font-face-format</code>，和 <code>font-face-name</code>（使用 CSS 的 <code>@font-face</code> 代替）<li><code>externalResourcesRequired</code> 属性<li><code>enable-background</code> 属性<li><code>contentScriptType</code> 和 <code>contentStyleType</code>
     属性（使用 <a id=依赖:svg-script href=https://www.w3.org/TR/SVG11/script.html#ScriptElement data-x-internal=svg-script>SVG <code>script</code></a> 上的 <code>type</code> 属性和
     <code>style</code> 元素代替）</ul>

    <p>实现 SVG 的用户代理必须实现 SVG Tiny 1.2 中的下列特性：</p>

    <ul class=brief><li><code>vector-effect</code> 属性的 <code>non-scaling-stroke</code> 值<li>所有 SVG 元素允许 <code>class</code> 属性<li>可见 SVG 元素允许 <code>tabindex</code> 属性<li>所有 SVG 元素允许 ARIA 可访问性属性</ul>

    <p>下列特性定义在 SVG 标准中：</p>

    <ul class=brief><li><dfn id=svgimageelement><a href=https://www.w3.org/TR/SVG11/struct.html#InterfaceSVGImageElement><code>SVGImageElement</code></a></dfn> 接口<li><dfn id=svgscriptelement><a href=https://www.w3.org/TR/SVG11/script.html#InterfaceSVGScriptElement><code>SVGScriptElement</code></a></dfn> 接口<li><dfn id=svgsvgelement><a href=https://www.w3.org/TR/SVG11/struct.html#InterfaceSVGSVGElement><code>SVGSVGElement</code></a></dfn> 接口<li><dfn id=svg-desc><a href=https://www.w3.org/TR/SVG11/struct.html#DescElement>SVG <code>desc</code></a></dfn> 元素<li><dfn id=svg-foreignobject><a href=https://www.w3.org/TR/SVG11/extend.html#ForeignObjectElement>SVG <code>foreignObject</code></a></dfn> 元素<li><dfn id=svg-image><a href=https://www.w3.org/TR/SVG11/struct.html#ImageElement>SVG <code>image</code></a></dfn> 元素<li><dfn id=svg-script><a href=https://www.w3.org/TR/SVG11/script.html#ScriptElement>SVG <code>script</code></a></dfn> 元素<li><dfn id=svg-svg><a href=https://www.w3.org/TR/SVG11/struct.html#SVGElement>SVG <code>svg</code></a></dfn> 元素<li><dfn id=svg-title><a href=https://www.w3.org/TR/SVG11/struct.html#TitleElement>SVG <code>title</code></a></dfn> 元素<li><dfn id=svg-use><a href=https://www.w3.org/TR/SVG11/struct.html#UseElement>SVG <code>use</code></a></dfn> 元素</ul>
   <dt>滤镜效果<dd>
    <p>下列特性定义在 <cite>Filter Effects</cite> 标准中：<a href=references.html#refsFILTERS>[FILTERS]</a></p>

    <ul class=brief><li><dfn id=filter-function-list><a href=https://drafts.fxtf.org/filters/#typedef-filter-function-list>&lt;filter-function-list></a></dfn></ul>
   <dt>Worklets<dd>
    <p>下列特性定义在 <cite>Worklets</cite> 标准中：<a href=#refsWORKLETS>[WORKLETS]</a></p>

    <ul class=brief><li><dfn id=workletglobalscope><a href=https://drafts.css-houdini.org/worklets/#workletglobalscope><code>WorkletGlobalScope</code></a></dfn></ul>
   </dl>

  <hr>

  <p>本标准没有 <em>要求</em> 支持任何一种网络协议，样式表语言，脚本语言，或上述列表之外的任何 DOM 规范。
  但本标准定义的语言偏向于使用 CSS 作为样式语言，JavaScript 作为脚本语言，HTTP 作为网络协议，以及假设那些语言和协议在用的一些特性。</p>

  <p>实现了 HTTP 的用户代理必须也实现 <cite>HTTP State Management Mechanism</cite>（Cookies）。 <a href=references.html#refsHTTP>[HTTP]</a> <a href=references.html#refsCOOKIES>[COOKIES]</a></p>

  <p class=note>本标准在相应的章节中可能对字符编码、图片格式、音频格式和视频格式有附加的要求。</p>

  </div>




  <h4 id=可扩展性-2>2.1.9 可扩展性<a href=#可扩展性-2 class=self-link></a></h4>

  <p>强烈不鼓励本规范的厂商专有的用户代理扩展。 文档不能使用这样的扩展，因为这样做减少了互操作性并且分割了用户群，只允许特定用户代理的用户访问相关内容。</p>

  

  <p>所有扩展的定义必须使得，扩展的使用既不会违反本标准，也不会导致本标准定义的功能的不一致。</p> 

  <div class=example>

   <p>例如（强烈不鼓励这样做）实现上可以为控件添加一个新的 IDL 属性
   "<code>typeTime</code>"  返回（比如）用户选择控件的当前值所花费的时间。
   另一方面，在表单的 <code id=可扩展性-2:dom-form-elements><a href=forms.html#dom-form-elements>elements</a></code> 数组中定义一个新的控件也会违反上述要求，
   因为它将违反本标准给出的 <code id=可扩展性-2:dom-form-elements-2><a href=forms.html#dom-form-elements>elements</a></code> 定义。</p>

  </div>

  

  <hr>

  <p>当本标准需要厂商中立的扩展时，或者相应地更新本标准，或者编写一个扩展标准并重写本标准中的要求。
  如果有人在他的活动中使用了本标准，并决定识别该扩展标准的要求，这一标准就变成了本标准中符合性要求的
  <dfn id=other-applicable-specifications>适用规范</dfn>。</p>

  <p class=note>有人可能会编写一个规范来定义任意的字节流为合规的，然后声明他的随机产生的垃圾为符合规范的。
  但是这并不意味着他的随机垃圾符合所有人的目的：如果有人认为该标准不适用于他的工作，
  他就可以很合理地说上述随机垃圾就是垃圾，根本不符合规范。
  就符合性而言，（某一特定）社区内 <em>同意</em> 适用才是最重要的。</p>

  

  <hr>

  <p>用户代理必须将它们不理解的原始和属性当作语义中立的来处理；
  （DOM 处理器）把它们留在 DOM 中，（CSS 处理器）根据 CSS 设置它们的样式，
  但不要推测它们的语义。</p>


  <p>当功能的支持被禁用时（例如作为减轻安全问题的紧急措施或协助开发或出于性能原因），
  用户代理的表现必须像不支持该功能一样，像本标准没提到该功能一样。
  例如，如果某个特性是通过 Web IDL 接口的属性来访问的，实现该接口的对象将会忽略掉这个属性
  — 把属性留在对象上，让它返回 null 或抛出异常是不够的。</p>


  


  

  <h4 id=interactions-with-xpath-and-xslt>2.1.10 与 XPath 和 XSLT 交互<a href=#interactions-with-xpath-and-xslt class=self-link></a></h4><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=18460" title="Need to violate XSLT spec to correctly produce <br>">18460</a></div>

  <p id=xpath-1.0-processors>
  操作以本标准的方式解析或创建的 <a href=https://dom.spec.whatwg.org/#html-document id=interactions-with-xpath-and-xslt:html-documents data-x-internal=html-documents>HTML 文档</a>
  （例如作为 <code>document.evaluate()</code> API 的一部分）
  的 XPath 1.0 的实现必须在 XPath 1.0 标准的基础上遵循以下改动。</p>

  <p>首先，移除这一段话：</p>

  <blockquote cite=https://www.w3.org/TR/1999/REC-xpath-19991116/#node-tests>

   <p>节点测试中的 <a href=https://www.w3.org/TR/REC-xml-names/#NT-QName>QName</a>
   使用表达式上下文的命名空间声明展开为
   <a href=https://www.w3.org/TR/1999/REC-xpath-19991116/#dt-expanded-name>expanded-name</a>，
   展开的方式与开始和结束标签的元素类型名称一样，但是不使用以
   <code>xmlns</code> 声明的默认命名空间：如果
   <a href=https://www.w3.org/TR/REC-xml-names/#NT-QName>QName</a> 没有前缀，那么命名空间 URI 就是 null
   （这与属性名的展开方式相同）。
   如果 <a href=https://www.w3.org/TR/REC-xml-names/#NT-QName>QName</a> 的命名空间前缀
   在表达式上下文中没有声明将会引发错误。</p>

  </blockquote>

  <p>然后，在同样的位置插入下面一段：</p>

  <blockquote cite="https://www.w3.org/Bugs/Public/show_bug.cgi?id=7059#c37">

   <p>节点测试中的 QName 使用表达式上下文的命名空间声明展开为 expanded-name。
   如果 QName 有前缀，则该前缀必须在表达式上下文中有一个 URI 与之关联的命名空间声明，
   且相应的。
   如果 <a href=https://www.w3.org/TR/REC-xml-names/#NT-QName>QName</a> 的命名空间前缀
   在表达式上下文中没有声明将会引发错误。</p>

   <p>如果 QName 没有前缀且轴的主节点类型为元素，那么使用默认的元素命名空间。
   否则，如果 QName 没有前缀，命名空间 URI 就是 null。
   默认的元素命名空间是 XPath 表达式的上下文中的成员。
   按照 DOM3 XPath API 执行 XPath 表达式时，默认的元素命名空间的值由以下方式决定：</p>

   <ol><li>如果上下文节点来自 HTML DOM，默认元素命名空间是 "http://www.w3.org/1999/xhtml"。<li>否则，默认元素命名空间 URI is null。</ol>

   <p class=note>这相当于将 XPath 2.0 的默认元素命名空间特性添加到 XPath 1.0，
   并将 HTML 命名空间用作 HTML 文档的默认元素命名空间。这样做是希望实现兼容于遗留的 HTML 内容的同时，
   支持本标准在 HTML 元素命名空间方面引入的变更，以及希望使用 XPath 1.0 而不是 XPath 2.0。</p>

  </blockquote>

  <p class=note>这一变更的 <a href=introduction.html#willful-violation id=interactions-with-xpath-and-xslt:willful-violation>有意的违反</a> XPath 1.0 标准，
  这样做是希望实现兼容于遗留内容的同时支持本标准在 HTML 元素命名空间方面引入的变更。
  <a href=references.html#refsXPATH10>[XPATH10]</a></p> 

  <hr>

  <p id=dom-based-xslt-1.0-processors>当输出方法为 "html" 时（显式地设置或采用了 XSLT 1.0 的默认规则），
  XSLT 1.0 处理器的 DOM 输出受一下规则的影响：</p>

  <p>如果转换程序输出没有命名空间的元素，
  处理器必须在构造相应的 DOM 元素节点之前将元素的命名空间更改为
  <a href=https://infra.spec.whatwg.org/#html-namespace id=interactions-with-xpath-and-xslt:html-namespace-2 data-x-internal=html-namespace-2>HTML 命名空间</a>，
  将局部名称
  <a href=https://infra.spec.whatwg.org/#ascii-lowercase id=interactions-with-xpath-and-xslt:converted-to-ascii-lowercase data-x-internal=converted-to-ascii-lowercase>改为 ASCII 小写</a>，
  并且把元素上无命名空间的属性名
  <a href=https://infra.spec.whatwg.org/#ascii-lowercase id=interactions-with-xpath-and-xslt:converted-to-ascii-lowercase-2 data-x-internal=converted-to-ascii-lowercase>改为 ASCII 小写</a>。</p>

  <p class=note>本要求是 XSLT 1.0 标准的 <a href=introduction.html#willful-violation id=interactions-with-xpath-and-xslt:willful-violation-2>故意违反</a>，
  本标准为了兼容基于 DOM 的 XSLT 转换，而改变了 HTML 的命名空间和大小写敏感性规则。
  （不影响序列化该输出的处理器） <a href=references.html#refsXSLT10>[XSLT10]</a></p> 

  <hr>

  <p>本标准不指定 XSLT 处理具体如何与 <a href=syntax.html#html-parser id=interactions-with-xpath-and-xslt:html-parser>HTML 解析器</a> 基础设施交互
  （例如，XSLT 处理器是否将所有元素放到 <a href=syntax.html#stack-of-open-elements id=interactions-with-xpath-and-xslt:stack-of-open-elements>打开元素栈</a> 中）。
  但是当成功地完成后，XSLT 处理器必须 <a href=syntax.html#stop-parsing id=interactions-with-xpath-and-xslt:stop-parsing>停止解析</a>，
  也必须首先将 <a href=dom.html#current-document-readiness id=interactions-with-xpath-and-xslt:current-document-readiness>当前文档就绪状态</a> 设置为
  "<code>interactive</code>"，在退出后再设置为 "<code>complete</code>"。</p>

  <hr>

  <p>本标准不指定 XSLT 如何与 <a href=browsers.html#navigate id=interactions-with-xpath-and-xslt:navigate>导航</a> 算法进行交互，
  如何与 <a href=webappapis.html#event-loop id=interactions-with-xpath-and-xslt:event-loop>事件循环</a> 相匹配，
  也不指定错误页面如何处理（例如 XSLT 错误是替代 XSLT 增量输出，还是内联呈现等等）。</p>

  <p class=note>
  <a href=scripting.html#scriptTagXSLT>在 <code>script</code> 元素部分</a>，有一些关于 XSLT 与 HTML 之间交互的非规范性注释，
  <a href=scripting.html#template-XSLT-XPath>在 <code>template</code> 元素部分</a> 有一些关于 XSLT，XPath，和 HTML 之间交互的非规范性注释。</p>

  




  <h3 id=区分大小写和字符串比较>2.2 区分大小写和字符串比较<a href=#区分大小写和字符串比较 class=self-link></a></h3>

  <p>使用<dfn id=case-sensitive data-export="">case-sensitive</dfn>的方式来比较两个字符串意味着逐代码点、精确地比较它们。</p>

  <p>除非特殊申明，字符串比较必须<a href=#case-sensitive id=区分大小写和字符串比较:case-sensitive>case-sensitive</a>（区分大小写）。</p>

  <p>当字符串 <var>s</var> 不长于字符串 <var>pattern</var> 时，将字符串 <var>s</var> 截断到 <var>pattern</var> 的长度时，两个字符串彼此匹配。这被称为<dfn id=prefix-match>prefix match</dfn>（前缀匹配）。</p>



  <h3 id=公共微语法>2.3 公共微语法<a href=#公共微语法 class=self-link></a></h3>

  <p>HTML 中有很多地方接受特定的数据类型，比如日期和数字。
  这一部分描述了那些类型的内容应符合的标准，以及如何解析它们。</p>

  

  <p class=note>强烈要求实现者仔细地检查考虑用来实现如下语法解析的第三方库。
  例如，日期库实现的错误处理行为可能与本标准所要求的不同。
  因为在描述类似本标准使用的日期语法的其他标准中，通常没有给出错误处理行为，
  所以实现的错误处理可能很不一样。</p>

  


  

  <h4 id=常见的解析器风格>2.3.1 常见的解析器风格<a href=#常见的解析器风格 class=self-link></a></h4>

  

  <p><dfn id=white_space>空格字符</dfn> 是
  在 Unicode <code>PropList.txt</code> 数据文件中
  Unicode 属性为 "White_Space" 的字符。<a href=references.html#refsUNICODE>[UNICODE]</a></p>

  <p class=note>不要与 <code>Unicode.txt</code> 数据文件中
  "Bidi_Class" 属性的 "White_Space" 值（缩写为 "WS"）相混淆。</p>

  

  <p>有些下面描述的微解析器遵循这样的模式：维护一个 <var>input</var>
  变量保存待解析字符串，以及一个 <var>position</var> 变量指向 <var>input</var> 中下一个要解析的字符。</p>

  



  <h4 id=布尔属性>2.3.2 布尔属性<a href=#布尔属性 class=self-link></a></h4>

  <p>有些属性是 <dfn id=boolean-attribute>布尔属性</dfn>。
  布尔属性出现在元素上表示值为 true，不出现表示表示值为 false。</p>

  <p>如果该属性出现，它的值必须为空字符串或者匹配属性的标准名称的
  <a href=https://infra.spec.whatwg.org/#ascii-case-insensitive id=布尔属性:ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII 大小写不敏感</a> 字符串，
  并且前后没有空格。</p>

  <p class=note>布尔属性上不允许 "true" 和 "false" 值。
  为了表示 false 值，应该一并忽略该属性。</p>

  <div class=example>

   <p>这里有一个例子，表示复选框被选中和禁用。
   <code id=布尔属性:attr-input-checked><a href=forms.html#attr-input-checked>checked</a></code> 和
   <code id=布尔属性:attr-fe-disabled><a href=forms.html#attr-fe-disabled>disabled</a></code> 属性就是布尔属性。</p>

   <pre>&lt;label>&lt;input type=checkbox checked name=cheese disabled> Cheese&lt;/label></pre>

   <p>这可以等价地写成：

   <pre>&lt;label>&lt;input type=checkbox checked=checked name=cheese disabled=disabled> Cheese&lt;/label></pre>

   <p>你也可以混合两种风格；下面的写法仍然是等价的：</p>

   <pre>&lt;label>&lt;input type='checkbox' checked name=cheese disabled=""> Cheese&lt;/label></pre>

  </div>



  <h4 id=关键字和枚举属性>2.3.3 关键字和枚举属性<a href=#关键字和枚举属性 class=self-link></a></h4>

  <p>有些属性定义为取值只能是有限的关键字集合中的一个。
  这样的属性称为 <dfn id=enumerated-attribute>枚举属性</dfn>。
  这些关键字都定义为映射到特定的状态 <em>state</em> （可能多个关键字映射到同一个状态，
  此时这些关键字互为同义词；此外有些关键字其实是不合规范的，它们在还在这里完全是历史原因）。
  除此之外可以给出两个默认状态：第一个是 <dfn id=invalid-value-default><i>非法值的默认状态</i></dfn>，
  第二个是 <dfn id=missing-value-default><i>缺失值的默认状态</i></dfn>。</p>

  <p>如果指定了枚举属性，属性值必须是一个匹配其中一个关键字（不包括不合规范）的
  <a href=https://infra.spec.whatwg.org/#ascii-case-insensitive id=关键字和枚举属性:ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII 大小写不敏感</a> 字符串，并且前后没有空格。</p>

  <p>指定属性时，如果它的值是匹配其中一个关键字的 <a href=https://infra.spec.whatwg.org/#ascii-case-insensitive id=关键字和枚举属性:ascii-case-insensitive-2 data-x-internal=ascii-case-insensitive>ASCII 大小写不敏感</a> 字符串
  那么该属性表示的状态就是该关键字的状态。如果属性值不匹配任何给定的关键字，但该属性有一个
  <i id=关键字和枚举属性:invalid-value-default><a href=#invalid-value-default>非法值的默认状态</a></i>，那么该属性表示那个状态。
  否则如果该属性的值不匹配任何关键字但定义有一个 <i id=关键字和枚举属性:missing-value-default><a href=#missing-value-default>缺失值的默认状态</a></i>，
  那么该属性表示的状态就是 <em>那个状态</em>。否则，没有默认状态的情况，
  非法值不表示任何状态。</p>

  <p>当 <em>没有</em> 指定属性时，如果定义有 <i id=关键字和枚举属性:missing-value-default-2><a href=#missing-value-default>缺失值的默认状态</a></i>，
  那么这个（缺失）属性表示的状态就是这个状态。否则，
  缺失的属性不表示任何状态。</p>

  <p class=note>空字符串可以是一个合法的关键字。</p>


  <h4 id=数字>2.3.4 数字<a href=#数字 class=self-link></a></h4>

  <h5 id=有符号整数>2.3.4.1 有符号整数<a href=#有符号整数 class=self-link></a></h5>

  <p>由一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=有符号整数:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a> 组成的字符串就是 <dfn id=valid-integer>合法的整数</dfn>。
  可以有一个 U+002D HYPHEN-MINUS 字符 （-） 作为前缀。</p>

  <p>没有 U+002D HYPHEN-MINUS 字符 （-） 作为前缀的 <a href=#valid-integer id=有符号整数:valid-integer>合法整数</a> 表示
  该数字字符串以 10 为基所表示的数字。
  <em>有着</em> U+002D HYPHEN-MINUS 字符 （-） 作为前缀的 <a href=#valid-integer id=有符号整数:valid-integer-2>合法的整数</a>
  表示零减去该字符串以 10 为基所表示的数字。</p>

  

  <p><dfn id=rules-for-parsing-integers>解析整数的规则</dfn> 由下列算法给出。
  被调用时，必须以给定的步骤执行，在第一个有返回值的步骤中止。该算法会返回一个整数或者一个错误。</p>

  <ol><li><p>令 <var>input</var> 为被解析的字符串。<li><p>令 <var>position</var> 为 <var>input</var> 里面的指针，初始指向字符串的开始。<li><p>令 <var>sign</var> 拥有值 "positive"。<li><p><a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=有符号整数:skip-ascii-whitespace data-x-internal=skip-ascii-whitespace>跳过</a> <var>input</var> 中的 ASCII 空格，得到 <var>position</var>。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，返回一个错误。<li>

    <p>如果 <var>position</var> 处的（第一个）字符是一个 U+002D HYPHEN-MINUS 字符 （-）:</p>

    <ol><li>令 <var>sign</var> 为 "negative"。<li>将 <var>position</var> 前进到下一个字符。<li>如果 <var>position</var> 越过了 <var>input</var> 的末尾，返回一个错误。</ol>

    <p>否则，如果 <var>position</var> 处的（第一个）字符是一个 U+002B PLUS SIGN 字符 （+）:</p>

    <ol><li>将 <var>position</var> 前进到下一个字符。 （虽然 "<code>+</code>" 会被忽略但并不符合规范。）<li>如果 <var>position</var> 越过了 <var>input</var> 的末尾，返回一个错误。</ol>

   <li><p>如果 <var>position</var> 处的字符不是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=有符号整数:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a>，则返回一个错误。<li><p>从 <var>input</var> 的给定 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=有符号整数:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a>
     是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=有符号整数:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a> 的代码点序列，将得到的序列解释为以10为基的整数。
     令 <var>value</var> 为该整数。<li><p>如果 <var>sign</var> 为 "positive"，返回 <var>value</var>，否则返回0减去 <var>value</var> 的结果。</ol>

  


  <h5 id=非负整数>2.3.4.2 非负整数<a href=#非负整数 class=self-link></a></h5>

  <p>由一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=非负整数:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a> 组成的字符串就是
  <dfn id=valid-non-negative-integer>合法的非负整数</dfn>
  。</p>

  <p>
  <a href=#valid-non-negative-integer id=非负整数:valid-non-negative-integer>合法的非负整数</a>
  表示该数字字符串以10为基所表示的数字。</p>

  

  <p><dfn id=rules-for-parsing-non-negative-integers>解析非负整数的规则</dfn>
  由以下算法给出，被调用时该算法必须按顺序执行以下步骤，在第一个有返回值的步骤中止。
  该算法将返回 0，正整数或者错误。</p>

  <ol><li><p>令 <var>input</var> 为被解析的字符串。<li><p>令 <var>value</var> 为使用
   <a href=#rules-for-parsing-integers id=非负整数:rules-for-parsing-integers>解析整数的规则</a>
   解析 <var>input</var> 的结果。<li><p>如果 <var>value</var> 是一个错误, 返回一个错误。<li><p>如果 <var>value</var> 小于零, 返回一个错误。<li><p>返回 <var>value</var>。</ol>

  

  


  <h5 id=浮点数>2.3.4.3 浮点数<a href=#浮点数 class=self-link></a></h5>

  <p><dfn id=valid-floating-point-number>合法的浮点数</dfn> 这样构成：</p>

  <ol class=brief><li>一个可选的 U+002D HYPHEN-MINUS 字符（-）。<li>下面的其中一个或者依次的两个：

    <ol><li>一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a> 组成的序列。<li>依次出现：

      <ol><li>单个 U+002E FULL STOP 字符（.）。<li>一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a> 组成的序列。</ol>

     </ol>

   <li>可选地：

    <ol><li>一个 U+0065 LATIN SMALL LETTER E 字符（e）或 U+0045 LATIN CAPITAL LETTER E
     字符（E）。<li>可选地，一个 U+002D HYPHEN-MINUS 字符（-） 或 U+002B PLUS SIGN 字符 （+）。<li>一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a> 组成的序列。</ol>

   </ol>

  <p><a href=#valid-floating-point-number id=浮点数:valid-floating-point-number>合法的浮点数</a> 表示将有效数乘以10的指数。
  其中有效数是第一个数字，按十进制解析（包括小数点和小数点后的数字，如果后面有的话）
  如果整个字符串以 U+002D HYPHEN-MINUS character （-）字符开始且该数字不为零的话，
  将有效数解析为负数。
  其中指数是 E 后面的数字（如果有的话），如果在 E 和该数字之间有一个 U+002D HYPHEN-MINUS 字符（-）
  且该数字不为零的话，解析为负数，如果在 E 和该数字之间有一个 U+002B PLUS SIGN 字符（+）的话忽略该字符。
  如果没有 E，指数当做零来处理。</p>

  <p class=note>Infinity 和 Not-a-Number （NaN）值不是
  <a href=#valid-floating-point-number id=浮点数:valid-floating-point-number-2>合法的浮点数</a>
  。</p>

  

  <p class=note>典型地，
  <a href=#valid-floating-point-number id=浮点数:valid-floating-point-number-3>合法的浮点数</a>
  的概念只用于限制作者，对用户代理的要求采用下面的
  <a href=#rules-for-parsing-floating-point-number-values id=浮点数:rules-for-parsing-floating-point-number-values>解析浮点数值的规则</a>
  （例如，<code id=浮点数:the-progress-element><a href=forms.html#the-progress-element>progress</a></code> 元素的 <code id=浮点数:attr-progress-max><a href=forms.html#attr-progress-max>max</a></code> 属性）。
  然而，在某些情况下要求用户代理检查字符串是否是
  <a href=#valid-floating-point-number id=浮点数:valid-floating-point-number-4>合法的浮点数</a>（例如，
  <a href="forms.html#number-state-(type=number)" id="浮点数:number-state-(type=number)">Number</a> 状态的 <code id=浮点数:the-input-element><a href=forms.html#the-input-element>input</a></code> 元素的
  <a href=forms.html#value-sanitization-algorithm id=浮点数:value-sanitization-algorithm>值清理算法</a>，或者
  <a href=embedded-content.html#parse-a-srcset-attribute id=浮点数:parse-a-srcset-attribute>解析 srcset 属性</a> 算法）。</p>

  <p><dfn id=best-representation-of-the-number-as-a-floating-point-number>
  浮点数的最佳表示 <var>n</var></dfn> 是
  运行 <a id=浮点数:tostring href=https://tc39.github.io/ecma262/#sec-tostring data-x-internal=tostring>ToString</a>（<var>n</var>）得到的字符串。
  <a id=浮点数:tostring-2 href=https://tc39.github.io/ecma262/#sec-tostring data-x-internal=tostring>ToString</a> 抽象方法不是唯一确定的。如果在特定的值上运行 <a id=浮点数:tostring-3 href=https://tc39.github.io/ecma262/#sec-tostring data-x-internal=tostring>ToString</a>
  可能得到多个字符串，用户代理必须对那个值总是返回同样的字符串
  （虽然它可能和其他用户代理使用的值不同）。</p>

  <p><dfn id=rules-for-parsing-floating-point-number-values data-export="">
  解析浮点数值的规则</dfn> 由以下算法给出。
  该算法必须在第一个有返回值的步骤中止。
  该算法将会返回一个数字或者错误。</p>

  <ol><li><p>令<var>input</var> 为被解析的字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针，初始指向字符串的开始。<li><p>令<var>value</var> 的值为 1。<li><p>令<var>divisor</var> 的值为 1。<li><p>令<var>exponent</var> 的值为 1。<li><p><a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=浮点数:skip-ascii-whitespace data-x-internal=skip-ascii-whitespace>跳过</a> <var>input</var> 中的 ASCII 空格，得到 <var>position</var>。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，返回一个错误。<li>

    <p>如果 <var>position</var> 处的（第一个）字符是一个 U+002D HYPHEN-MINUS 字符 （-）:</p>

    <ol><li>将 <var>value</var> 和 <var>divisor</var> 改为 −1。<li>将 <var>position</var> 前进到下一个字符。<li>如果 <var>position</var> 越过了 <var>input</var> 的末尾，返回一个错误。</ol>

    <p>否则，如果 <var>position</var> 处的（第一个）字符是一个 U+002B PLUS SIGN 字符 （+）：</p>

    <ol><li>将 <var>position</var> 前进到下一个字符。 （虽然 "<code>+</code>" 会被忽略但并不符合规范。）<li>如果 <var>position</var> 越过了 <var>input</var> 的末尾，返回一个错误。</ol>

   <li><p>如果 <var>position</var> 处的字符是 U+002E FULL STOP （.），且不是
   <var>input</var> 的最后一个字符，
   而且 <var>position</var> 表示的字符的后一个字符是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits-4 data-x-internal=ascii-digits>ASCII 数字</a>，
   则将 <var>value</var> 设置为零并跳到 <i>fraction</i> 标记的步骤。</p> 

   <li><p>如果 <var>position</var> 处的数字不是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits-5 data-x-internal=ascii-digits>ASCII 数字</a>，
   则返回一个错误。<li><p>从 <var>input</var> 的给定 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=浮点数:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a>
     是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits-6 data-x-internal=ascii-digits>ASCII 数字</a> 的代码点序列，将得到的序列解释为以10为基的整数。
     将 <var>value</var> 乘以该整数。<li>如果 <var>position</var> 越过了 <var>input</var> 的末尾，跳到标记为 <i>conversion</i> 的步骤。<li><p><i>Fraction</i>：如果 <var>position</var> 处的数字是 U+002E FULL STOP （.），运行以下子步骤：</p>

    <ol><li><p>将 <var>position</var> 前进到下一个字符。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾或者不是
     <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits-7 data-x-internal=ascii-digits>ASCII 数字</a>、
     U+0065 LATIN SMALL LETTER E （e），或 U+0045 LATIN CAPITAL LETTER E （E），
     跳到 <i>conversion</i> 标记的步骤。<li><p>如果 <var>position</var> 处的字符是 U+0065 LATIN SMALL LETTER E character （e）或
     U+0045 LATIN CAPITAL LETTER E 字符（E），跳过下面的子步骤。</p>

     <li><p><i>Fraction loop</i>： 将 <var>divisor</var> 乘以 10。<li> 按照十进制（0..9）解释 <var>position</var> 处的字符，除以 <var>divisor</var>，
       加到 <var>value</var> 上。<li><p>将 <var>position</var> 前进到下一个字符。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，
       跳到 <i>conversion</i> 标记的步骤。<li><p>如果 <var>position</var> 处的字符是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits-8 data-x-internal=ascii-digits>ASCII 数字</a>，
       跳回到 <i>fraction loop</i> 标记的子步骤。</ol>

   <li><p>如果 <var>position</var> 处的字符是 U+0065 （e）或 U+0045 （E），则：</p>

    <ol><li><p>将 <var>position</var> 前进到下一个字符。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，跳到标记为
     <i>conversion</i> 的步骤。<li>

      <p>如果 <var>position</var> 处的字符是 U+002D HYPHEN-MINUS 字符（-）：</p>

      <ol><li>将 <var>exponent</var> 设置为 −1。<li>将 <var>position</var> 前进到下一个字符。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，跳到标记为
       <i>conversion</i> 的步骤。</ol>

      <p>否则，如果 <var>position</var> 处的字符是 U+002B PLUS SIGN 字符（+）：</p>

      <ol><li>将 <var>position</var> 前进到下一个字符。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，跳到标记为
       <i>conversion</i> 的步骤。</ol>

     <li><p>如果 <var>position</var> 处的字符不是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits-9 data-x-internal=ascii-digits>ASCII 数字</a>，则跳到标记为 <i>conversion</i> 的步骤。<li><p>从 <var>input</var> 的给定 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=浮点数:collect-a-sequence-of-code-points-2 data-x-internal=collect-a-sequence-of-code-points>收集</a>
     是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits-10 data-x-internal=ascii-digits>ASCII 数字</a> 的代码点序列，将得到的序列解释为以 10 为基的整数。
     将 <var>exponent</var> 乘以该整数。<li><p>将 <var>value</var> 乘以 10 的 <var>exponent</var> 指数。</ol>

   <li><p><i>Conversion</i>： 令<var>S</var> 为 IEEE 754 双精度浮点数值的有限集，
   −0 除外，但新增 2<sup>1024</sup> 和 −2<sup>1024</sup> 两个值。<li><p>令<var>rounded-value</var> 为 <var>S</var> 最接近 <var>value</var> 的数字，
   如果有两个同样接近的数值，则选择有效数为奇数的数字。
   （在这个处理中，2<sup>1024</sup> 和 −2<sup>1024</sup>
   这两个特殊值应视为有奇数的有效数。）<li><p>如果 <var>rounded-value</var> 是 2<sup>1024</sup> 或 −2<sup>1024</sup>，返回错误。<li><p>返回 <var>rounded-value</var>。</ol>

  



  <h5 id=percentages-and-dimensions>2.3.4.4 百分数和长度<a href=#percentages-and-dimensions class=self-link></a></h5>

  <p><dfn id=rules-for-parsing-dimension-values>解析维度值的规则</dfn>
  由下面算法给出。被调用时必须按给定顺序执行这些步骤，并在第一个有返回值的步骤中止。
  本算法将会返回一个大于等于 0.0 的数字，或者一个错误；如果返回了数字，
  那么它可能是百分数或者长度。</p>

  <ol><li><p>令<var>input</var> 为被解析的字符串。<li><p>令<var>position</var> 为 <var>input</var> 中的指针，初始指向字符串的开始。<li><p><a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=percentages-and-dimensions:skip-ascii-whitespace data-x-internal=skip-ascii-whitespace>跳过</a> <var>input</var> 中的 ASCII 空格，得到 <var>position</var>。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，返回一个错误。<li><p>如果 <var>position</var> 处的字符是一个 U+002B PLUS SIGN 字符 （+），
   将 <var>position</var> 前进到下一个字符</p>。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，返回一个错误。<li><p>如果 <var>position</var> 处的字符不是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=percentages-and-dimensions:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a>，则返回一个错误。<li><p>从 <var>input</var> 的给定 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=percentages-and-dimensions:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a>
   是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=percentages-and-dimensions:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a> 的代码点序列，将得到的序列解释为以 10 为基的整数。
   令 <var>value</var> 为该整数。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，将 <var>value</var> 作为长度返回。<li>

    <p>如果 <var>position</var> 处的字符是 U+002E FULL STOP character （.）：</p>

    <ol><li><p>将 <var>position</var> 前进到下一个字符。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，或者 <var>position</var>
     处的字符不是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=percentages-and-dimensions:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a>，则将 <var>value</var> 作为长度返回。<li><p>令<var>divisor</var> 值为 1。<li><p><i>Fraction loop</i>：将 <var>divisor</var> 乘以 10。<li> 按照十进制（0..9）解释 <var>position</var> 处的字符，除以 <var>divisor</var>，
     加到 <var>value</var> 上。<li><p>将 <var>position</var> 前进到下一个字符。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，则将 <var>value</var> 作为长度返回。<li><p>如果 <var>position</var> 处的字符是一个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=percentages-and-dimensions:ascii-digits-4 data-x-internal=ascii-digits>ASCII 数字</a>，
     返回到标记为 <i>fraction loop</i> 的子步骤。</ol>

   <li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，则将 <var>value</var> 作为长度返回。<li><p>如果 <var>position</var> 处的字符是 U+0025 PERCENT SIGN character（%）,
   将 <var>value</var> 作为百分数返回。<li><p>将 <var>value</var> 作为长度返回。</ol>

  <h5 id=非零百分数和长度>2.3.4.5 非零百分数和长度<a href=#非零百分数和长度 class=self-link></a></h5>

  <p><dfn id=rules-for-parsing-non-zero-dimension-values>解析非零维度值的规则</dfn>
  由下列算法给出。被调用时必须按给定顺序执行这些步骤，并在第一个有返回值的步骤中止。
  本算法将会返回一个大于 0.0 的数字或者一个错误；如果返回了数字，
  那么它可能是百分数或者长度。</p>

  <ol><li><p>令<var>input</var> 为被解析的字符串。<li><p>令<var>value</var> 为使用
   <a href=#rules-for-parsing-dimension-values id=非零百分数和长度:rules-for-parsing-dimension-values>解析维度值的规则</a>
   解析 <var>input</var> 的结果。<li><p>如果 <var>value</var> 是一个错误，返回一个错误。<li><p>如果 <var>value</var> 为 0，返回一个错误。<li><p>如果 <var>value</var> 为百分数，将 <var>value</var> 作为百分数返回。<li><p>将 <var>value</var> 作为长度返回。</ol>

  


  <h5 id=浮点数列表>2.3.4.6 浮点数列表<a href=#浮点数列表 class=self-link></a></h5>

  <p><dfn id=valid-list-of-floating-point-numbers>合法的浮点数列表</dfn>
  是以 U+002C COMMA 字符分隔的 <a href=#valid-floating-point-number id=浮点数列表:valid-floating-point-number>合法浮点数</a> ,
  且没有其他字符（比如 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=浮点数列表:space-characters data-x-internal=space-characters>ASCII 空格</a>）。
  此外，可能会有浮点数个数限制，或者取值范围限制。</p>

  

  <p><dfn id=rules-for-parsing-a-list-of-floating-point-numbers>解析浮点数列表的规则</dfn> 如下：</p>

  <ol><li><p>令<var>input</var> 为被解析的字符串。<li><p>令<var>position</var> 为 <var>input</var> 中的指针，初始指向字符串的开始。<li><p>令<var>numbers</var> 为空的浮点数列表。该列表将会是本算法的结果。<li><p>从 <var>input</var> 的给定 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=浮点数列表:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a>
   是 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=浮点数列表:space-characters-2 data-x-internal=space-characters>ASCII 空格</a>,
   U+002C COMMA，或者 U+003B SEMICOLON 字符的代码点序列。
   本步骤跳过了所有前导分隔符。<li><p>当 <var>position</var> 没有越过 <var>input</var> 的末尾时：</p>

    <ol><li><p>从 <var>input</var> 的给定 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=浮点数列表:collect-a-sequence-of-code-points-2 data-x-internal=collect-a-sequence-of-code-points>收集</a> 不是
     <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=浮点数列表:space-characters-3 data-x-internal=space-characters>ASCII 空格</a>,
     U+002C COMMA，U+003B SEMICOLON，
     <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数列表:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a>，
     U+002E FULL STOP, 或 U+002D HYPHEN-MINUS 字符的代码点序列。
     本步骤跳过了前导的无用字符。<li><p>从 <var>input</var> 的给定 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=浮点数列表:collect-a-sequence-of-code-points-3 data-x-internal=collect-a-sequence-of-code-points>收集</a>
     不是 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=浮点数列表:space-characters-4 data-x-internal=space-characters>ASCII 空格</a>,
     U+002C COMMA，或者 U+003B SEMICOLON 字符的代码点序列，令
     <var>unparsed number</var> 为收集的结果。<li><p>令<var>number</var> 为使用
     <a href=#rules-for-parsing-floating-point-number-values id=浮点数列表:rules-for-parsing-floating-point-number-values>解析浮点数值的规则</a>
     解析 <var>unparsed number</var> 的结果。<li><p>如果 <var>number</var> 是一个错误，将 <var>number</var> 设置为 0。<li><p>将 <var>number</var> 添加到 <var>numbers</var>。<li><p>从 <var>input</var> 的给定 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=浮点数列表:collect-a-sequence-of-code-points-4 data-x-internal=collect-a-sequence-of-code-points>收集</a>
     是 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=浮点数列表:space-characters-5 data-x-internal=space-characters>ASCII 空格</a>,
     U+002C COMMA，或者 U+003B SEMICOLON 字符的代码点序列。
     本步骤跳过了分隔符。</ol>

   <li><p>返回 <var>numbers</var>。</ol>

  

  

  <h5 id=维度值列表>2.3.4.7 维度值列表<a href=#维度值列表 class=self-link></a></h5>

  

  <p><dfn id=rules-for-parsing-a-list-of-dimensions>解析维度值列表的规则</dfn> 如下。
  这些规则返回一个由数字或单位组成的偶对列表，包含0个或更多偶对。
  其中的单位是 <i>percentage</i>, <i>relative</i>，和 <i>absolute</i> 之一。</p>

  <ol><li><p>令<var>raw input</var> 为被解析的字符串。<li><p>如果 <var>raw input</var> 的最后一个字符是 U+002C COMMA character（,）,
   则从 <var>raw input</var> 中移除该字符。<li><p><a href=https://infra.spec.whatwg.org/#split-on-commas id=维度值列表:split-a-string-on-commas data-x-internal=split-a-string-on-commas>用逗号分割 <var>raw input</var> 字符串</a>。
   令<var>raw tokens</var> 为得到的标记列表。<li><p>令<var>result</var> 为 number/unit 偶对的空列表。<li>

    <p>对 <var>raw tokens</var> 中的每一个标记，运行以下子步骤：</p>

    <ol><li><p>令<var>input</var> 为该标记。<li><p>令<var>position</var> 为 <var>input</var> 中的指针，初始指向字符串的开始。<li><p>令<var>value</var> 为数字 0。<li><p>令<var>unit</var> 为 <i>absolute</i>。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，将 <var>unit</var> 设为 <i>relative</i> 并跳到最后一个子步骤。<li><p>如果 <var>position</var> 处的字符是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=维度值列表:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a>，
     从 <var>input</var> 的给定 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=维度值列表:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a>
     是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=维度值列表:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a> 的代码点序列，将得到的序列解释为以10为基的整数，
     将 <var>value</var> 递增这个整数。<li>

      <p>如果在 <var>position</var> 处的字符是 U+002E（.），则：</p>

      <ol><li><p>从 <var>input</var> 的给定 <var>position</var>
       <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=维度值列表:collect-a-sequence-of-code-points-2 data-x-internal=collect-a-sequence-of-code-points>收集</a>
       是 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=维度值列表:space-characters data-x-internal=space-characters>ASCII 空格</a> 或
       <a href=https://infra.spec.whatwg.org/#ascii-digit id=维度值列表:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a> 的代码点序列，
       令 <var>s</var> 为得到的结果序列。<li><p>移除 <var>s</var> 中所有的 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=维度值列表:space-characters-2 data-x-internal=space-characters>ASCII 空格</a>。<li>

        <p>如果 <var>s</var> 不是空字符串，则：</p>

        <ol><li><p>令<var>length</var> 为 <var>s</var> 中（移除空格后的）字符数。<li><p>令<var>fraction</var> 为将 <var>s</var> 解释为以10为基的整数后的结果，
         将这个数字除以 <span>10<sup><var>length</var></sup></span>。<li><p>将 <var>value</var> 递增 <var>fraction</var>。</ol>

       </ol>

     <li><p>从给定的 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=维度值列表:skip-ascii-whitespace data-x-internal=skip-ascii-whitespace>跳过 <var>input</var> 中的 ASCII 空白字符</a>。<li>

      <p>如果 <var>position</var> 处的字符是 U+0025 PERCENT SIGN 字符（%）,
      将 <var>unit</var> 设为 <i>percentage</i>。</p>

      <p>否则，如果 <var>position</var> 处的字符是 U+002A ASTERISK 字符（*），
      则将 <var>unit</var> 设为 <i>relative</i>。</p>

     <li><p>在 <var>result</var> 中增加一项，包含由 <var>value</var> 给定的数字，
     以及由 <var>unit</var> 给定的单位。</ol>

   <li><p>返回 <var>result</var> 列表。</ol>

  


  <h4 id=日期和时间>2.3.5 日期和时间<a href=#日期和时间 class=self-link></a></h4>

  <div>在下面的算法中，
  <dfn id=number-of-days-in-month-month-of-year-year>
  <var>year</var> 年 <var>month</var> 月的天数</dfn> 是：
  <ul><li>
      <em>31</em>，如果 <var>month</var> 是 1，3，5，7，8, 10 或 12；
    <li>
      <em>30</em>，如果 <var>month</var> 是 4，6，9 或 11；
    <li>
      <em>29</em>，如果 <var>month</var> 是 2 且 <var>year</var> 可以由 400 整除，或者 <var>year</var> 可以被 4 整除但不能被 100 整除；
    <li>否则为 <em>28</em>。 </ul>
  这考虑了格里历（现行公历）的闰年。<a href=references.html#refsGREGORIAN>[GREGORIAN]</a></div>

  <p>当本部分定义的日期与时间语法中使用了 <a href=https://infra.spec.whatwg.org/#ascii-digit id=日期和时间:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a> 时,
  这些数字表示10进制数。</p>

  

  <p class=note>虽然这里描述的格式旨在成为相应的 ISO8601 格式的子集，但是本规范比 ISO8601 更详细地定义了解析规则。因此，在使用实现者之前，请仔细检查任何日期解析库，然后再使用它们来实现下面描述的解析规则; ISO8601 库可能不会以完全相同的方式解析日期和时间。<a href=references.html#refsISO8601>[ISO8601]</a></p>

  

  <p>本标准中的 <dfn id=proleptic-gregorian-calendar>外推格里历</dfn> 是指现代格里历向前外推到第 1 年。
  <a href=#proleptic-gregorian-calendar id=日期和时间:proleptic-gregorian-calendar>外推格里历</a> 中的日期
  （有时直接称 <dfn id=proleptic-gregorian-date>外推格里历日期</dfn>），
  的指用外推格里历描述的日期，即使当时还没有颁布格里历。 <a href=references.html#refsGREGORIAN>[GREGORIAN]</a></p>

  <p class=note>格里历在本标准中作为连线协议使用并非出于决策者的文化偏好。参考：
  对表单中的 <a href=forms.html#input-author-notes>date，time，和 number 格式</a> 的讨论 （对作者而言），
  <a href=forms.html#input-impl-notes>关于表单控件本地化的实现说明</a>，，
  以及 <code id=日期和时间:the-time-element><a href=semantics.html#the-time-element>time</a></code> 元素。</p>


  <h5 id=月份>2.3.5.1 月份<a href=#月份 class=self-link></a></h5>

  <p><dfn id=concept-month>月份</dfn> 由特定的
  <a href=#proleptic-gregorian-date id=月份:proleptic-gregorian-date>外推格里历日期</a> 组成，
  不包含时区信息，也不包含年和月以上的日的信息。<a href=references.html#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>表示 <var>year</var> 年 <var>month</var> 月的
  <dfn id=valid-month-string>合法的月字符串</dfn>
  包含下列部分（有序）：</p>

  <ol><li>表示 <var>year</var> 年的 4 个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=月份:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a>，
   其中 <var>year</var> > 0<li>一个 U+002D HYPHEN-MINUS 字符（-）<li>表示 <var>month</var> 月的两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=月份:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a>，在范围
   1 ≤ <var>month</var> ≤ 12 之内</ol>

  

  <p><dfn id=parse-a-month-string>解析月字符串</dfn> 的规则如下。将返回年和月，或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p><a href=#parse-a-month-component id=月份:parse-a-month-component>解析月的部分</a> 来获得 <var>year</var> 和 <var>month</var>。
   如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> <em>没有</em> 超出 <var>input</var> 的结尾，则失败。<li><p>返回 <var>year</var> 和 <var>month</var>。</ol>

  <p>给定 <var>input</var> 字符串和位置 <var>position</var>，
  <dfn id=parse-a-month-component>解析月的部分</dfn> 的规则如下。
  将返回年和月，或者什么都不返回。
  如果算法的任何一个步说它 "失败了"，这意味着它在那一步退出并什么都不返回。</p>

  <ol><li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=月份:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=月份:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a>
   组成的代码点序列。 如果收集到的序列不够 4 个字符则失败。
   否则将结果序列解释为 10 进制整数。令那个数为 <var>year</var>。<li><p>如果 <var>year</var> 不是大于0的数字则失败。。<li><p>如果 <var>position</var> 超出了 <var>input</var> 的末尾或者
   <var>position</var> 处的字符不是 U+002D HYPHEN-MINUS 字符，则失败。
   否则将 <var>position</var> 前进一个字符。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=月份:collect-a-sequence-of-code-points-2 data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=月份:ascii-digits-4 data-x-internal=ascii-digits>ASCII 数字</a>
   组成的代码点序列。 如果收集到的序列不是恰好 2 个字符则失败。
   否则将结果序列解释为 10 进制整数。令那个数为 <var>month</var>。<li><p>如果 <var>month</var> 不是 1 ≤ <var>month</var> ≤ 12 范围内的数字就失败。<li><p>返回 <var>year</var> 和 <var>month</var>。</ol>

  


  <h5 id=日期>2.3.5.2 日期<a href=#日期 class=self-link></a></h5>

  <p><dfn id=concept-date>日期</dfn> 由特定的
  <a href=#proleptic-gregorian-date id=日期:proleptic-gregorian-date>外推格里历日期</a> 组成，
  不包含时区信息，由年、月、日组成。<a href=references.html#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>表示 <var>year</var> 年，<var>month</var> 月，<var>day</var> 日的
  <dfn id=valid-date-string>合法的日期字符串</dfn> 由下列几个有序的组成部分：</p>

  <ol><li>表示 <var>year</var> 和 <var>month</var> 的 <a href=#valid-month-string id=日期:valid-month-string>合法的月字符串</a><li>一个 U+002D HYPHEN-MINUS 字符（-）<li>表示 <var>day</var> 的两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=日期:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a>，
   处于范围 1 ≤ <var>day</var> ≤ <var>maxday</var> 内，其中
   <var>maxday</var> 为 <a href=#number-of-days-in-month-month-of-year-year id=日期:number-of-days-in-month-month-of-year-year><var>year</var> 年 <var>month</var> 月的天数</a></ol>

  

  <p><dfn id=parse-a-date-string>解析日期字符串</dfn> 的规则如下。将会返回一个日期或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p><a href=#parse-a-date-component id=日期:parse-a-date-component>解析日期部分</a> 来获得 <var>year</var>，<var>month</var> 和 <var>day</var>。
   如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> <em>没有</em> 超出 <var>input</var> 的结尾，则失败。<li><p>令<var>date</var> 的年月日分别为 <var>year</var>，<var>month</var>，<var>day</var>。<li><p>返回 <var>date</var>。</ol>

  <p>给定 <var>input</var> 字符串和位置 <var>position</var>，
  <dfn id=parse-a-date-component>解析日期部分</dfn> 的规则如下。
  将返回年、月、日，或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p><a href=#parse-a-month-component id=日期:parse-a-month-component>解析月的部分</a> 来获得 <var>year</var> 和 <var>month</var>
   如果它没有返回，则失败。<li><p>令<var>maxday</var> 为 <a href=#number-of-days-in-month-month-of-year-year id=日期:number-of-days-in-month-month-of-year-year-2><var>year</var> 年 <var>month</var> 月的天数</a>。<li><p>如果 <var>position</var> 超出了 <var>input</var> 的末尾或者
   <var>position</var> 处的字符不是 U+002D HYPHEN-MINUS 字符，则失败。
   否则将 <var>position</var> 前进一个字符。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=日期:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=日期:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a>
   组成的代码点序列。 如果收集到的序列不是恰好 2 个字符则失败。
   否则将结果序列解释为 10 进制整数。令那个数为 <var>day</var>。<li><p>如果 <var>day</var> 不是 1 ≤ <var>day</var> ≤ <var>maxday</var> 范围内的数字就失败。<li><p>返回 <var>year</var>，<var>month</var> 和 <var>day</var>。</ol>

  


  <h5 id=无年的日期>2.3.5.3 无年的日期<a href=#无年的日期 class=self-link></a></h5>

  <p>一个
  <dfn id=concept-yearless-date> 无年的日期 </dfn>
  由一个格里历月和该月内的一天组成，但没有关联的年份。<a href=references.html#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>表示 <var>month</var> 月 <var>day</var> 日的
  <dfn id=valid-yearless-date-string>合法的无年日期</dfn> 包含如下有序的部分：</p>

  <ol><li>可选地，两个 U+002D HYPHEN-MINUS 字符 （-）<li>表示 <var>month</var> 月的两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=无年的日期:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a>，在范围
   1 ≤ <var>month</var> ≤ 12 之内<li>一个 U+002D HYPHEN-MINUS 字符 （-）<li>表示 <var>day</var> 的两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=无年的日期:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a>，
   处于范围 1 ≤ <var>day</var> ≤ <var>maxday</var> 内，其中
   <var>maxday</var> 为 <a href=#number-of-days-in-month-month-of-year-year id=无年的日期:number-of-days-in-month-month-of-year-year>
   任意闰年（例如 4 或 2000）的 <var>month</var> 月的天数</a></ol>

  <p class=note>换句话说，如果 <var>month</var> 为 "<code>02</code>"（二月），
  那么可以是 29 日，把这一年当做闰年。</p>

  

  <p><dfn id=parse-a-yearless-date-string>解析无年的日期字符串</dfn> 的规则如下。
  将会返回月和日，或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p><a href=#parse-a-yearless-date-component id=无年的日期:parse-a-yearless-date-component>解析无年的日期部分</a>
   来获得 <var>month</var> 和 <var>day</var>。
   如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> <em>没有</em> 超出 <var>input</var> 的结尾，则失败。<li><p>返回 <var>month</var> 和 <var>day</var>。</ol>

  <p>给定 <var>input</var> 字符串和位置 <var>position</var>，
  <dfn id=parse-a-yearless-date-component>解析无年的日期部分</dfn> 的规则如下。
  将返回月和日，或者什么都不返回。
  如果算法的任何一个步说它 "失败了"，这意味着它在那一步退出并什么都不返回。</p>

  <ol><li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=无年的日期:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a>
   U+002D HYPHEN-MINUS 字符 （-）组成的代码点序列。
   如果收集到的序列长度不是 0 或 2，就失败。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=无年的日期:collect-a-sequence-of-code-points-2 data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=无年的日期:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a>
   组成的代码点序列。 如果收集到的序列长度不是 2 就失败。
   否则将结果序列解释为 10 进制整数。令那个数为 <var>month</var>。<li><p>如果 <var>month</var> 不是 1 ≤ <var>month</var> ≤ 12 范围内的数字就失败。<li><p>令 <var>maxday</var> 为 <a href=#number-of-days-in-month-month-of-year-year id=无年的日期:number-of-days-in-month-month-of-year-year-2>
   任意闰年（例如 4 或 2000）的 <var>month</var> 月的天数</a>。<li><p>如果 <var>position</var> 超出了 <var>input</var> 的末尾或者
   <var>position</var> 处的字符不是 U+002D HYPHEN-MINUS 字符，则失败。
   否则将 <var>position</var> 前进一个字符。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=无年的日期:collect-a-sequence-of-code-points-3 data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=无年的日期:ascii-digits-4 data-x-internal=ascii-digits>ASCII 数字</a>
   组成的代码点序列。 如果收集到的序列不是恰好 2 个字符则失败。
   否则将结果序列解释为 10 进制整数。令那个数为 <var>day</var>。<li><p>如果 <var>day</var> 不是 1 ≤ <var>day</var> ≤ <var>maxday</var> 范围内的数字就失败。<li><p>返回 <var>month</var> 和 <var>day</var>。</ol>

  


  <h5 id=时间>2.3.5.4 时间<a href=#时间 class=self-link></a></h5>

  <p><dfn id=concept-time>时间</dfn> 由一个没有时区信息的特定时间组成。
  包含小时、分钟、秒，以及秒的小数。</p>

  <p>
  <var>hour</var> 时 <var>minute</var> 分 <var>second</var> 秒的
  <dfn id=valid-time-string>合法的时间字符串</dfn>
  由以下有序的几部分组成：</p>

  <ol><li>表示 <var>hour</var> 的两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a>，
   在 0 ≤ <var>hour</var> ≤ 23 范围内<li>一个 U+003A COLON 字符 （:）<li>表示 <var>minute</var> 的两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a>，
   在 0 ≤ <var>minute</var> ≤ 59 范围内<li>如果 <var>second</var> 不是零（是零也合法）：

    <ol><li>一个 U+003A COLON 字符（:）<li>表示 <var>second</var> 的两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a>，
     在 0 ≤ <var>second</var> ≤ 59 范围内<li>如果 <var>second</var> 不是整数（是整数也合法）：

      <ol><li>一个 U+002E FULL STOP 字符（.）<li>表示 <var>second</var> 的一到三个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间:ascii-digits-4 data-x-internal=ascii-digits>ASCII 数字</a></ol>

     </ol>

   </ol>

  <p class=note><var>second</var> 部分不可以是 60 或 61；闰秒无法表示。</p>

  

  <p><dfn id=parse-a-time-string>解析时间字符串</dfn> 的规则如下。将会返回一个时间或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p><a href=#parse-a-time-component id=时间:parse-a-time-component>解析时间部分</a> 来获得 <var>hour</var>，<var>minute</var> 和 <var>second</var>。
   如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> <em>没有</em> 超出 <var>input</var> 的结尾，则失败。<li><p>令<var>time</var> 的时分秒分别为 <var>hour</var>，<var>minute</var>，<var>second</var>。<li><p>返回 <var>time</var>。</ol>

  <p>给定 <var>input</var> 字符串和位置 <var>position</var>，
  <dfn id=parse-a-time-component>解析时间部分</dfn> 的规则如下。
  将返回时、分、秒，或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=时间:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间:ascii-digits-5 data-x-internal=ascii-digits>ASCII 数字</a>
   组成的代码点序列。 如果收集到的序列不是恰好 2 个字符则失败。
   否则将结果序列解释为 10 进制整数。令那个数为 <var>hour</var>。<li><p>如果 <var>hour</var> 不是 0 ≤ <var>hour</var> ≤ 23 范围内的数字就失败。<li><p>如果 <var>position</var> 超出了 <var>input</var> 的末尾或者
   <var>position</var> 处的字符不是 U+003A COLON 字符，则失败。
   否则将 <var>position</var> 前进一个字符。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=时间:collect-a-sequence-of-code-points-2 data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间:ascii-digits-6 data-x-internal=ascii-digits>ASCII 数字</a>
   组成的代码点序列。 如果收集到的序列不是恰好 2 个字符则失败。
   否则将结果序列解释为 10 进制整数。令那个数为 <var>minute</var>。<li><p>如果 <var>minute</var> 不是 0 ≤ <var>minute</var> ≤ 59 范围内的数字就失败。<li><p>令<var>second</var> 为 0。<li>

    <p>如果 <var>position</var> 没有超出 <var>input</var> 的末尾并且
    <var>position</var> 处的字符是 U+003A（:），则：

    <ol><li><p>将 <var>position</var> 前进一个字符。<li><p>如果 <var>position</var> 恰好位于或者超出了 <var>input</var> 的末尾，
     或者 <var>input</var> 中从 <var>position</var> 开始的 <em>两个</em> 字符不都是
     <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间:ascii-digits-7 data-x-internal=ascii-digits>ASCII 数字</a>，则失败。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=时间:collect-a-sequence-of-code-points-3 data-x-internal=collect-a-sequence-of-code-points>收集</a>
     <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间:ascii-digits-8 data-x-internal=ascii-digits>ASCII 数字</a> 或 U+002E FULL STOP 字符
     组成的代码点序列。 如果收集到的序列长度为 3，
     或者长度大于 3 且第 3 个字符不是 U+002E FULL STOP 字符，
     或者有多于一个的 U+002E FULL STOP 字符，则失败。
     否则将结果序列解释为 10 进制数（可能有小数部分）。
     将 <var>second</var> 设置为那个数字。<li><p>如果 <var>second</var> 不是
     0 ≤ <var>second</var> &lt; 60 范围内的数字就失败。</ol>

   <li><p>返回 <var>hour</var>，<var>minute</var> 和 <var>second</var>。</ol>

  


  <h5 id=本地日期和时间>2.3.5.5 本地日期和时间<a href=#本地日期和时间 class=self-link></a></h5>

  <p><dfn id=concept-datetime-local>本地日期和时间</dfn> 由一个特定的
  <a href=#proleptic-gregorian-date id=本地日期和时间:proleptic-gregorian-date>外推格里历日期</a>（包含年、月、日）
  和时间（包含时、分、秒，以及秒的小数），但没有时区。<a href=references.html#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>表示日期和时间的
  <dfn id=valid-local-date-and-time-string>合法的本地日期和时间字符串</dfn>
  由以下有序的部分组成：</p>

  <ol><li>表示日期的 <a href=#valid-date-string id=本地日期和时间:valid-date-string>合法的日期字符串</a><li>一个 U+0054 LATIN CAPITAL LETTER T 字符（T）或者 U+0020 SPACE 字符<li>表示时间的 <a href=#valid-time-string id=本地日期和时间:valid-time-string>合法的时间字符串</a></ol>

  <p>表示日期和时间的 <dfn id=valid-normalised-local-date-and-time-string>
  合法的正则化的本地日期和时间字符串</dfn> 由以下有序的几部分组成：</p>

  <ol><li>表示日期的 <a href=#valid-date-string id=本地日期和时间:valid-date-string-2>合法的日期字符串</a><li>一个 U+0054 LATIN CAPITAL LETTER T 字符 （T）<li>表示时间的 <a href=#valid-time-string id=本地日期和时间:valid-time-string-2>合法的时间字符串</a>，
   按给定时间的最短可能的字符串表示。（例如如果秒是 0 的话忽略秒的部分）</ol>

  

  <p><dfn id=parse-a-local-date-and-time-string>解析本地日期和时间字符串</dfn> 的规则如下。
  将会返回一个日期或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p><a href=#parse-a-date-component id=本地日期和时间:parse-a-date-component>解析日期部分</a> 来获得 <var>year</var>，<var>month</var> 和 <var>day</var>。
   如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> 超出了 <var>input</var> 的末尾或者
   <var>position</var> 处的字符是 U+0054 LATIN CAPITAL LETTER T 字符（T）
   或 U+0020 SPACE 字符，则失败。否则将 <var>position</var> 前进一个字符。<li><p><a href=#parse-a-time-component id=本地日期和时间:parse-a-time-component>解析时间部分</a> 来获得 <var>hour</var>，<var>minute</var> 和 <var>second</var>。
   如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> <em>没有</em> 超出 <var>input</var> 的结尾，则失败。<li><p>令<var>date</var> 的年月日分别为 <var>year</var>，<var>month</var>，<var>day</var>。<li><p>令<var>time</var> 的时分秒分别为 <var>hour</var>，<var>minute</var>，<var>second</var>。<li><p>返回 <var>date</var> 和 <var>time</var>。</ol>

  


  <h5 id=时区>2.3.5.6 时区<a href=#时区 class=self-link></a></h5>

  <p><dfn id=concept-timezone>时区</dfn> 由一个小时和分钟的有符号数字组成。</p>

  <p>表示时区的 <dfn id=valid-time-zone-offset-string>合法的时区字符串</dfn>
  包含下列之一：</p>


  <ul><li><p>一个 U+005A LATIN CAPITAL LETTER Z 字符 （Z），只有时区为 UTC 时才允许<li>

    <p>或者下列有序的几部分：</p>

    <ol><li>一个 U+002B PLUS SIGN 字符 （+） 或者（如果时区不为零的话）U+002D
     HYPHEN-MINUS 字符（-），表示时区偏移的符号<li>两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时区:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a>，
     表示时区偏移的小时 <var>hour</var>，
     必须在 0 ≤ <var>hour</var> ≤ 23 范围内<li>可选地，一个 U+003A COLON 字符 （:）<li>两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时区:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a>，
     表示时区偏移的分钟 <var>minute</var>，
     必须在 0 ≤ <var>minute</var> ≤ 59 范围内</ol>

   </ul>

  <p class=note>此格式允许从-23:59到+23:59的时区偏移。
  现在，实际时区的偏移范围是-12:00到+14:00，分钟分量始终是 00，30 或 45。
  但不能保证情况永远是这样的，因为时区被用作政治足球，受到异想天开的政策的支配。</p>

  <p class=note>另请参阅下面的
  <a href=#concept-datetime id=时区:concept-datetime>全球日期和时间</a>
  部分的使用说明和示例，具体了解如何在正式的时区形成之前的历史时间上使用时区偏移。</p>

  

  <p><dfn id=parse-a-time-zone-offset-string>解析时区偏移字符串</dfn> 的规则如下。
  将会返回一个时区偏移或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p><a href=#parse-a-time-zone-offset-component id=时区:parse-a-time-zone-offset-component>解析时区偏移部分</a> 来获得
   <var>timezone<sub>hours</sub></var> 和 <var>timezone<sub>minutes</sub></var>。
   如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> <em>没有</em> 超出 <var>input</var> 的结尾，则失败。<li><p>返回距离 UTC <var>timezone<sub>hours</sub></var> 小时
   <var>timezone<sub>minutes</sub></var> 分钟的时区偏移。</ol>

  <p>给定 <var>input</var> 字符串和位置 <var>position</var>，
  <dfn id=parse-a-time-zone-offset-component>解析时区偏移部分</dfn> 的规则如下。
  将会返回一个时区偏移的小时和分钟，或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li>

    <p>如果 <var>position</var> 处的字符是一个 U+005A LATIN CAPITAL LETTER Z 字符（Z），则：</p>

    <ol><li><p>令<var>timezone<sub>hours</sub></var> 为 0。<li><p>令<var>timezone<sub>minutes</sub></var> 为 0。<li><p>将 <var>position</var> 前进到 <var>input</var> 的下一个字符。</ol>

    <p>否则，如果 <var>position</var> 是 U+002B PLUS SIGN （+）或 U+002D HYPHEN-MINUS （-），则：</p>

    <ol><li><p>如果 <var>position</var> 处的字符是一个 U+002B PLUS SIGN （+），令 <var>sign</var> 为 "正"。
     如果它是一个 U+002D HYPHEN-MINUS （-），则令 <var>sign</var> 为 "负"。<li><p>将 <var>position</var> 前进到 <var>input</var> 的下一个字符。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=时区:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=时区:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a>
     组成的代码点序列。令 <var>s</var> 为收集到的序列。<li>

      <p>如果 <var>s</var> 恰好是两个字符长度，则：</p>

      <ol><li><p>将 <var>s</var> 解释为10进制整数，并赋值给 <var>timezone<sub>hours</sub></var>。<li><p>如果 <var>position</var> 超出了 <var>input</var> 的末尾或者 <var>position</var> 处的字符不是 U+003A COLON  则失败。
       否则将 <var>position</var> 前进一个字符。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
       <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=时区:collect-a-sequence-of-code-points-2 data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=时区:ascii-digits-4 data-x-internal=ascii-digits>ASCII 数字</a>
       组成的代码点序列。 如果收集到的序列不是恰好 2 个字符则失败。
       否则将结果序列解释为 10 进制整数。令那个数为 <var>timezone<sub>minutes</sub></var>。</ol>

      <p>如果 <var>s</var> 恰好是 4 个字符长度，则：</p>

      <ol><li><p>将 <var>s</var> 的前两个字解释为 10 进制整数，并赋值给 <var>timezone<sub>hours</sub></var>。<li><p>将 <var>s</var> 的后两个字解释为 10 进制整数，并赋值给 <var>timezone<sub>minutes</sub></var>。</ol>

      <p>其他情况失败。</p>

     <li>如果 <var>timezone<sub>hours</sub></var> 不在
     0 ≤ <var>timezone<sub>hours</sub></var> ≤ 23 范围内则失败。<li>如果 <var>sign</var> 为 "负"，则对 <var>timezone<sub>hours</sub></var> 求反。<li>如果 <var>timezone<sub>minutes</sub></var> 不在
     0 ≤ <var>timezone<sub>minutes</sub></var> ≤ 59 范围内则失败。<li>如果 <var>sign</var> 为 "负"，则对 <var>timezone<sub>minutes</sub></var> 求反。</ol>

    <p>其他情况失败。</p>

   <li><p>返回 <var>timezone<sub>hours</sub></var> 和 <var>timezone<sub>minutes</sub></var>。</ol>

  


  <h5 id=全球日期和时间>2.3.5.7 全球日期和时间<a href=#全球日期和时间 class=self-link></a></h5>

  <p><dfn id=concept-datetime>全球日期和时间</dfn> 由一个特定的
  <a href=#proleptic-gregorian-date id=全球日期和时间:proleptic-gregorian-date>外推格里历日期</a>（包含年、月、日）
  和时间（包含时、分、秒，以及秒的小数），以及附加的时区信息，一个包括小时和分钟的有符号数。<a href=references.html#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>表示日期、时间和时区的的
  <dfn id=valid-global-date-and-time-string>合法的全球日期和时间字符串</dfn>
  由以下有序的部分组成：</p>

  <ol><li>表示日期的 <a href=#valid-date-string id=全球日期和时间:valid-date-string>合法的日期字符串</a><li>一个 U+0054 LATIN CAPITAL LETTER T 字符（T）或者 U+0020 SPACE 字符<li>表示时间的 <a href=#valid-time-string id=全球日期和时间:valid-time-string>合法的时间字符串</a><li>表示时区的 <a href=#valid-time-zone-offset-string id=全球日期和时间:valid-time-zone-offset-string>合法的时区偏移字符串</a></ol>

  <p>在 20 世纪中叶 UTC 形成之前的时间必须按照 UT1（0° 经度处的太阳时）而不是 UTC（
  UT1 的近似，按照 SI 制秒增长）表示和解析。时区形成前的时间必须按照 UT1 时间表示和解析，
  且带有明确的时区信息，以此来近似适当的本地时间和伦敦格林尼治观测到的时间差。</p>

  <div class=example>

   <p>下面是按照 <a href=#valid-global-date-and-time-string id=全球日期和时间:valid-global-date-and-time-string>合法的全球日期和时间字符串</a> 编写的日期示例。</p>

   <dl><dt>"<code>0037-12-13 00:00Z</code>"<dd>使用伦敦时间的地区的午夜，罗马皇帝 Nero 的生日。关于实际对应的日期见下文的进一步讨论。<dt>"<code>1979-10-14T12:00:00.001-04:00</code>"<dd>美国东海岸夏令时的 1979 年 10 月 14 日正午之后的一毫秒。<dt>"<code>8592-01-01T02:09+02:09</code>"<dd>UTC 时间 8592 年 1 月 1 日午夜。其时区是快于 UTC 的 2 小时 9 分钟，
    目前还没有这个时区，尽管如此，它是允许的。</dl>

   <p>关于这些日期，值得一提的是：</p>

   <ul><li>少于四位数字的年份必须用零填充，即 "37-12-13" 不是合法的日期。<li>"<code>T</code>" 只能被一个空格代替。
    字符串 "<code>2001-12-21  12:00Z</code>"（两部分之间有两个空格）
    不能成功解析。<li>为了无歧义地表示引入格里历（只要能无歧义地标识 UTC 形成之前的时刻）之前的时刻，
    必须首先将日期从当时使用的日历（例如儒略历）转换为格里历。Nero 出生的日期是儒略历的 37 年 12 月 15 日，
    在 <a href=#proleptic-gregorian-date id=全球日期和时间:proleptic-gregorian-date-2>外推格里历日期</a> 中是 37 年 12 月 13 日。<li>事件和时区偏移部分不是可选的。<li>第 1 年之前的日期在本版本的 HTML 中不能表示为日期时间格式。<li>古代特定事件的时代最多只是近似的，因为当时的时间并没有得到很好的协调和测量，直到最近几十年。<li>时间偏移会受夏令时的影响。</ul>

  </div>

  

  <p><dfn id=parse-a-global-date-and-time-string>解析全球日期和时间字符串</dfn> 的规则如下。
  将会返回一个带有时区信息（为了能够往返转换或显示等用途）的 UTC 时间，或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p><a href=#parse-a-date-component id=全球日期和时间:parse-a-date-component>解析日期部分</a> 来获得 <var>year</var>，<var>month</var> 和 <var>day</var>。
   如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> 超出了 <var>input</var> 的末尾或者
   <var>position</var> 处的字符是 U+0054 LATIN CAPITAL LETTER T 字符（T）
   或 U+0020 SPACE 字符，则失败。否则将 <var>position</var> 前进一个字符。<li><p><a href=#parse-a-time-component id=全球日期和时间:parse-a-time-component>解析时间部分</a> 来获得 <var>hour</var>，<var>minute</var> 和 <var>second</var>。
   如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> 超出了 <var>input</var> 的结尾，则失败。<li><p><a href=#parse-a-time-zone-offset-component id=全球日期和时间:parse-a-time-zone-offset-component>解析时区偏移部分</a> 来获得
   <var>timezone<sub>hours</sub></var> 和 <var>timezone<sub>minutes</sub></var>。 如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> <em>没有</em> 越过 <var>input</var> 的结尾，则失败。<li><p>令时刻 <var>time</var> 的年月日时分秒分别为 <var>year</var>，<var>month</var>，<var>day</var>，
   <var>hour</var>，<var>minute</var>，<var>second</var>，减去
   <var>timezone<sub>hours</sub></var> 小时 <var>timezone<sub>minutes</sub></var> 分钟。
   该时刻的时区为 UTC 时区。<li><p>令<var>timezone</var> 为距 UTC <var>timezone<sub>hours</sub></var> 小时
   <var>timezone<sub>minutes</sub></var> 分钟的时区偏移。<li><p>返回 <var>time</var> 和 <var>timezone</var>。</ol>

  


  <h5 id=星期>2.3.5.8 星期<a href=#星期 class=self-link></a></h5>

  <p><dfn id=concept-week>星期</dfn> 由一个表示年的数字（星期年）和一个表示星期的数字（周号）组成，表示从周一开始的 7 天时间段。
  在这个日历系统中，每个星期年有 52 或 53 个这样的 7 天，定义如下。这样的 7 天周期从格里历 1969 年 12 月 29 日（1969-12-29）开始，
  这一周被定义为 1970 年的第 1 周。后续的星期都依次进行编号。一个星期年的第一周之前是上一个星期年的最后一周，反之亦反。
  <a href=references.html#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>如果编号为 <var>year</var> 的星期年对应的 <a href=#proleptic-gregorian-calendar id=星期:proleptic-gregorian-calendar>外推格里历</a> 年 <var>year</var>
  第一天（1月1日）是周二，或者这一天是周三且 <var>year</var> 可被 400 整除或可被 4 整除但不可被 100 整除，
  那么这一星期年有 53 周。其他所有星期年都有 52 周。</p>

  <p>有 53 周的星期年的 <dfn id=week-number-of-the-last-day>最后一天的周号</dfn> 是 53；
  有 52 周的星期年的最后一天的周号是 52。</p>

  <p class=note>特定日期的星期年的编号可能与包含这一天的
  <a href=#proleptic-gregorian-calendar id=星期:proleptic-gregorian-calendar-2>外推格里历</a>
  年不同。 星期年 <var>y</var> 的第一周为包含第一个周二的格里历年 <var>y</var>。</p>

  <p class=note>为了现代目的，这里定义的 <a href=#concept-week id=星期:concept-week>星期</a>
  等价于定义在 ISO 8601 中的 ISO 星期。 <a href=references.html#refsISO8601>[ISO8601]</a></p>

  <p>表示星期年 <var>year</var> 和周号 <var>week</var> 的
  <dfn id=valid-week-string>合法的星期字符串</dfn> 有下列几个有序的组成部分：</p>

  <ol><li>表示 <var>year</var> 的 4 个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=星期:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a>，其中 <var>year</var> > 0<li>一个 U+002D HYPHEN-MINUS 字符 （-）<li>一个 U+0057 LATIN CAPITAL LETTER W 字符 （W）<li>表示周号 <var>week</var> 的两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=星期:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a>，其中
   1 ≤ <var>week</var> ≤ <var>maxweek</var>。
   <var>maxweek</var> 为星期年 <var>year</var> <a href=#week-number-of-the-last-day id=星期:week-number-of-the-last-day>最后一天的周号</a>。</ol>

  

  <p><dfn id=parse-a-week-string>解析星期字符串</dfn> 的规则如下。将会返回星期年和周号两个数字，或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=星期:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=星期:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a>
   组成的代码点序列。 如果收集到的序列长度小于 4 个字符长度则失败。
   否则将结果序列解释为 10 进制整数。令那个数为 <var>year</var>。<li><p>如果 <var>year</var> 小于等于零则失败。<li><p>如果 <var>position</var> 超出了 <var>input</var> 的末尾或者
   <var>position</var> 处的字符不是 U+002D HYPHEN-MINUS 字符则失败。
   否则将 <var>position</var> 前进一个字符。<li><p>如果 <var>position</var> 超出了 <var>input</var> 的末尾或者
   <var>position</var> 处的字符不是 U+0057 LATIN CAPITAL LETTER W 字符（W）则失败。
   否则将 <var>position</var> 前进一个字符。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=星期:collect-a-sequence-of-code-points-2 data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=星期:ascii-digits-4 data-x-internal=ascii-digits>ASCII 数字</a>
   组成的代码点序列。 如果收集到的序列不是恰好 2 个字符长度则失败。
   否则将结果序列解释为 10 进制整数。令那个数为 <var>week</var>。<li><p>令<var>maxweek</var> 为 <var>year</var> 年 <a href=#week-number-of-the-last-day id=星期:week-number-of-the-last-day-2>最后一天的周号</a>。<li><p>如果 <var>week</var> 不是在 1 ≤ <var>week</var> ≤ <var>maxweek</var> 范围内的数字就失败。<li><p>如果 <var>position</var> <em>没有</em> 超出 <var>input</var> 末尾，则失败。<li><p>返回星期年 <var>year</var> 和周号 <var>week</var>。</ol>

  


  <h5 id=时间间隔>2.3.5.9 时间间隔<a href=#时间间隔 class=self-link></a></h5>

  

  <p><dfn id=concept-duration>时间间隔</dfn> 由  秒数构成。</p>

  <p class=note>由于月和秒是不可比较的（一月没有精确的秒数，
  它的长度取决于究竟从哪天算起），本标准中定义的 <a href=#concept-duration id=时间间隔:concept-duration>时间间隔</a>
  不允许包含  月（或者年，它等于12个月）。
  时间间隔只能描述秒数。</p>

  <p>表示 <a href=#concept-duration id=时间间隔:concept-duration-2>时间间隔</a> <var>t</var> 的
  <dfn id=valid-duration-string>合法的时间间隔字符串</dfn> 的组成方式可以是下列任何一种：</p>

  <ul><li>

    

    

    <p>字面量 U+0050 LATIN CAPITAL LETTER P 字符加一个或更多下列有序的子组件，
    其中 天、小时、分钟和秒的数量对应
    <var>t</var> 中同样数量的秒：</p>

    <ol><li><p>一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a> 加 U+0044 LATIN CAPITAL LETTER D
     字符，表示天数。<li>

      <p>一个 U+0054 LATIN CAPITAL LETTER T 字符加一个或更多下列子组件，按照给定的顺序：</p>

      <ol><li><p>一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a> 加一个 U+0048 LATIN CAPITAL LETTER H 字符，表示小时数。<li><p>一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a> 加一个 U+004D LATIN CAPITAL LETTER M 字符，表示分钟数。<li>

        <p>下列组件：</p>

        <ol><li><p>一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits-4 data-x-internal=ascii-digits>ASCII 数字</a>，表示秒数。<li><p>可选地，一个 U+002E FULL STOP 字符（.） 加一个、两个或三个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits-5 data-x-internal=ascii-digits>ASCII 数字</a>，
         表示秒的小数组件。<li><p>一个 U+0053 LATIN CAPITAL LETTER S 字符。</ol>

       </ol>

     </ol>

    <p class=note>和本标准中定义的其他时间日期相关的微语法一样，时间间隔也基于 ISO 8601 中定义的一种格式。 <a href=references.html#refsISO8601>[ISO8601]</a></p>

   <li>

    <p>一个或更多任意顺序的 <a href=#duration-time-component id=时间间隔:duration-time-component>时间间隔组件</a>，
    每个都有不同的 <a href=#duration-time-component-scale id=时间间隔:duration-time-component-scale>时间间隔</a>；
    它们表示的描述之和等于 <var>t</var> 中的秒数。</p>

    <p><dfn id=duration-time-component>时间间隔组件</dfn> 是一个包含下列组件的字符串：</p>

    <ol><li><p>零个或更多 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=时间间隔:space-characters data-x-internal=space-characters>ASCII 空格</a>。<li><p>一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits-6 data-x-internal=ascii-digits>ASCII 数字</a>，在
     <a href=#duration-time-component-scale id=时间间隔:duration-time-component-scale-2>单位倍数</a>（见下文）下的秒的数量。<li><p>如果 <a href=#duration-time-component-scale id=时间间隔:duration-time-component-scale-3>倍数</a> 为 1 （即单位是秒），
     则可以有一个 U+002E FULL STOP 字符（.）接着一个、两个或三个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits-7 data-x-internal=ascii-digits>ASCII 数字</a>，
     表示秒的小数组件。<li><p>零个或更多 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=时间间隔:space-characters-2 data-x-internal=space-characters>ASCII 空白</a>。<li>

      <p>下面的字符之一，表示 <a href=#duration-time-component id=时间间隔:duration-time-component-2>时间间隔组件</a>
      的数字部分使用的时间单位的 <dfn id=duration-time-component-scale>倍数</dfn>：</p>

      <dl><dt>U+0057 LATIN CAPITAL LETTER W 字符<dt>U+0077 LATIN SMALL LETTER W 字符<dd>星期。倍数是 604800。<dt>U+0044 LATIN CAPITAL LETTER D 字符<dt>U+0064 LATIN SMALL LETTER D 字符<dd>天。倍数是 86400。<dt>U+0048 LATIN CAPITAL LETTER H 字符<dt>U+0068 LATIN SMALL LETTER H 字符<dd>小时。倍数是 3600。<dt>U+004D LATIN CAPITAL LETTER M 字符<dt>U+006D LATIN SMALL LETTER M 字符<dd>分钟。倍数是 60。<dt>U+0053 LATIN CAPITAL LETTER S 字符<dt>U+0073 LATIN SMALL LETTER S 字符<dd>秒。倍数是 1。</dl>

     <li><p>零个或更多 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=时间间隔:space-characters-3 data-x-internal=space-characters>ASCII 空格</a>。</ol>

    <p class=note>这并不基于 ISO 8601 中的任何格式。这是为了提出一种比 ISO 8601 时间间隔格式更加人类可读的选择。</p>

   </ul>

  

  <p><dfn id=parse-a-duration-string>解析时间间隔字符串</dfn> 的规则如下。将会返回一个
  <a href=#concept-duration id=时间间隔:concept-duration-3>时间间隔</a> 或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p>令<var>months</var>，<var>seconds</var>，和 <var>component count</var> 均为零。<li>

    <p>令<var>M-disambiguator</var> 为 <i>minutes</i>。</p>

    
    <p class=note>该标志的另一个值是 <i>months</i>。它用来消除 ISO8601 时间间隔中 "M" 单位的歧义，
    在 ISO8601 中月和分钟都使用这个单位。虽然月是不允许的，但为了向前兼容，
    以及避免误解 ISO8601 时间间隔（在其他上下文中仍然是合法的），
    仍然对月进行了解析。</p>

   <li><p>从 <var>position</var> 开始 <a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=时间间隔:skip-ascii-whitespace data-x-internal=skip-ascii-whitespace>跳过</a> <var>input</var> 中的 ASCII 空格。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的结尾，则失败。<li><p>如果 <var>position</var> 处的字符是一个 U+0050 LATIN CAPITAL LETTER P 字符，
   则将 <var>position</var> 前进一个字符。将 <var>M-disambiguator</var> 设置为 <i>months</i>，
   并从 <var>position</var> 开始 <a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=时间间隔:skip-ascii-whitespace-2 data-x-internal=skip-ascii-whitespace>跳过</a> <var>input</var> 中的 ASCII 空格。<li>

    <p>while true:</p>

    <ol><li><p>令<var>units</var> 为 undefined。它的值可能是：
     <i>years</i>，<i>months</i>，<i>weeks</i>，<i>days</i>，<i>hours</i>，<i>minutes</i>，或 <i>seconds</i>。<li><p>令<var>next character</var> 为 undefined。用来从 <var>input</var> 中处理字符。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的结尾，则 break。<li><p>如果 <var>position</var> 处的字符是一个 U+0050 LATIN CAPITAL LETTER T 字符，
     则将 <var>position</var> 前进一个字符。将 <var>M-disambiguator</var> 设置为 <i>minutes</i>，
     并从 <var>position</var> 开始 <a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=时间间隔:skip-ascii-whitespace-3 data-x-internal=skip-ascii-whitespace>跳过</a> <var>input</var> 中的 ASCII 空格。<li><p>将 <var>next character</var> 设置为 <var>input</var> 中 <var>position</var> 处的字符。<li>

      <p>如果 <var>next character</var> 为一个 U+002E FULL STOP 字符 （.），则令 <var>N</var> 等于 0。
      （不要前进 <var>position</var>。下面会处理它。）</p>

      <p>否则，如果 <var>next character</var> 是一个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits-8 data-x-internal=ascii-digits>ASCII 数字</a>，则从
      <var>input</var> 中给定的位置 <var>position</var>
      <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=时间间隔:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits-9 data-x-internal=ascii-digits>ASCII 数字</a>
      组成的代码点序列。将结果序列解释为 10 进制整数。令 <var>N</var> 为那个数字。</p>

      <p>否则如果 <var>next character</var> 不是数字，则失败。</p>

     <li><p>如果 <var>position</var> 越过了 <var>input</var> 的结尾，则 break。<li><p>将 <var>next character</var> 设置为 <var>input</var> 中 <var>position</var> 处的字符，
     这次将 <var>position</var> 前进到下一字符。
     （如果 <var>next character</var> 刚才是一个 U+002E FULL STOP 字符（.），它将仍然是那个字符。）<li>

      <p>如果 <var>next character</var> 是 U+002E （.），则：</p>

      <ol><li><p>从 <var>input</var> 中给定的位置 <var>position</var>
       <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=时间间隔:collect-a-sequence-of-code-points-2 data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits-10 data-x-internal=ascii-digits>ASCII 数字</a>
       组成的代码点序列。令 <var>day</var> 为结果序列。<li><p>如果 <var>s</var> 是空字符串则失败。<li><p>令<var>length</var> 为 <var>s</var> 中的字符数。<li><p>令<var>fraction</var> 为将 <var>s</var> 解释为10进制数的结果，
       把这个数除以 <span>10<sup><var>length</var></sup></span>。<li><p>将 <var>N</var> 增加 <var>fraction</var>。<li><p>从 <var>position</var> 开始 <a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=时间间隔:skip-ascii-whitespace-4 data-x-internal=skip-ascii-whitespace>跳过</a> <var>input</var> 中的 ASCII 空格。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的结尾，则失败。<li><p>将 <var>next character</var> 设为 <var>input</var> 中 <var>position</var> 指向的字符，
       并将 <var>position</var> 前进到下一字符。<li><p>如果 <var>next character</var> 既不是 U+0053 LATIN CAPITAL LETTER S
       字符也不是 U+0073 LATIN SMALL LETTER S 字符，则失败。<li><p>将 <var>units</var> 设为 <i>seconds</i>。</ol>

      <p>否则：</p>

      <ol><li><p>如果 <var>next character</var> 是 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=时间间隔:space-characters-4 data-x-internal=space-characters>ASCII 空格</a>，
       那么从 <var>position</var> 开始 <a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=时间间隔:skip-ascii-whitespace-5 data-x-internal=skip-ascii-whitespace>跳过</a> <var>input</var> 中的 ASCII 空格。
       将 <var>next character</var> 设为 <var>input</var> 中 <var>position</var> 指向的字符，
       并将 <var>position</var> 前进到下一字符。<li>

        

        <p>如果 <var>next character</var> 是一个 U+0059 LATIN CAPITAL LETTER Y 字符或
        U+0079 LATIN SMALL LETTER Y 字符，将 <var>units</var> 设置为 <i>years</i> 并将
        <var>M-disambiguator</var> 设置为 <i>months</i>。</p>

        <p>如果 <var>next character</var> 是一个 U+004D LATIN CAPITAL LETTER M 字符或
        U+006D LATIN SMALL LETTER M 字符，且 <var>M-disambiguator</var> 是
        <i>months</i>，则将 <var>units</var> 设置为 <i>months</i>。</p>

        <p>如果 <var>next character</var> 是一个 U+0057 LATIN CAPITAL LETTER W 或
        U+0077 LATIN SMALL LETTER W 字符，将 <var>units</var> 设置为 <i>weeks</i> 并将
        <var>M-disambiguator</var> 设置为 <i>minutes</i>。</p>

        <p>如果 <var>next character</var> 是一个 U+0044 LATIN CAPITAL LETTER D 或
        U+0064 LATIN SMALL LETTER D 字符，将 <var>units</var> 设置为 <i>days</i> 并将
        <var>M-disambiguator</var> 设置为 <i>minutes</i>。</p>

        <p>如果 <var>next character</var> 是一个 U+0048 LATIN CAPITAL LETTER H 或
        U+0068 LATIN SMALL LETTER H 字符，将 <var>units</var> 设置为 <i>hours</i> 并将
        <var>M-disambiguator</var> 设置为 <i>minutes</i>。</p>

        <p>如果 <var>next character</var> 是一个 U+004D LATIN CAPITAL LETTER M 字符或
        U+006D LATIN SMALL LETTER M 字符，且 <var>M-disambiguator</var> 是
        <i>minutes</i>，则将 <var>units</var> 设置为 <i>minutes</i>。</p>

        <p>如果 <var>next character</var> 是一个 U+0053 LATIN CAPITAL LETTER S 或
        U+0073 LATIN SMALL LETTER S 字符，将 <var>units</var> 设置为 <i>seconds</i> 并将
        <var>M-disambiguator</var> 设置为 <i>minutes</i>。</p>

        <p>否则如果 <var>next character</var> 不是上述任何字符，则失败。</p>

       </ol>

     <li><p>递增 <var>component count</var>。<li><p>令<var>multiplier</var> 为 1。<li><p>如果 <var>units</var> 为 <i>years</i>，将 <var>multiplier</var> 乘以 12 并设置
     <var>units</var> 为 <i>months</i>。<li>

      <p>如果 <var>units</var> 为 <i>months</i>，把 <var>N</var> 与 <var>multiplier</var> 的乘积加到 <var>months</var> 上。</p>

      <p>否则：</p>

      <ol><li><p>如果 <var>units</var> 为 <i>weeks</i>，将 <var>multiplier</var> 乘以 7 并设置 <var>units</var> 为 <i>days</i>。<li><p>如果 <var>units</var> 为 <i>days</i>，将 <var>multiplier</var> 乘以 24 并设置 <var>units</var> 为 <i>hours</i>。<li><p>如果 <var>units</var> 为 <i>hours</i>，将 <var>multiplier</var> 乘以 60 并设置 <var>units</var> 为 <i>minutes</i>。<li><p>如果 <var>units</var> 为 <i>minutes</i>，将 <var>multiplier</var> 乘以 60 并设置 <var>units</var> 为 <i>seconds</i>。<li><p>否则 <var>units</var> 只能是 <i>seconds</i> 了。 将 <var>N</var> 与 <var>multiplier</var> 的乘积加到 <var>seconds</var> 上。</ol>

     <li><p>从 <var>position</var> 开始 <a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=时间间隔:skip-ascii-whitespace-6 data-x-internal=skip-ascii-whitespace>跳过</a> <var>input</var> 中的 ASCII 空格。</ol>

   <li><p>如果 <var>component count</var> 为零，则失败。<li><p>如果 <var>months</var> 不为零，则失败。<li><p>返回包含 <var>seconds</var> 秒的 <a href=#concept-duration id=时间间隔:concept-duration-4>时间间隔</a>。</ol>

  


  <h5 id=模糊的时间>2.3.5.10 模糊的时间<a href=#模糊的时间 class=self-link></a></h5>

  <p><dfn id=valid-date-string-with-optional-time>合法的可选时间的日期字符串</dfn>
  是下列中的一种：</p>

  <ul><li><a href=#valid-date-string id=模糊的时间:valid-date-string>合法的日期字符串</a><li><a href=#valid-global-date-and-time-string id=模糊的时间:valid-global-date-and-time-string>合法的全球日期与时间字符串</a></ul>

  

  <hr>

  <p><dfn id=parse-a-date-or-time-string>解析日期或时间字符串</dfn> 的规则如下。
  该算法将会返回一个 <a href=#concept-date id=模糊的时间:concept-date>date</a>，<a href=#concept-time id=模糊的时间:concept-time>time</a>，或 <a href=#concept-datetime id=模糊的时间:concept-datetime>全球日期和时间</a> 或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p>将 <var>start position</var> 设置为 <var>position</var>。<li><p>将 <var>date present</var> 和 <var>time present</var> 标志设置为 true。<li><p><a href=#parse-a-date-component id=模糊的时间:parse-a-date-component>解析日期部分</a> 来获得 <var>year</var>，<var>month</var> 和 <var>day</var>。
   如果它没有返回，设置 <var>date present</var> 为 false。</p>

   <li>

    <p>如果 <var>date present</var> 为 true，且 <var>position</var> 没有越过 <var>input</var> 的末尾，
    且 <var>position</var> 处的字符是 U+0054 LATIN CAPITAL LETTER T 字符 （T）或 U+0020 SPACE 字符，
    将 <var>position</var> 前进到 <var>input</var> 的下一个字符。</p>

    <p>否则，如果 <var>date present</var> 为 true，并且 <var>position</var> 越过了 <var>input</var> 的末尾或
    <var>position</var> 处的字符既不是 U+0054 LATIN CAPITAL LETTER T 字符 （T）也不是 U+0020 SPACE 字符，
    则设置 <var>time present</var> 为 false。</p>

    <p>否则，如果 <var>date present</var> 为 false，将 <var>position</var> 设置回 <var>start position</var>。</p>

   <li><p>如果 <var>time present</var> 为 true，则 <a href=#parse-a-time-component id=模糊的时间:parse-a-time-component>解析时间部分</a>
   来获得 <var>hour</var>，<var>minute</var> 和 <var>second</var>。 如果它没有返回，则失败。</p>

   <li><p>如果 <var>date present</var> 和 <var>time present</var> 标志都是 true，
   但 <var>position</var> 越过了 <var>input</var> 的末尾，则失败。<li><p>如果 <var>date present</var> 和 <var>time present</var> 标志都是 true，
   <a href=#parse-a-time-zone-offset-component id=模糊的时间:parse-a-time-zone-offset-component>解析时区偏移部分</a> 来获得
   <var>timezone<sub>hours</sub></var> 和 <var>timezone<sub>minutes</sub></var>。如果它没有返回则失败。</p>

   <li><p>如果 <var>position</var> <em>没有</em> 越过 <var>input</var> 的结尾，则失败。<li>

    <p>如果 <var>date present</var> 标志为 true 且 <var>time present</var> 标志为 false，
    则令 <var>date</var> 为年与日分别为 <var>year</var>，<var>month</var>，<var>day</var> 的日期并返回 <var>date</var>。</p>
    <p>否则，如果 <var>time present</var> 标志为 true 且 <var>date present</var> 标志为 false，
    则令 <var>time</var> 为时分秒分别为 <var>hour</var>，<var>minute</var>，<var>second</var> 的时间并返回 <var>time</var>。</p>

    <p>否则，令 <var>time</var> 为 <var>year</var> 年 <var>month</var> 月 <var>day</var> 日 <var>hour</var> 时m<var>minute</var> 分 <var>second</var> 秒，
    减去 <var>timezone<sub>hours</sub></var> 小时 <var>timezone<sub>minutes</sub></var>分钟，这一时刻是 UTC 时区的时间；
    令 <var>timezone</var> 距离 UTC <var>timezone<sub>hours</sub></var> 小时 <var>timezone<sub>minutes</sub></var> 分钟；
    返回 <var>time</var> 和 <var>timezone</var>。</p>

   </ol>

  


  <h4 id=colours>2.3.6 颜色<a href=#colours class=self-link></a></h4>

  <p><dfn id=simple-colour>简单颜色</dfn>
  由三个在 0..255 范围的 8 位数字组成。
  分别表示 sRGB 色彩空间的颜色的红、绿、蓝分量。 <a href=references.html#refsSRGB>[SRGB]</a></p>

  <p><dfn id=valid-simple-colour>合法的简单颜色</dfn>
  字符串应恰好包含 7 个字符长度，
  第一个字符是 U+0023 NUMBER SIGN 字符（#），剩下的 6 个都是 <a href=https://infra.spec.whatwg.org/#ascii-hex-digit id=colours:ascii-hex-digits data-x-internal=ascii-hex-digits>ASCII 十六进制数</a>，
  其中前两个表示红色分量，中间两个表示绿色分量，最后两个表示蓝色分量，均为 16 进制。</p>

  <p><dfn id=valid-lowercase-simple-colour>
  合法的小写简单颜色</dfn> 字符串是
  不使用任何 U+0041 LATIN CAPITAL LETTER A 到 U+0046 LATIN CAPITAL LETTER F 字符的 <a href=#valid-simple-colour id=colours:valid-simple-colour>合法的简单颜色</a>。</p>

  

  <p><dfn id=rules-for-parsing-simple-colour-values>解析简单色值的规则</dfn> 由下列算法给出。
  被调用时必须依次执行这些步骤，在第一个有返回值的步骤中止。该算法将会返回一个 <a href=#simple-colour id=colours:simple-colour>简单颜色</a> 或者错误。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>如果 <var>input</var> 不是恰好 7 个字符则返回一个错误。<li><p>如果 <var>input</var> 的首字符不是 U+0023 NUMBER SIGN 字符（#），则返回一个错误。<li><p>如果 <var>input</var> 的后面 6 个字符不都是 <a href=https://infra.spec.whatwg.org/#ascii-hex-digit id=colours:ascii-hex-digits-2 data-x-internal=ascii-hex-digits>ASCII 十六进制数字</a>，则返回一个错误。<li><p>令<var>result</var> 为一个 <a href=#simple-colour id=colours:simple-colour-2>简单颜色</a>。</p>

   <li><p>将第2、3个字符解释为 16 进制数，令该结果为 <var>result</var> 的红色分量。</p>
   <li><p>将第4、5个字符解释为 16 进制数，令该结果为 <var>result</var> 的绿色分量。</p>
   <li><p>将第6、7个字符解释为 16 进制数，令该结果为 <var>result</var> 的蓝色分量。</p>

   <li><p>返回 <var>result</var>。</p>

  </ol>

  <p>给定 <a href=#simple-colour id=colours:simple-colour-3>简单颜色</a>
  <dfn id=rules-for-serialising-simple-colour-values>序列化简单色值的规则</dfn>
  在下列算法中给出：</p>

  <ol><li><p>令<var>result</var> 为包含一个 U+0023 NUMBER SIGN 字符（#）的字符串。<li><p>将红、绿、蓝分量依次转换为两位 16 进制数字，并使用 <a href=https://infra.spec.whatwg.org/#ascii-lower-hex-digit id=colours:lowercase-ascii-hex-digits data-x-internal=lowercase-ascii-hex-digits>ASCII 小写十六进制数字</a>，
   需要的话填充零。将这些数字按照红绿蓝的顺序追加到 <var>result</var>。</p>

   <li><p>返回 <var>result</var>，它将是一个 <a href=#valid-lowercase-simple-colour id=colours:valid-lowercase-simple-colour>合法的小写简单颜色</a>。</ol>

  <hr>

  <p>有些废弃的遗留属性以更复杂的方式解析颜色，它们使用
  <dfn id=rules-for-parsing-a-legacy-colour-value>解析遗留色值的规则</dfn>，由以下算法给出。
  被调用时必须依次执行这些步骤，在第一个有返回值的步骤中止。该算法将会返回一个 <a href=#simple-colour id=colours:simple-colour-4>简单颜色</a> 或者错误。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>如果 <var>input</var> 位空字符串则返回一个错误。<li><p>从 <var>input</var> 中 <a href=https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace id=colours:strip-leading-and-trailing-ascii-whitespace data-x-internal=strip-leading-and-trailing-ascii-whitespace>移除前后的 ASCII 空白</a>。<li><p>如果 <var>input</var> <a href=https://infra.spec.whatwg.org/#ascii-case-insensitive id=colours:ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII 大小写不敏感地</a> 匹配
   字符串 "<code>transparent</code>"，则返回一个错误。<li>

    <p>如果 <var>input</var> <a href=https://infra.spec.whatwg.org/#ascii-case-insensitive id=colours:ascii-case-insensitive-2 data-x-internal=ascii-case-insensitive>ASCII 大小写不敏感地</a> 匹配
    <a href=https://drafts.csswg.org/css-color/#named-color id=colours:named-color data-x-internal=named-color>命名颜色</a>，则返回该关键字对应的 <a href=#simple-colour id=colours:simple-colour-5>简单颜色</a>。 <a href=references.html#refsCSSCOLOR>[CSSCOLOR]</a></p>

    <p class=note>没有识别 <a href=https://www.w3.org/TR/css3-color/#css2-system>CSS2 System Colors</a>。</p>

   <li>

    <p>如果 <var>input</var> 是 4 个字符长度，且 <var>input</var> 的第一个字符是 U+0023（#），
    且 <var>input</var> 后面的 3 个字符都是 <a href=https://infra.spec.whatwg.org/#ascii-hex-digit id=colours:ascii-hex-digits-3 data-x-internal=ascii-hex-digits>ASCII 十六进制数字</a>，则：</p>

    <ol><li><p>令<var>result</var> 为一个 <a href=#simple-colour id=colours:simple-colour-6>简单颜色</a>。</p>

     <li><p>将 <var>input</var> 第二个字符解释为十六进制数字；令 <var>result</var> 的红色分量为得到的数字乘以 17。</p>

     <li><p>将 <var>input</var> 第三个字符解释为十六进制数字；令 <var>result</var> 的绿色分量为得到的数字乘以 17。</p>

     <li><p>将 <var>input</var> 第四个字符解释为十六进制数字；令 <var>result</var> 的蓝色分量为得到的数字乘以 17。</p>

     <li><p>返回 <var>result</var>。</p>

    </ol>

   <li><p>将 <var>input</var> 中任何代码点大于 U+FFFF 的字符（即任何不在基本多文种平面的字符）替换为两个字符的字符串 "<code>00</code>"。<li><p>如果 <var>input</var> 字符长度大于 128，把 <var>input</var> 截断到只有 128 个字符。<li><p>如果 <var>input</var> 中第一个字符是 U+0023 NUMBER SIGN 字符（#），移除它。<li><p>将 <var>input</var> 中任何非 <a href=https://infra.spec.whatwg.org/#ascii-hex-digit id=colours:ascii-hex-digits-4 data-x-internal=ascii-hex-digits>ASCII 十六进制数字</a> 的字符替换为 U+0030 DIGIT ZERO（0）。<li><p>While <var>input</var> 长度为零或者不是 3 的倍数，添加一个 U+0030 DIGIT ZERO （0）字符到 <var>input</var>。<li><p>将 <var>input</var> 分割成三个等长字符来获得三个分量。
   令<var>length</var> 为这三个分量的长度（<var>input</var> 长度的三分之一）。<li><p>如果 <var>length</var> 大于 8，移除每个分量中前面的 <span><var>length</var>-8</span> 个字符，并且令 <var>length</var> 为 8。<li><p>While <var>length</var> 大于 2 并且每个分量的第一个字符是 U+0030 DIGIT ZERO （0）字符，移除该字符并将 <var>length</var> 减一。<li><p>如果 <var>length</var> <em>仍然</em> 大于 2，截断每个分量，分别只保留前两个字符。<li><p>令<var>result</var> 为一个 <a href=#simple-colour id=colours:simple-colour-7>简单颜色</a>。</p>

   <li><p>将第一个分量解释为十六进制数字；令 <var>result</var> 的红色分量为得到的数字。<li><p>将第二个分量解释为十六进制数字；令 <var>result</var> 的绿色分量为得到的数字。<li><p>将第三个分量解释为十六进制数字；令 <var>result</var> 的蓝色分量为得到的数字。<li><p>返回 <var>result</var>。</p>

  </ol>

  

  <hr>

  <p class=note><a href=scripting.html#canvas-context-2d id=colours:canvas-context-2d>2D 图形上下文</a> 有单独的颜色语法，还处理了不透明度。</p>



  <h4 id=空格分隔的令牌>2.3.7 空格分隔的令牌<a href=#空格分隔的令牌 class=self-link></a></h4>

  <p><dfn id=set-of-space-separated-tokens>空格分隔的令牌集合</dfn>
  是包含零个或更多词（称为令牌）的字符串，它们以一个或更多
  <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=空格分隔的令牌:space-characters data-x-internal=space-characters>ASCII 空白</a> 分隔，
  其中的词是由一个或更多的除 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=空格分隔的令牌:space-characters-2 data-x-internal=space-characters>ASCII 空白</a>
  之外的字符组成的任何字符串。</p>

  <p>包含 <a href=#set-of-space-separated-tokens id=空格分隔的令牌:set-of-space-separated-tokens>空格分隔的令牌集合</a>
  的字符串前后都可能有 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=空格分隔的令牌:space-characters-3 data-x-internal=space-characters>ASCII 空白</a>。</p>

  <p><dfn id=unordered-set-of-unique-space-separated-tokens>空格分隔的无序不重复令牌集合</dfn>
  是一个没有令牌重复的
  <a href=#set-of-space-separated-tokens id=空格分隔的令牌:set-of-space-separated-tokens-2>空格分隔的令牌集合</a>。</p>

  <p><dfn id=ordered-set-of-unique-space-separated-tokens>空格分隔的有序不重复令牌集合</dfn>
  是一个没有令牌重复但令牌顺序有意义的
  <a href=#set-of-space-separated-tokens id=空格分隔的令牌:set-of-space-separated-tokens-3>空格分隔的令牌集合</a>。</p>

  <p><a href=#set-of-space-separated-tokens id=空格分隔的令牌:set-of-space-separated-tokens-4>空格分隔的令牌集合</a> 有时定义有允许值的集合。
  当定义了允许值的集合时，集合中的令牌必须都从那个允许的列表中来；其他值是不合规范的。
  如果没有提供允许值的集合，那么所有值都是符合规范的。</p>

  <p class=note>在 <a href=#set-of-space-separated-tokens id=空格分隔的令牌:set-of-space-separated-tokens-5>set of space-separated tokens</a> 中的令牌如何进行比较
  （例如是否大小写敏感) 由各自集合定义。</p>



  <h4 id=逗号分隔的令牌>2.3.8 逗号分隔的令牌<a href=#逗号分隔的令牌 class=self-link></a></h4>

  <p><dfn id=set-of-comma-separated-tokens>逗号分隔的令牌集合</dfn> is a string containing zero or more tokens each
  separated from the next by a single U+002C COMMA character (,), where tokens consist of any string
  of zero or more characters, neither beginning nor ending with <a id=逗号分隔的令牌:space-characters href=https://infra.spec.whatwg.org/#ascii-whitespace data-x-internal=space-characters>ASCII whitespace</a>, nor
  containing any U+002C COMMA characters (,), and optionally surrounded by <a id=逗号分隔的令牌:space-characters-2 href=https://infra.spec.whatwg.org/#ascii-whitespace data-x-internal=space-characters>ASCII
  whitespace</a>.</p>

  <p>是包含零个或更多令牌的字符串，它们以一个 U+002C COMMA 字符（,）分隔，
  其中的令牌是由一个或更多的字符组成的任意字符串，
  首尾不包括 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=逗号分隔的令牌:space-characters-3 data-x-internal=space-characters>ASCII 空白</a>
  也不能包含 U+002C COMMA 字符（,），但前后可以有 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=逗号分隔的令牌:space-characters-4 data-x-internal=space-characters>ASCII 空白</a>。</p>

  <p class=example>例如字符串 "<code> a ,b,,d d </code>"
  由四个令牌组成："a", "b", 空字符串和 "d d"。每个令牌的前后空白不计入令牌，空字符串可以是一个令牌。</p>

  <p>有时 <a href=#set-of-comma-separated-tokens id=逗号分隔的令牌:set-of-comma-separated-tokens>逗号分隔的令牌集合</a> 对合法令牌的构成还有额外限制。
  如果定义了那些限制，令牌就必须完全遵守；其他值都是不符合规范的。
  如果没定义其他限制，所有值都是符合规范的。</p>



  <h4 id=syntax-references>2.3.9 引用<a href=#syntax-references class=self-link></a></h4>

  <p><var>type</var> 类型的元素的 <dfn id=valid-hash-name-reference>合法的哈希名引用</dfn>
  字符串由一个 U+0023 NUMBER SIGN 字符（#）和完全匹配
  同一个 <a href=https://dom.spec.whatwg.org/#concept-tree id=syntax-references:tree data-x-internal=tree>树</a> 中的 <var>type</var> 元素的 <code>name</code> 属性的字符串构成。</p>

  

  <p>给定上下文节点 <var>scope</var>，<dfn id=rules-for-parsing-a-hash-name-reference>解析对
  <var>type</var> 类型的元素的哈希名引用的规则</dfn> 如下：</p>

  <ol><li><p>如果被解析字符串不包含 U+0023 NUMBER SIGN 字符，或者第一个这样的字符是字符串的最后一个字符，
   则返回 null 并中止这些步骤。<li><p>令<var>s</var> 为从紧接着第一个 U+0023 NUMBER SIGN 字符之后的字符开始，直到待解析字符串结尾的字符串。<li>
    <p>返回 <var>scope</var> 的 <a href=https://dom.spec.whatwg.org/#concept-tree id=syntax-references:tree-2 data-x-internal=tree>树</a> 中，按照 <a href=https://dom.spec.whatwg.org/#concept-tree-order id=syntax-references:tree-order data-x-internal=tree-order>树序</a> 的第一个
    <code id=syntax-references:the-id-attribute><a href=dom.html#the-id-attribute>id</a></code> 或 <code>name</code> 属性的值是 <var>s</var>
    的类型为 <var>type</var> 的元素。如果没有这样的元素就返回 null。</p>

    <p class=note>虽然解析时用到了 <code id=syntax-references:the-id-attribute-2><a href=dom.html#the-id-attribute>id</a></code> 属性，
    但它不用于决定一个值是否是 <a href=#valid-hash-name-reference id=syntax-references:valid-hash-name-reference><em>合法的</em> 哈希名引用</a>。
    也就是说，一个基于 <code id=syntax-references:the-id-attribute-3><a href=dom.html#the-id-attribute>id</a></code> 引用元素的哈希名引用是符合性错误。
    （除非那个元素也有一个具有相同值的 <code>name</code> 属性）。</p>
   </ol>

  


  <h4 id=mq>2.3.10 媒体查询<a href=#mq class=self-link></a></h4>

  <p><dfn id=valid-media-query-list>合法的媒体查询列表</dfn> 是一个匹配
  Media Queries 标准中的 <code>&lt;media-query-list></code> 生成式的字符串。<a href=references.html#refsMQ>[MQ]</a></p>

  <p><dfn id=matches-the-environment>匹配用户环境</dfn> 的字符串可以是空字符串、只包含
  <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=mq:space-characters data-x-internal=space-characters>ASCII 空白</a> 的字符串，
  或者根据 Media Queries 标准给出的定义匹配用户环境的媒体查询列表。<a href=references.html#refsMQ>[MQ]</a></p>




  <h3 id=url-2>2.4 URL<a href=#url-2 class=self-link></a></h3>

  <h4 id=术语-2>2.4.1 术语<a href=#术语-2 class=self-link></a></h4>

  <p>一个字符串如果是<a href=https://url.spec.whatwg.org/#valid-url-string id=术语-2:valid-url-string data-x-internal=valid-url-string>合法 URL 字符串</a>，同时是非空字符串，
  那么它就是 <dfn id=valid-non-empty-url>合法的非空 URL</dfn>。</p>

  <p>如果
  <a href=https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace id=术语-2:strip-leading-and-trailing-ascii-whitespace data-x-internal=strip-leading-and-trailing-ascii-whitespace>去掉前后 ASCII 空白</a>
  后是一个 <a href=https://url.spec.whatwg.org/#valid-url-string id=术语-2:valid-url-string-2 data-x-internal=valid-url-string>合法 URL 字符串</a>，
  那么它就是一个
  <dfn id=valid-url-potentially-surrounded-by-spaces>可能由空格包裹的合法 URL</dfn>。</p>

  <p>如果
  <a href=https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace id=术语-2:strip-leading-and-trailing-ascii-whitespace-2 data-x-internal=strip-leading-and-trailing-ascii-whitespace>去掉前后 ASCII 空白</a>
  后是一个 <a href=#valid-non-empty-url id=术语-2:valid-non-empty-url>合法的非空 URL</a>，
  那么它就是一个
  <dfn id=valid-non-empty-url-potentially-surrounded-by-spaces>可能由空格包裹的合法的非空 URL</dfn>。</p>

  <p>本标准将 <dfn id=about:legacy-compat><code>about:legacy-compat</code></dfn> 定义为保留 URL。
  因为 <code id=术语-2:about-protocol><a data-x-internal=about-protocol href=https://tools.ietf.org/html/rfc6694#section-2>about:</a></code> URL 不可解析，当需要兼容 XML 工具时，
  用在 <a href=https://dom.spec.whatwg.org/#html-document id=术语-2:html-documents data-x-internal=html-documents>HTML 文档</a> 的 <a href=syntax.html#syntax-doctype id=术语-2:syntax-doctype>DOCTYPE</a> 中。<a href=references.html#refsABOUT>[ABOUT]</a></p>

  <p>本标准将 <dfn id=about:html-kind><code>about:html-kind</code></dfn> 定义为保留 URL。
  因为 <code id=术语-2:about-protocol-2><a data-x-internal=about-protocol href=https://tools.ietf.org/html/rfc6694#section-2>about:</a></code> URL 不可解析，可用于媒体轨道的类型标识。<a href=references.html#refsABOUT>[ABOUT]</a></p>

  <p>本标准将 <dfn id=about:srcdoc><code>about:srcdoc</code></dfn> 定义为保留 URL。
  因为 <code id=术语-2:about-protocol-3><a data-x-internal=about-protocol href=https://tools.ietf.org/html/rfc6694#section-2>about:</a></code> URL 不可解析，
  被用于 <a href=embedded-content.html#an-iframe-srcdoc-document id=术语-2:an-iframe-srcdoc-document><code>iframe</code> <code>srcdoc</code> 文档</a>
  的 <a href=https://dom.spec.whatwg.org/#concept-document-url id="术语-2:the-document's-address" data-x-internal="the-document's-address">URL</a> <a href=references.html#refsABOUT>[ABOUT]</a></p>

  <p><code id=术语-2:document><a href=dom.html#document>Document</a></code> 对象 <var>document</var> 的 <dfn id=fallback-base-url>后备基 URL</dfn>
  是通过执行这些步骤获得的 <a href=https://url.spec.whatwg.org/#concept-url id=术语-2:url-record data-x-internal=url-record>URL 记录</a>：</p>

  <ol><li><p>如果 <var>document</var> 是 <a href=embedded-content.html#an-iframe-srcdoc-document id=术语-2:an-iframe-srcdoc-document-2>
   <code>iframe</code> <code>srcdoc</code> 文档</a>，
   则返回
   <var>document</var> 的 <a href=browsers.html#concept-document-bc id=术语-2:concept-document-bc>浏览环境</a> 的
   <a href=browsers.html#browsing-context-container id=术语-2:browsing-context-container>浏览环境容器</a> 的 <a href=https://dom.spec.whatwg.org/#concept-node-document id=术语-2:node-document data-x-internal=node-document>节点文档</a> 的
   <a href=#document-base-url id=术语-2:document-base-url>文档基 URL</a>。<li>

    

    

    <p>如果 <var>document</var> 的 <a href=https://dom.spec.whatwg.org/#concept-document-url id="术语-2:the-document's-address-2" data-x-internal="the-document's-address">URL</a> 为 <code id=术语-2:about:blank><a href=#about:blank>about:blank</a></code>，
    且 <var>document</var> 的 <a href=browsers.html#concept-document-bc id=术语-2:concept-document-bc-2>浏览环境</a> 有一个
    <a href=browsers.html#creator-browsing-context id=术语-2:creator-browsing-context>创建者浏览环境</a>，那么返回该
    <a href=browsers.html#creator-base-url id=术语-2:creator-base-url>创建者的基 URL</a>。</p>

   <li><p>返回 <var>document</var> 的 <a href=https://dom.spec.whatwg.org/#concept-document-url id="术语-2:the-document's-address-3" data-x-internal="the-document's-address">URL</a>。</ol>

  <p><code id=术语-2:document-2><a href=dom.html#document>Document</a></code> 对象的 <dfn id=document-base-url data-export="">文档基 URL</dfn> 是通过执行这些步骤获得的
  <a href=https://url.spec.whatwg.org/#syntax-url-absolute id=术语-2:absolute-url data-x-internal=absolute-url>绝对 URL</a>：</p>

  <ol><li><p>如果 <code id=术语-2:document-3><a href=dom.html#document>Document</a></code> 中不存在拥有 <code id=术语-2:attr-base-href><a href=semantics.html#attr-base-href>href</a></code>
   属性的 <code id=术语-2:the-base-element><a href=semantics.html#the-base-element>base</a></code> 元素，那么 <a href=#document-base-url id=术语-2:document-base-url-2>文档基 URL</a> 为
   <code id=术语-2:document-4><a href=dom.html#document>Document</a></code> 的 <a href=#fallback-base-url id=术语-2:fallback-base-url>后备基 URL</a>；中止这些步骤。<li><p>否则，<a href=#document-base-url id=术语-2:document-base-url-3>文档基 URL</a> 为
   <code id=术语-2:document-5><a href=dom.html#document>Document</a></code> 中按照 <a href=https://dom.spec.whatwg.org/#concept-tree-order id=术语-2:tree-order data-x-internal=tree-order>树序</a> 的
   第一个有 <code id=术语-2:attr-base-href-2><a href=semantics.html#attr-base-href>href</a></code> 属性的
   <code id=术语-2:the-base-element-2><a href=semantics.html#the-base-element>base</a></code> 元素的 <a href=semantics.html#frozen-base-url id=术语-2:frozen-base-url>冻结的基 URL</a>。</ol>


  

  <h4 id=resolving-urls>2.4.2 解析 URL<a href=#resolving-urls class=self-link></a></h4>

  <p>解析 URL 是从字符串中获取它表示的 <a href=https://url.spec.whatwg.org/#concept-url id=resolving-urls:url-record data-x-internal=url-record>URL 记录</a> 的过程。
  虽然这一过程定义在 WHATWG URL 标准中，但方便起见 HTML 标准也定义了一个包装过的版本。 <a href=references.html#refsURL>[URL]</a></p>

  <p class=note>这一包装只用于出于历史原因当 URL 解析器的字符编码必须匹配文档或环境设置对象时。
  除此之外可以直接使用 <a href=https://url.spec.whatwg.org/#concept-url-parser id=resolving-urls:url-parser data-x-internal=url-parser>URL 解析器</a>。</p>

  <p id=resolve-a-url>
  相对于一个 <var>document</var> 或 <var>environment settings object</var>
  <dfn id=parse-a-url>解析 URL</dfn> <var>url</var>，
  用户代理必须使用下列步骤。
  解析 URL 的结果可能是失败，也可能是 <a href=#resulting-url-string id=resolving-urls:resulting-url-string>结果 URL 字符串</a>
  和 <a href=#resulting-url-record id=resolving-urls:resulting-url-record>结果 URL 记录</a>。</p>

  <ol><li><p>如果指定了 <var>document</var>，
   令 <var>encoding</var> 为 <var>document</var> 的
   <a href=https://dom.spec.whatwg.org/#concept-document-encoding id="resolving-urls:document's-character-encoding" data-x-internal="document's-character-encoding">字符编码</a>，
   否则令它为 <var>environment settings object</var> 的
   <a href=webappapis.html#api-url-character-encoding id=resolving-urls:api-url-character-encoding>API URL 字符编码</a>。<li><p>如果指定了 <var>document</var>，
   令 <var>baseURL</var> 为 <var>document</var> 的
   <a href=#document-base-url id=resolving-urls:document-base-url>基 URL</a>，
   否则令它为 <var>environment settings object</var> 的
   <a href=webappapis.html#api-base-url id=resolving-urls:api-base-url>API 基 URL</a>。<li><p>令 <var>urlRecord</var> 为
   使用 <var>baseURL</var> 和 <var>encoding</var>，在 <var>url</var>
   上应用 <a href=https://url.spec.whatwg.org/#concept-url-parser id=resolving-urls:url-parser-2 data-x-internal=url-parser>URL 解析器</a> 的结果。<li><p>如果 <var>urlRecord</var> 解析失败，中止这些步骤并产生一个错误。<li><p>令<var>urlString</var> 为在 <var>urlRecord</var> 上应用
   <a href=https://url.spec.whatwg.org/#concept-url-serializer id=resolving-urls:concept-url-serializer data-x-internal=concept-url-serializer>URL 序列化</a> 的结果。<li><p>将 <var>urlString</var> 作为 <dfn id=resulting-url-string>结果 URL 字符串</dfn>，
   <var>urlRecord</var> 作为 <dfn id=resulting-url-record>结果 URL 记录</dfn> 返回。</ol>

  



  

  <h4 id=基-url-的动态变化>2.4.3 基 URL 的动态变化<a href=#基-url-的动态变化 class=self-link></a></h4>

  <p>当一个文档的 <a href=#document-base-url id=基-url-的动态变化:document-base-url>文档基 URL</a> 变化时，该文档中所有元素多
  <a href=#affected-by-a-base-url-change id=基-url-的动态变化:affected-by-a-base-url-change>受基 URL 变化的影响</a>。</p>

  <p>当一个元素 <a href=#affected-by-a-base-url-change id=基-url-的动态变化:affected-by-a-base-url-change-2>受基 URL 变化影响</a> 时执行下面的
  <a href=#base-url-change-steps id=基-url-的动态变化:base-url-change-steps>基 URL 变化步骤</a>（定义在 DOM 标准中）：</p>

  <dl class=switch><dt>如果该元素创建了 <a href=semantics.html#hyperlink id=基-url-的动态变化:hyperlink>超链接</a><dd>

    <p>如果该超链接标识的 <a id=基-url-的动态变化:url href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> 正在展现给用户，
    或任何从该 <a id=基-url-的动态变化:url-2 href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> 来的数据正在影响显示，那么应该相对于该元素的
    <a href=https://dom.spec.whatwg.org/#concept-node-document id=基-url-的动态变化:node-document data-x-internal=node-document>节点文档</a>
    <a href=#parse-a-url id=基-url-的动态变化:parse-a-url>重新解析</a>
    <code id=基-url-的动态变化:attr-hyperlink-href><a href=semantics.html#attr-hyperlink-href>href</a></code> 属性并适当地更新 UI。</p>

    <p class=example>例如 CSS <code id=基-url-的动态变化:selector-link><a href=scripting.html#selector-link>:link</a></code>/<code id=基-url-的动态变化:selector-visited><a href=scripting.html#selector-visited>:visited</a></code>
    <a href=https://drafts.csswg.org/selectors/#pseudo-class id=基-url-的动态变化:pseudo-class data-x-internal=pseudo-class>伪类</a> 可能不受影响。</p>

    <p>如果该超链接有 <code id=基-url-的动态变化:ping><a href=semantics.html#ping>ping</a></code> 属性
    且它的 <a id=基-url-的动态变化:url-3 href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> 正在展现给用户，那么应该相对于该元素的
    <a href=https://dom.spec.whatwg.org/#concept-node-document id=基-url-的动态变化:node-document-2 data-x-internal=node-document>节点文档</a>
    <a href=#parse-a-url id=基-url-的动态变化:parse-a-url-2>重新解析</a>
    <code id=基-url-的动态变化:ping-2><a href=semantics.html#ping>ping</a></code> 属性的令牌并适当地更新 UI。</p>

   <dt>如果该属性是有 <code>cite</code> 属性的 <code id=基-url-的动态变化:the-q-element><a href=semantics.html#the-q-element>q</a></code>，<code id=基-url-的动态变化:the-blockquote-element><a href=semantics.html#the-blockquote-element>blockquote</a></code>，
   <code id=基-url-的动态变化:the-ins-element><a href=semantics.html#the-ins-element>ins</a></code>，或 <code id=基-url-的动态变化:the-del-element><a href=semantics.html#the-del-element>del</a></code> 元素<dd>

    <p>如果 <code>cite</code> 属性标识的 <a id=基-url-的动态变化:url-4 href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> 正在展现给用户，
    或任何从该 <a id=基-url-的动态变化:url-5 href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> 来的数据正在影响显示，那么应该相对于该元素的
    <a href=https://dom.spec.whatwg.org/#concept-node-document id=基-url-的动态变化:node-document-3 data-x-internal=node-document>节点文档</a>
    <a href=#parse-a-url id=基-url-的动态变化:parse-a-url-3>重新解析</a>
    <code id=基-url-的动态变化:attr-hyperlink-href-2><a href=semantics.html#attr-hyperlink-href>href</a></code> 属性并适当地更新 UI。</p>

   <dt>否则<dd>

    <p>该元素不直接受影响。</p>

    <p class=example>例如更改基 URL 不影响 <code id=基-url-的动态变化:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> 元素显示的图片，
    尽管脚本中后续对 <code id=基-url-的动态变化:dom-img-src><a href=embedded-content.html#dom-img-src>src</a></code> IDL 属性的访问将返回新的
    <a href=https://url.spec.whatwg.org/#syntax-url-absolute id=基-url-的动态变化:absolute-url data-x-internal=absolute-url>绝对 URL</a>，可能不再对应于正在显示的图片。</p>

   </dl>

  


  

  <h3 id=fetching-resources>2.5 获取资源<a href=#fetching-resources class=self-link></a></h3><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=11235" title="Mechanism to disable sending of cookies with requests for style sheets, background images, fonts, WebSockets, server-sent events, <video src>, <source>, <track>, <iframe>, <img>, etc">11235</a></div>

  <h4 id=术语-3>2.5.1 术语<a href=#术语-3 class=self-link></a></h4>

  <p><a href=https://fetch.spec.whatwg.org/#concept-response-type id=术语-3:concept-response-type data-x-internal=concept-response-type>类型</a> 为 "<code>basic</code>"，
  "<code>cors</code>"，或 "<code>default</code>" 的
  <a href=https://fetch.spec.whatwg.org/#concept-response id=术语-3:concept-response data-x-internal=concept-response>响应</a> 称为 <dfn id=cors-same-origin>CORS-same-origin</dfn>。 <a href=references.html#refsFETCH>[FETCH]</a></p>

  <p><a href=https://fetch.spec.whatwg.org/#concept-response-type id=术语-3:concept-response-type-2 data-x-internal=concept-response-type>类型</a> 为
  "<code>opaque</code>" 或 "<code>opaqueredirect</code>" 的
  <a href=https://fetch.spec.whatwg.org/#concept-response id=术语-3:concept-response-2 data-x-internal=concept-response>响应</a> 称为 <dfn id=cors-cross-origin>CORS-cross-origin</dfn>。</p>

  <p><a href=https://fetch.spec.whatwg.org/#concept-response id=术语-3:concept-response-3 data-x-internal=concept-response>响应</a> 的 <dfn id=unsafe-response data-export="">不安全响应</dfn>
  是它的 <a href=https://fetch.spec.whatwg.org/#concept-internal-response id=术语-3:concept-internal-response data-x-internal=concept-internal-response>内部响应</a>（如果有的话），否则就是
  <a href=https://fetch.spec.whatwg.org/#concept-response id=术语-3:concept-response-4 data-x-internal=concept-response>响应</a> 自己。</p>

  <p>给定 <var>url</var>，<var>destination</var>， <var>corsAttributeState</var>，以及可能有的 <i>same-origin fallback 标志</i>，
  <dfn id=create-a-potential-cors-request>创建一个可能 CORS 的请求</dfn> 应该执行以下步骤：</p>

  <ol><li><p>如果 <var>corsAttributeState</var> 是 <a href=#attr-crossorigin-none id=术语-3:attr-crossorigin-none>No CORS</a>，
   令 <var>mode</var> 为 "<code>no-cors</code>" ，否则令 <var>mode</var> 为 "<code>cors</code>"。<li><p>如果设置了 <i>same-origin fallback 标志</i> 且 <var>mode</var> 为
   "<code>no-cors</code>"，则将 <var>mode</var> 设置为 "<code>same-origin</code>"。<li><p>令 <var>credentialsMode</var> 为 "<code>include</code>"。<li><p>如果 <var>corsAttributeState</var> 为 <a href=#attr-crossorigin-anonymous id=术语-3:attr-crossorigin-anonymous>Anonymous</a>，
   将 <var>credentialsMode</var> 设为 "<code>same-origin</code>"。<li><p>令 <var>request</var> 为一个新的 <a href=https://fetch.spec.whatwg.org/#concept-request id=术语-3:concept-request data-x-internal=concept-request>request</a>，
   其 <a href=https://fetch.spec.whatwg.org/#concept-request-url id=术语-3:concept-request-url data-x-internal=concept-request-url>url</a> 为 <var>url</var>，
   <a href=https://fetch.spec.whatwg.org/#concept-request-destination id=术语-3:concept-request-destination data-x-internal=concept-request-destination>目标地址</a> 为 <var>destination</var>，
   <a href=https://fetch.spec.whatwg.org/#concept-request-mode id=术语-3:concept-request-mode data-x-internal=concept-request-mode>模式</a> 为 <var>mode</var>，
   <a href=https://fetch.spec.whatwg.org/#concept-request-credentials-mode id=术语-3:concept-request-credentials-mode data-x-internal=concept-request-credentials-mode>credentials 模式</a> 为 <var>credentialsMode</var>，
   且设置了 <a href=https://fetch.spec.whatwg.org/#concept-request-use-url-credentials-flag id=术语-3:use-url-credentials-flag data-x-internal=use-url-credentials-flag>use-URL-credentials 标志</a>。</ol>


  <h4 id=content-type-sniffing>2.5.2 确定响应类型<a href=#content-type-sniffing class=self-link></a></h4>

  <p>必须获取响应的 <dfn id=content-type>Content-Type 元数据</dfn>
  并按照 WHATWG MIME Sniffing 标准的要求解释。<a href=references.html#refsMIMESNIFF>[MIMESNIFF]</a></p>

  <p>必须按照 WHATWG MIME Sniffing 标准的要求找到资源的 <dfn id=content-type-sniffing-2><a href=https://mimesniff.spec.whatwg.org/#computed-mime-type>计算后的 MIME 类型</a></dfn>。
  <a href=references.html#refsMIMESNIFF>[MIMESNIFF]</a></p>

  <p><dfn id=content-type-sniffing:-image><a href=https://mimesniff.spec.whatwg.org/#rules-for-sniffing-images-specifically>
  嗅探图片 Content-Type 的规则</a></dfn>，
  <dfn id=content-type-sniffing:-text-or-binary><a href=https://mimesniff.spec.whatwg.org/#rules-for-text-or-binary>
  区分资源是文本还是二进制的规则</a></dfn>，以及
  <dfn id=content-type-sniffing:-video><a href=https://mimesniff.spec.whatwg.org/#rules-for-sniffing-audio-and-video-specifically>
  嗅探音频和视频的规则</a></dfn> 也定义在 WHATWG MIME Sniffing 标准中。
  这些规则返回的结果是一个 <a href=https://mimesniff.spec.whatwg.org/#mime-type id=content-type-sniffing:mime-type data-x-internal=mime-type>MIME 类型</a>。 <a href=references.html#refsMIMESNIFF>[MIMESNIFF]</a></p>

  <p class=warning>WHATWG MIME Sniffing 标准中的规则必须严格遵守。 当用户代理使用与服务器所期望的内容类型检测不同的启发式方法时，可能会发生安全问题。 有关更多详细信息，请参阅 WHATWG MIME Sniffing 标准。 <a href=references.html#refsMIMESNIFF>[MIMESNIFF]</a></p>


  <h4 id=从-meta-元素提取字符编码>2.5.3 从 <code id=从-meta-元素提取字符编码:the-meta-element><a href=semantics.html#the-meta-element>meta</a></code> 元素提取字符编码<a href=#从-meta-元素提取字符编码 class=self-link></a></h4>

  <p>给定字符串 <var>s</var>，<dfn id=algorithm-for-extracting-a-character-encoding-from-a-meta-element>
  从一个 <code>meta</code> 元素提起字符编码的算法</dfn> 如下。
  它或者返回一个字符编码，或者什么都不返回。</p>

  <ol><li><p>令 <var>position</var> 为 <var>s</var> 中的指针初始指向字符串开始。<li><p><i>Loop</i>：在 <var>s</var> 中找到 <var>position</var> 后面
   <a href=https://infra.spec.whatwg.org/#ascii-case-insensitive id=从-meta-元素提取字符编码:ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII 大小写不敏感地</a> 匹配 "<code>charset</code>"
   的前 7 个字符。 如果没有找到这样的匹配，什么都不返回并中止这些步骤。<li><p>跳过所有紧接着 "<code>charset</code>" 后面的
   <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=从-meta-元素提取字符编码:space-characters data-x-internal=space-characters>ASCII 空白</a>（也可能没有）。<li><p>如果下一个字符不是 U+003D EQUALS SIGN （=），让 <var>position</var> 指向下一个字符之前，
   跳回到标记为 <i>loop</i> 的步骤。<li><p>跳过所有紧接着等号后面的
   <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=从-meta-元素提取字符编码:space-characters-2 data-x-internal=space-characters>ASCII 空白</a>（也可能没有）。<li>

    <p>处理下一个字符：</p>

    <dl class=switch><dt>如果它是一个 U+0022 QUOTATION MARK 字符（"）且 <var>s</var> 中后面还有一个
     U+0022 QUOTATION MARK 字符 （"）<dt>如果它是一个 U+0027 APOSTROPHE 字符 （'）且 <var>s</var> 中后面还有一个
     U+0027 APOSTROPHE 字符 （'）<dd>返回从当前字符到当前字符的下一次出现的子字符串
     <a href=https://encoding.spec.whatwg.org/#concept-encoding-get id=从-meta-元素提取字符编码:getting-an-encoding data-x-internal=getting-an-encoding>获取编码</a> 的结果。<dt>如果它是一个没有闭合的 U+0022 QUOTATION MARK 字符 （"）<dt>如果它是一个没有闭合的 U+0027 APOSTROPHE 字符 （'）<dt>如果没有下一个字符<dd>什么都不返回。<dt>否则<dd>返回从当前字符到（不包含）第一个
     <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=从-meta-元素提取字符编码:space-characters-3 data-x-internal=space-characters>ASCII 空白</a> 或 U+003B SEMICOLON 字符（;）
     或 <var>s</var> 的末尾（取决于哪一个先出现）
     构成的子字符串中 <a href=https://encoding.spec.whatwg.org/#concept-encoding-get id=从-meta-元素提取字符编码:getting-an-encoding-2 data-x-internal=getting-an-encoding>获取编码</a> 的结果。</dl>

   </ol>

  <p class=note>该算法与 HTTP 规范中的算法不同
  （例如，HTTP 不允许使用单引号，并且需要支持该算法不支持的反斜线转义机制）。
  
  虽然在历史上本算法用于 HTTP 相关的上下文，但不同的实现支持的语法前段时间就不一样了。<a href=references.html#refsHTTP>[HTTP]</a></p>

  


  <h4 id=cors-设置属性>2.5.4 CORS 设置属性<a href=#cors-设置属性 class=self-link></a></h4>

  <p><dfn id=cors-settings-attribute>CORS 设置属性</dfn> 是一个
  <a href=#enumerated-attribute id=cors-设置属性:enumerated-attribute>枚举属性</a>。下表列出了关键字以及属性状态
  — 左侧一列的关键字对应第二列同一行中的状态。</p>

  <table><thead><tr><th> 关键字
     <th> 状态
     <th> 简要介绍
   <tbody><tr><td><dfn id=attr-crossorigin-anonymous-keyword><code>anonymous</code></dfn>
     <td><dfn id=attr-crossorigin-anonymous>匿名</dfn>
     <td>该元素的 <a href=https://fetch.spec.whatwg.org/#concept-request id=cors-设置属性:concept-request data-x-internal=concept-request>请求</a> 会把 <a href=https://fetch.spec.whatwg.org/#concept-request-mode id=cors-设置属性:concept-request-mode data-x-internal=concept-request-mode>模式</a> 设置为 "<code>cors</code>"
     把 <a href=https://fetch.spec.whatwg.org/#concept-request-credentials-mode id=cors-设置属性:concept-request-credentials-mode data-x-internal=concept-request-credentials-mode>credentials 模式</a> 设置为
     "<code>same-origin</code>"。
    <tr><td><dfn id=attr-crossorigin-use-credentials-keyword><code>use-credentials</code></dfn>
     <td><dfn id=attr-crossorigin-use-credentials>使用 Credentials</dfn>
     <td>该元素的 <a href=https://fetch.spec.whatwg.org/#concept-request id=cors-设置属性:concept-request-2 data-x-internal=concept-request>请求</a> 会把 <a href=https://fetch.spec.whatwg.org/#concept-request-mode id=cors-设置属性:concept-request-mode-2 data-x-internal=concept-request-mode>模式</a> 设置为 "<code>cors</code>"
     把 <a href=https://fetch.spec.whatwg.org/#concept-request-credentials-mode id=cors-设置属性:concept-request-credentials-mode-2 data-x-internal=concept-request-credentials-mode>credentials 模式</a> 设置为
     "<code>include</code>"。
  </table>

  <p>空字符串也是合法的关键字，对应 <a href=#attr-crossorigin-anonymous id=cors-设置属性:attr-crossorigin-anonymous>匿名</a> 状态。
  该属性的 <i id=cors-设置属性:invalid-value-default><a href=#invalid-value-default>非法值的默认</a></i> 是
  <a href=#attr-crossorigin-anonymous id=cors-设置属性:attr-crossorigin-anonymous-2>匿名</a> 状态。
  为了 <a href=#reflect id=cors-设置属性:reflect>反映</a> 的目的，
  <a href=#attr-crossorigin-anonymous id=cors-设置属性:attr-crossorigin-anonymous-3>匿名</a> 状态的正规的
  关键字是 <code id=cors-设置属性:attr-crossorigin-anonymous-keyword><a href=#attr-crossorigin-anonymous-keyword>anonymous</a></code>。
  <i id=cors-设置属性:missing-value-default><a href=#missing-value-default>缺失值的默认</a></i>（当属性被省略时使用）是
  <dfn id=attr-crossorigin-none>No CORS</dfn> 状态。</p>


  <h4 id=引荐来源策略属性>2.5.5 引荐来源策略属性<a href=#引荐来源策略属性 class=self-link></a></h4>

  <p><dfn id=referrer-policy-attribute data-export="">引荐来源策略属性</dfn>
  是一个 <a href=#enumerated-attribute id=引荐来源策略属性:enumerated-attribute>枚举属性</a>。
  每个 <a href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy id=引荐来源策略属性:referrer-policy data-x-internal=referrer-policy>引荐来源策略</a>包括空字符串都是该属性的关键字，
  都映射到一个同名的状态。</p>

  <p>该属性的 <i id=引荐来源策略属性:invalid-value-default><a href=#invalid-value-default>非法值的默认</a></i> 和 <i id=引荐来源策略属性:missing-value-default><a href=#missing-value-default>缺失值的默认</a></i> 都是空字符串状态。</p>

  <p>这些状态对各种 <a href=https://fetch.spec.whatwg.org/#concept-fetch id=引荐来源策略属性:concept-fetch data-x-internal=concept-fetch>获取</a> 处理模型的影响详细地定义在
  本标准中，WHATWG Fetch 标准中，以及 <cite>Referrer Policy</cite> 中。 <a href=references.html#refsFETCH>[FETCH]</a> <a href=references.html#refsREFERRERPOLICY>[REFERRERPOLICY]</a></p>

  <div class=note>
   <p>对给定的 <a href=https://fetch.spec.whatwg.org/#concept-fetch id=引荐来源策略属性:concept-fetch-2 data-x-internal=concept-fetch>获取</a> 使用哪个处理模型取决于多个信号；
   引荐来源策略属性只是其中之一。一般来说，这些信号的处理顺序是：</p>

   <ol><li><p>首先，是否出现一个 <code id=引荐来源策略属性:link-type-noreferrer><a href=semantics.html#link-type-noreferrer>noreferrer</a></code> 超链接类型；<li><p>然后，<a href=#referrer-policy-attribute id=引荐来源策略属性:referrer-policy-attribute>引荐来源策略属性</a> 的值；<li><p>然后，是否出现任何 <code id=引荐来源策略属性:attr-meta-name><a href=semantics.html#attr-meta-name>name</a></code> 属性设为
    <code id=引荐来源策略属性:meta-referrer><a href=semantics.html#meta-referrer>referrer</a></code> 的 <code id=引荐来源策略属性:the-meta-element><a href=semantics.html#the-meta-element>meta</a></code> 元素。<li><p>最后，`<code id=引荐来源策略属性:http-referrer-policy><a data-x-internal=http-referrer-policy href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-header-dfn>Referrer-Policy</a></code>` HTTP 头。</ol>
  </div>


  <h3 id=通用-dom-接口>2.6 通用 DOM 接口<a href=#通用-dom-接口 class=self-link></a></h3>

  <h4 id=在-idl-属性中反映内容属性>2.6.1 在 IDL 属性中反映内容属性<a href=#在-idl-属性中反映内容属性 class=self-link></a></h4>

  <p>定义有些 IDL 属性是为了 <dfn id=reflect>反映</dfn> 特定的内容属性。
  这意味着在获取 IDL 属性时返回的是内容属性的当前值，
  在设置 IDL 属性时将内容属性更改为给定的值。</p>

  

  <p>通常，当获取 IDL 属性时如果内容属性不存在，IDL 属性必须表现为该内容属性的值为空字符串；
  当设置时，如果内容属性的值不存在，则必须首先添加它。</p>

  <p>如果反映内容属性的 IDL 属性是<code id=在-idl-属性中反映内容属性:idl-usvstring><a data-x-internal=idl-usvstring href=https://heycam.github.io/webidl/#idl-USVString>USVString</a></code>属性，
  且它的内容属性定义为包含一个 URL。那么在获取时如果内容属性不存在，那么 IDL 属性必须返回空字符串。
  否则，IDL 属性必须相对于元素的<a href=https://dom.spec.whatwg.org/#concept-node-document id=在-idl-属性中反映内容属性:node-document data-x-internal=node-document>节点文档</a>
  <a href=#parse-a-url id=在-idl-属性中反映内容属性:parse-a-url>解析</a>内容属性的值，如果解析成功则返回
  <a href=#resulting-url-string id=在-idl-属性中反映内容属性:resulting-url-string>结果 URL 字符串</a>。
  如果解析失败，则必须将内容属性的值<a href=https://heycam.github.io/webidl/#es-type-mapping id=在-idl-属性中反映内容属性:concept-idl-convert data-x-internal=concept-idl-convert>转换</a>
  为 <code id=在-idl-属性中反映内容属性:idl-usvstring-2><a data-x-internal=idl-usvstring href=https://heycam.github.io/webidl/#idl-USVString>USVString</a></code> 并返回。
  在设置时，必须设置内容属性的值为新值。</p>

  <p>如果反映内容属性的 IDL 属性是 <code id=在-idl-属性中反映内容属性:idl-domstring><a data-x-internal=idl-domstring href=https://heycam.github.io/webidl/#idl-DOMString>DOMString</a></code>属性，
  且它的内容属性是 <a href=#enumerated-attribute id=在-idl-属性中反映内容属性:enumerated-attribute>枚举属性</a>，
  且该 IDL 属性 <dfn id=limited-to-only-known-values>只限于已知的一些值</dfn>，
  那么当获取时，如果该 IDL 属性所处状态有相关联的一致的值，IDL 属性必须返回它。
  如果属性处在一个没有相关联的关键字值的状态，或者属性所处状态未定义
  （比如属性缺失且没有<i id=在-idl-属性中反映内容属性:missing-value-default><a href=#missing-value-default>默认缺失值</a></i>）时，
  IDL 属性必须返回空字符串。
  当设置时，必须设置内容属性的值为指定的新值。</p>

  <p>如果反映内容属性的 IDL 属性是可为空的 <code id=在-idl-属性中反映内容属性:idl-domstring-2><a data-x-internal=idl-domstring href=https://heycam.github.io/webidl/#idl-DOMString>DOMString</a></code>  属性，
  且它的内容属性是一个 <a href=#enumerated-attribute id=在-idl-属性中反映内容属性:enumerated-attribute-2>枚举属性</a>， 那么当获取时，
  如果对应的内容属性处于它的 <i id=在-idl-属性中反映内容属性:missing-value-default-2><a href=#missing-value-default>默认缺失值</a></i>，
  那么该 IDL 属性必须返回 null，否则必须返回与该属性所处状态相关联的一致的值。
  当设置时，如果新值为 null 则必须移除该内容属性，否则必须设置内容属性为给定的新值。</p>

  <p>如果反映内容属性的 IDL 属性是 <code id=在-idl-属性中反映内容属性:idl-domstring-3><a data-x-internal=idl-domstring href=https://heycam.github.io/webidl/#idl-DOMString>DOMString</a></code> 或 <code id=在-idl-属性中反映内容属性:idl-usvstring-3><a data-x-internal=idl-usvstring href=https://heycam.github.io/webidl/#idl-USVString>USVString</a></code> 属性但不归于上述类别中，
  那么获取和设置必须透明地，保持大小写地进行。</p>

  <p>如果反映内容属性的 IDL 属性是 <code id=在-idl-属性中反映内容属性:idl-boolean><a data-x-internal=idl-boolean href=https://heycam.github.io/webidl/#idl-boolean>布尔</a></code> 属性，
  当获取该 IDL 属性时，如果设置了该内容属性则必须返回 true，
  如果不存在则返回 false。当设置时，如果该 IDL 属性被设为 false 则必须移除该内容属性。
  如果该 IDL 属性被设为 true 则必须将内容属性设为空字符串。
  （这与<a href=#boolean-attribute id=在-idl-属性中反映内容属性:boolean-attribute>布尔内容属性</a>的规则对应。）</p>

  <p>如果反映内容属性的 IDL 属性是有符号整数类型 （<code id=在-idl-属性中反映内容属性:idl-long><a data-x-internal=idl-long href=https://heycam.github.io/webidl/#idl-long>long</a></code>），
  那么当获取时，必须根据<a href=#rules-for-parsing-integers id=在-idl-属性中反映内容属性:rules-for-parsing-integers>解析有符号整数的规则</a>
  解析内容属性，如果解析成功且值在该 IDL 属性的类型的取值范围内，则必须返回结果值。
  如果解析失败或返回了范围外的值，或者该属性不存在，则必须返回默认值，如果没有默认值则返回0。
  当设置时，必须将给定的值转换为可以将该数字表示为<a href=#valid-integer id=在-idl-属性中反映内容属性:valid-integer>合法整数</a>
  的可能的最短字符串，然后该字符串必须被用作新的内容属性值。</p>

  <p>如果反映内容属性的 IDL 属性是有符号整数类型 （<code id=在-idl-属性中反映内容属性:idl-long-2><a data-x-internal=idl-long href=https://heycam.github.io/webidl/#idl-long>long</a></code>）
  且 <dfn id=limited-to-only-non-negative-numbers>仅限为非负数字</dfn>，那么当获取时，
  该内容属性必须根据<a href=#rules-for-parsing-non-negative-integers id=在-idl-属性中反映内容属性:rules-for-parsing-non-negative-integers>解析非负整数的规则</a>
  解析，如果解析成功且值在该 IDL 属性类型的取值范围内，必须返回结果值。
  如果解析失败或返回了范围外的值，或者该属性不存在，则必须返回默认值，
  如果没有默认值则返回 −1。
  当设置时，如果值为负用户代理必须抛出
  <a id=在-idl-属性中反映内容属性:indexsizeerror href=https://heycam.github.io/webidl/#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=在-idl-属性中反映内容属性:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。
  否则必须将给定的值转换为可以将该数字表示为
  <a href=#valid-non-negative-integer id=在-idl-属性中反映内容属性:valid-non-negative-integer>合法非负整数</a> 的可能的最短字符串，
  然后该字符串必须被用作新的内容属性值。</p>

  <p>如果反映内容属性的 IDL 属性是 <em>无符号</em> 整数类型 （<code id=在-idl-属性中反映内容属性:idl-unsigned-long><a data-x-internal=idl-unsigned-long href=https://heycam.github.io/webidl/#idl-unsigned-long>unsigned long</a></code>） ，那么当获取时，必须根据
  <a href=#rules-for-parsing-non-negative-integers id=在-idl-属性中反映内容属性:rules-for-parsing-non-negative-integers-2>解析非负整数的规则</a>
  解析内容属性，如果解析成功且值在 0 到 2147483647 范围内（含），
  必须返回结果值。 如果解析失败或返回了范围外的值，或者该属性不存在，必须返回默认值，
  如果没有默认值则返回 0。当设置时，如果新值处于 0 到 2147483647 范围内，
  则令 <var>n</var> 为这个新值，否则令<var>n</var> 为默认值（如果没有默认值则为0）；
  然后必须将 <var>n</var> 转换为可将该数字表示为
  <a href=#valid-non-negative-integer id=在-idl-属性中反映内容属性:valid-non-negative-integer-2>合法非负整数</a>
  的可能的最短字符串，然后该字符串必须被用作新的内容属性值。</p>
  

  <p>如果反映内容属性的 IDL 属性是无符号整数类型（<code id=在-idl-属性中反映内容属性:idl-unsigned-long-2><a data-x-internal=idl-unsigned-long href=https://heycam.github.io/webidl/#idl-unsigned-long>unsigned long</a></code>） 且
  <dfn id=limited-to-only-non-negative-numbers-greater-than-zero>仅限于大于零的非负整数
  </dfn>，那么行为与上一种情形类似，但零是不允许的。
  当获取时，首先必须根据 <a href=#rules-for-parsing-non-negative-integers id=在-idl-属性中反映内容属性:rules-for-parsing-non-negative-integers-3>解析非负整数的规则
  </a>解析内容属性， 如果解析成功且值在 1 到 2147483647 范围内（含），则必须返回结果值。
  如果解析失败或返回了范围外的值，或者该属性不存在， 则必须返回默认值（没有默认值则为1）。
  当设置时，如果值为0，用户代理必须抛出 <a id=在-idl-属性中反映内容属性:indexsizeerror-2 href=https://heycam.github.io/webidl/#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=在-idl-属性中反映内容属性:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。否则，
  如果新值在 1 到 2147483647 范围内，那么令 <var>n</var> 为这个新值。
  否则令 <var>n</var> 为默认值（ 如果没有默认值则为 1）；
  然后必须将<var>n</var> 转换为可将该数字表示为
  <a href=#valid-non-negative-integer id=在-idl-属性中反映内容属性:valid-non-negative-integer-3>合法非负整数</a>
  的可能的最短字符串，然后该字符串必须被用作新的内容属性值。</p> 

  <p>如果反映内容属性的 IDL 属性是无符号整数类型（<code id=在-idl-属性中反映内容属性:idl-unsigned-long-3><a data-x-internal=idl-unsigned-long href=https://heycam.github.io/webidl/#idl-unsigned-long>unsigned long</a></code>） 且
  <dfn id=limited-to-only-non-negative-numbers-greater-than-zero-with-fallback>
  仅限于有fallback 的大于0的非负整数</dfn>，则行为与前一种情形类似，但不允许的值将被转换为默认值。
  当获取时， 首先必须根据<a href=#rules-for-parsing-non-negative-integers id=在-idl-属性中反映内容属性:rules-for-parsing-non-negative-integers-4>解析非负整数的规则
  </a> 解析内容属性，如果解析成功且值在 1 到 2147483647 范围内（含），则必须返回结果值。
  如果解析失败或返回了范围外的值，或者该属性不存在，则必须返回默认值。
  当设置时，如果新值在 1 到 2147483647 范围内，则令 <var>n</var> 为这个新值，
  否则令 <var>n</var> 为默认值；然后必须将 <var>n</var> 转换为可将该数字表示为
  <a href=#valid-non-negative-integer id=在-idl-属性中反映内容属性:valid-non-negative-integer-4>合法非负整数</a>
  的可能的最短字符串，然后该字符串必须被用作新的内容属性值。</p> 

  <p>如果反映内容属性的 IDL 属性是<dfn id=clamped-to-the-range>固定范围</dfn>
  到 [<var>min</var>, <var>max</var>] 的无符号整数类型（<code id=在-idl-属性中反映内容属性:idl-unsigned-long-4><a data-x-internal=idl-unsigned-long href=https://heycam.github.io/webidl/#idl-unsigned-long>unsigned long</a></code>），
  当获取时，必须先根据 <a href=#rules-for-parsing-non-negative-integers id=在-idl-属性中反映内容属性:rules-for-parsing-non-negative-integers-5>解析非负整数的规则</a>
  解析内容属性，如果解析成功且值在 <var>min</var> 和 <var>max</var> 之间（包含），
  必须返回该结果值。如果失败，必须返回默认值。如果解析成功但值小于 <var>min</var>，必须返回 <var>min</var>。
  如果解析成功但值大于 <var>max</var>，必须返回 <var>max</var>。当设置时，其行为与设置普通无符号整数一样。</p>

  <p>如果反映内容属性的 IDL 属性是浮点数类型（<code id=在-idl-属性中反映内容属性:idl-double><a data-x-internal=idl-double href=https://heycam.github.io/webidl/#idl-double>double</a></code> 或
  <code id=在-idl-属性中反映内容属性:idl-unrestricted-double><a data-x-internal=idl-unrestricted-double href=https://heycam.github.io/webidl/#idl-unrestricted-double>unrestricted double</a></code>），那么当获取时，
  必须根据 <a href=#rules-for-parsing-floating-point-number-values id=在-idl-属性中反映内容属性:rules-for-parsing-floating-point-number-values>
  解析浮点数值的规则</a> 解析内容属性，如果解析成功则必须返回结果值。
  如果解析失败或该属性不存在，则必须返回默认值（如果没有默认值则为0）。 当设置时，
  必须将给定的值转换为 <a href=#best-representation-of-the-number-as-a-floating-point-number id=在-idl-属性中反映内容属性:best-representation-of-the-number-as-a-floating-point-number>
  浮点数的最佳表示</a>，然后该字符串必须被用作新的内容属性值。</p>

  <p>如果反映内容属性的 IDL 属性是浮点数类型（<code id=在-idl-属性中反映内容属性:idl-double-2><a data-x-internal=idl-double href=https://heycam.github.io/webidl/#idl-double>double</a></code> 或 <code id=在-idl-属性中反映内容属性:idl-unrestricted-double-2><a data-x-internal=idl-unrestricted-double href=https://heycam.github.io/webidl/#idl-unrestricted-double>unrestricted
  double</a></code>）且 <dfn id=limited-to-numbers-greater-than-zero>
  仅限于大于零的数字</dfn>，那么行为与上一种情形类似但不允许零和负值。当获取时，必须根据
  <a href=#rules-for-parsing-floating-point-number-values id=在-idl-属性中反映内容属性:rules-for-parsing-floating-point-number-values-2>
  解析浮点数值的规则</a>解析内容属性，如果解析成功且值大于 0.0，则必须返回结果值。
  否则如果解析失败或返回了范围外的值，或者该属性不存在，则必须返回默认值（如果没有默认值则为0）。
  当设置时，如果新值小于等于0，那么必须忽略该值。
  否则，必须将给定的值转换为
  <a href=#best-representation-of-the-number-as-a-floating-point-number id=在-idl-属性中反映内容属性:best-representation-of-the-number-as-a-floating-point-number-2>
  浮点数的最佳表示</a>，然后该字符串必须被用作新的内容属性值。</p>

  <p class=note>当设置 Infinity 和 Not-a-Number （NaN）这些值时会抛出异常。
  定义在 Web IDL 标准中。 <a href=references.html#refsWEBIDL>[WEBIDL]</a></p>

  <p>如果反映内容属性的 IDL 属性的类型为 <code id=在-idl-属性中反映内容属性:domtokenlist><a data-x-internal=domtokenlist href=https://dom.spec.whatwg.org/#interface-domtokenlist>DOMTokenList</a></code>，那么当获取时，
  必须返回 <code id=在-idl-属性中反映内容属性:domtokenlist-2><a data-x-internal=domtokenlist href=https://dom.spec.whatwg.org/#interface-domtokenlist>DOMTokenList</a></code> 对象，与它关联的元素为被查询的元素，
  与它关联的属性的本地名称为被查询的属性名。</p>

  <p>如果反映内容属性的 IDL 属性为 <code id=在-idl-属性中反映内容属性:htmlelement><a href=dom.html#htmlelement>HTMLElement</a></code> 类型，
  或者依赖于 <code id=在-idl-属性中反映内容属性:htmlelement-2><a href=dom.html#htmlelement>HTMLElement</a></code> 的接口，那么当获取时，
  它必须运行下列算法（在第一个返回值的地方停机）：</p>

  <ol><li>如果对应的内容属性不存在，那么 IDL 属性必须返回 null。<li>令 <var>candidate</var> 为：以对应的内容属性的当前值为参数，
   在内容属性的元素的 <a href=https://dom.spec.whatwg.org/#concept-node-document id=在-idl-属性中反映内容属性:node-document-2 data-x-internal=node-document>节点文档</a> 上调用
   <code id=在-idl-属性中反映内容属性:dom-document-getelementbyid><a data-x-internal=dom-document-getelementbyid href=https://dom.spec.whatwg.org/#dom-nonelementparentnode-getelementbyid>document.getElementById()</a></code>
   方法将会找到的元素。<li>如果 <var>candidate</var> 是 null，或者它与 IDL 属性类型不兼容，
   那么该 IDL 属性必须返回 null。<li>否则，它必须返回 <var>candidate</var>。</ol>

  <p>当设置时，如果给定的元素有 <code id=在-idl-属性中反映内容属性:the-id-attribute><a href=dom.html#the-id-attribute>id</a></code> 属性，
  且与被设置属性的元素有同样的 <a href=https://dom.spec.whatwg.org/#concept-tree id=在-idl-属性中反映内容属性:tree data-x-internal=tree>树</a>，
  且给定的元素是该 <a href=https://dom.spec.whatwg.org/#concept-tree id=在-idl-属性中反映内容属性:tree-2 data-x-internal=tree>树</a> 中 <a href=https://dom.spec.whatwg.org/#concept-id id=在-idl-属性中反映内容属性:concept-id data-x-internal=concept-id>ID</a>
  为该 <code id=在-idl-属性中反映内容属性:the-id-attribute-2><a href=dom.html#the-id-attribute>id</a></code> 属性值的第一个元素，则必须将内容属性设置为
  该 <code id=在-idl-属性中反映内容属性:the-id-attribute-3><a href=dom.html#the-id-attribute>id</a></code> 属性的值。否则，必须设置该内容属性为空字符串。</p>

  




  <h4 id=集合>2.6.2 集合<a href=#集合 class=self-link></a></h4>

  <p><code id=集合:htmlformcontrolscollection><a href=#htmlformcontrolscollection>HTMLFormControlsCollection</a></code> 和 <code id=集合:htmloptionscollection><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> 接口是
  从 <code id=集合:htmlcollection><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> 接口派生出来的 <a href=https://dom.spec.whatwg.org/#concept-collection id=集合:concept-collection data-x-internal=concept-collection>集合</a> 。
  <code id=集合:htmlallcollection><a href=#htmlallcollection>HTMLAllCollection</a></code> 接口是 <a href=https://dom.spec.whatwg.org/#concept-collection id=集合:concept-collection-2 data-x-internal=concept-collection>集合</a>，
  但它不派生自 <code id=集合:htmlcollection-2><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code>。</p>


  <h5 id=htmlallcollection-接口>2.6.2.1 <code id=htmlallcollection-接口:htmlallcollection><a href=#htmlallcollection>HTMLAllCollection</a></code> 接口<a href=#htmlallcollection-接口 class=self-link></a></h5>

  <p><code id=htmlallcollection-接口:htmlallcollection-2><a href=#htmlallcollection>HTMLAllCollection</a></code> 接口用于遗留的 <code id=htmlallcollection-接口:dom-document-all><a href=obsolete.html#dom-document-all>document.all</a></code>
  属性。它的操作与 <code id=htmlallcollection-接口:htmlcollection><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> 类似；主要的区别在于它的方法允许各种各样的滥用，
  通过属性访问得到的返回值，也可以通过函数调用来得到。</p>

  <p class=note>所有 <code id=htmlallcollection-接口:htmlallcollection-3><a href=#htmlallcollection>HTMLAllCollection</a></code> 对象的根都是 <code id=htmlallcollection-接口:document><a href=dom.html#document>Document</a></code>
  且它的过滤器匹配所有元素，所以 <code id=htmlallcollection-接口:htmlallcollection-4><a href=#htmlallcollection>HTMLAllCollection</a></code> 对象
  <a href=https://dom.spec.whatwg.org/#represented-by-the-collection id=htmlallcollection-接口:represented-by-the-collection data-x-internal=represented-by-the-collection>集合中表示的</a> 元素由所有
  根 <code id=htmlallcollection-接口:document-2><a href=dom.html#document>Document</a></code> 的后代元素组成。</p>

  <pre class=idl>[LegacyUnenumerableNamedProperties]
interface <dfn id=htmlallcollection>HTMLAllCollection</dfn> {
  readonly attribute unsigned long <a href=#dom-htmlallcollection-length id=htmlallcollection-接口:dom-htmlallcollection-length>length</a>;
  getter <a id=htmlallcollection-接口:element href=https://dom.spec.whatwg.org/#interface-element data-x-internal=element>Element</a>? (unsigned long index);
  getter (<a id=htmlallcollection-接口:htmlcollection-2 href=https://dom.spec.whatwg.org/#interface-htmlcollection data-x-internal=htmlcollection>HTMLCollection</a> or <a id=htmlallcollection-接口:element-2 href=https://dom.spec.whatwg.org/#interface-element data-x-internal=element>Element</a>)? <a href=#dom-htmlallcollection-nameditem id=htmlallcollection-接口:dom-htmlallcollection-nameditem>namedItem</a>(DOMString name);
  legacycaller (<a id=htmlallcollection-接口:htmlcollection-3 href=https://dom.spec.whatwg.org/#interface-htmlcollection data-x-internal=htmlcollection>HTMLCollection</a> or <a id=htmlallcollection-接口:element-3 href=https://dom.spec.whatwg.org/#interface-element data-x-internal=element>Element</a>)? <a href=#dom-htmlallcollection-item id=htmlallcollection-接口:dom-htmlallcollection-item>item</a>(optional DOMString nameOrIndex);
};</pre>

  <dl class=domintro><dt><var>collection</var> . <code id=htmlallcollection-接口:dom-htmlallcollection-length-2><a href=#dom-htmlallcollection-length>length</a></code><dd>
    <p>返回集合中元素的数目。</p>
   <dt><var>element</var> = <var>collection</var> . <code id=htmlallcollection-接口:dom-htmlallcollection-item-2><a href=#dom-htmlallcollection-item>item</a></code>(<var>index</var>)<dt><var>element</var> = <var>collection</var>(<var>index</var>)<dt><var>element</var> = <var>collection</var>[<var>index</var>]<dd>
    <p>返回集合中在下标 <var>index</var> 处的元素（由<a href=https://dom.spec.whatwg.org/#concept-tree-order id=htmlallcollection-接口:tree-order data-x-internal=tree-order>树序</a>决定)。</p>
   <dt><var>element</var> = <var>collection</var> . <code id=htmlallcollection-接口:dom-htmlallcollection-item-3><a href=#dom-htmlallcollection-item>item</a></code>(<var>name</var>)<dt><var>collection</var> = <var>collection</var> . <code id=htmlallcollection-接口:dom-htmlallcollection-item-4><a href=#dom-htmlallcollection-item>item</a></code>(<var>name</var>)<dt><var>element</var> = <var>collection</var> . <code id=htmlallcollection-接口:dom-htmlallcollection-nameditem-2><a href=#dom-htmlallcollection-nameditem>namedItem</a></code>(<var>name</var>)<dt><var>collection</var> = <var>collection</var> . <code id=htmlallcollection-接口:dom-htmlallcollection-nameditem-3><a href=#dom-htmlallcollection-nameditem>namedItem</a></code>(<var>name</var>)<dt><var>element</var> = <var>collection</var>(<var>name</var>)<dt><var>collection</var> = <var>collection</var>(<var>name</var>)<dt><var>element</var> = <var>collection</var>[<var>name</var>]<dt><var>collection</var> = <var>collection</var>[<var>name</var>]<dd>
    <p>返回集合中 ID 为 <a href=https://dom.spec.whatwg.org/#concept-id id=htmlallcollection-接口:concept-id data-x-internal=concept-id>ID</a> 或 name 为 <var>name</var> 的元素。</p>
    <p>如果有多个匹配元素，则返回一个包含所有那些元素的 <code id=htmlallcollection-接口:htmlcollection-4><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> 对象。</p>
    
    <p>只有 <code id=htmlallcollection-接口:the-button-element><a href=forms.html#the-button-element>button</a></code>， <code id=htmlallcollection-接口:the-form-element><a href=forms.html#the-form-element>form</a></code>， <code id=htmlallcollection-接口:the-iframe-element><a href=embedded-content.html#the-iframe-element>iframe</a></code>，
    <code id=htmlallcollection-接口:the-input-element><a href=forms.html#the-input-element>input</a></code>， <code id=htmlallcollection-接口:the-map-element><a href=embedded-content.html#the-map-element>map</a></code>， <code id=htmlallcollection-接口:the-meta-element><a href=semantics.html#the-meta-element>meta</a></code>， <code id=htmlallcollection-接口:the-object-element><a href=embedded-content.html#the-object-element>object</a></code>，
    <code id=htmlallcollection-接口:the-select-element><a href=forms.html#the-select-element>select</a></code>， 和 <code id=htmlallcollection-接口:the-textarea-element><a href=forms.html#the-textarea-element>textarea</a></code> 元素可以具有用于此方法的 name ；
    它们的 name 由它们 <code>name</code> 属性的值给出。</p>
   </dl>

  

  <p>该对象 <a href=https://heycam.github.io/webidl/#dfn-supported-property-indices id=htmlallcollection-接口:supported-property-indices data-x-internal=supported-property-indices>支持的属性下标</a>
  与 <code id=htmlallcollection-接口:htmlcollection-5><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> 中定义的相同。</p>

  <p><a href=https://heycam.github.io/webidl/#dfn-supported-property-names id=htmlallcollection-接口:supported-property-names data-x-internal=supported-property-names>支持的属性名</a> 由
  <a href=https://dom.spec.whatwg.org/#represented-by-the-collection id=htmlallcollection-接口:represented-by-the-collection-2 data-x-internal=represented-by-the-collection>该集合表示的</a> 所有元素的所有
  <code id=htmlallcollection-接口:the-id-attribute><a href=dom.html#the-id-attribute>id</a></code> 属性的非空值，以及
  <a href=https://dom.spec.whatwg.org/#represented-by-the-collection id=htmlallcollection-接口:represented-by-the-collection-3 data-x-internal=represented-by-the-collection>该集合表示的</a> 所有
  <a href=#all-named-elements id=htmlallcollection-接口:all-named-elements>命名元素</a>的所有 <code>name</code> 属性
  的非空值组成。这些值以 <a href=https://dom.spec.whatwg.org/#concept-tree-order id=htmlallcollection-接口:tree-order-2 data-x-internal=tree-order>树序</a> 排列，
  忽略后面的重复项，元素的 <code id=htmlallcollection-接口:the-id-attribute-2><a href=dom.html#the-id-attribute>id</a></code> 在 <code>name</code> 之前
  （如果都存在的话），它们是互不相同的也互不为重复项。</p>

  <p>当获取时，<dfn id=dom-htmlallcollection-length><code>length</code></dfn>
  属性必须返回 <a href=https://dom.spec.whatwg.org/#represented-by-the-collection id=htmlallcollection-接口:represented-by-the-collection-4 data-x-internal=represented-by-the-collection>该集合表示的</a> 节点的数目。</p>

  <p>索引属性 getter 必须返回给定下标从该 <code id=htmlallcollection-接口:htmlallcollection-5><a href=#htmlallcollection>HTMLAllCollection</a></code>
  <a href=#concept-get-all-indexed id=htmlallcollection-接口:concept-get-all-indexed>获取“所有”索引元素</a> 的结果。</p>

  <p><dfn id=dom-htmlallcollection-nameditem><code>namedItem(<var>name</var>)</code></dfn>
  方法必须返回给定 <var>name</var> 从该<code id=htmlallcollection-接口:htmlallcollection-6><a href=#htmlallcollection>HTMLAllCollection</a></code>
  <a href=#concept-get-all-named id=htmlallcollection-接口:concept-get-all-named>获取“所有”命名元素</a> 的结果。</p>

  <p><dfn id=dom-htmlallcollection-item><code>item(<var>nameOrIndex</var>)</code></dfn>
  方法（以及<code>遗留的调用</code> 行为）必须运行下列步骤：</p>

  <ol><li><p>如果未提供 <var>nameOrIndex</var> 则返回 null。<li><p>如果 <var>nameOrIndex</var> <a href=https://heycam.github.io/webidl/#es-type-mapping id=htmlallcollection-接口:concept-idl-convert data-x-internal=concept-idl-convert>转换</a> 为
   JavaScript 字符串值后是一个 <a href=https://heycam.github.io/webidl/#dfn-array-index-property-name id=htmlallcollection-接口:array-index-property-name data-x-internal=array-index-property-name>数组下标属性名</a>，
   返回给定 <var>nameOrIndex</var> 表示的数字时，从该 <code id=htmlallcollection-接口:htmlallcollection-7><a href=#htmlallcollection>HTMLAllCollection</a></code>
   <a href=#concept-get-all-indexed id=htmlallcollection-接口:concept-get-all-indexed-2>获取“所有”索引元素</a> 的结果。<li><p>返回给定 <var>nameOrIndex</var> 时，从 <code id=htmlallcollection-接口:htmlallcollection-8><a href=#htmlallcollection>HTMLAllCollection</a></code>
   <a href=#concept-get-all-named id=htmlallcollection-接口:concept-get-all-named-2>获取“所有”命名元素</a> 的结果。</ol>

  <hr>

  
  <p>下列元素是 <dfn id=all-named-elements>“所有”命名元素</dfn>:
   <code id=htmlallcollection-接口:the-a-element><a href=semantics.html#the-a-element>a</a></code>, 
   <code id=htmlallcollection-接口:the-applet-element><a href=obsolete.html#the-applet-element>applet</a></code>,
   <code id=htmlallcollection-接口:the-button-element-2><a href=forms.html#the-button-element>button</a></code>, 
   <code id=htmlallcollection-接口:the-embed-element><a href=embedded-content.html#the-embed-element>embed</a></code>,
   <code id=htmlallcollection-接口:the-form-element-2><a href=forms.html#the-form-element>form</a></code>,
   <code id=htmlallcollection-接口:frame><a href=obsolete.html#frame>frame</a></code>,
   <code id=htmlallcollection-接口:frameset><a href=obsolete.html#frameset>frameset</a></code>,
   <code id=htmlallcollection-接口:the-iframe-element-2><a href=embedded-content.html#the-iframe-element>iframe</a></code>, 
   <code id=htmlallcollection-接口:the-img-element><a href=embedded-content.html#the-img-element>img</a></code>,
   <code id=htmlallcollection-接口:the-input-element-2><a href=forms.html#the-input-element>input</a></code>,
   
   <code id=htmlallcollection-接口:the-map-element-2><a href=embedded-content.html#the-map-element>map</a></code>, 
   <code id=htmlallcollection-接口:the-meta-element-2><a href=semantics.html#the-meta-element>meta</a></code>, 
   <code id=htmlallcollection-接口:the-object-element-2><a href=embedded-content.html#the-object-element>object</a></code>,
   <code id=htmlallcollection-接口:the-select-element-2><a href=forms.html#the-select-element>select</a></code>, and
   <code id=htmlallcollection-接口:the-textarea-element-2><a href=forms.html#the-textarea-element>textarea</a></code> 
  </p>

  <p>给定下标 <var>index</var>，从 <code id=htmlallcollection-接口:htmlallcollection-9><a href=#htmlallcollection>HTMLAllCollection</a></code> <var>collection</var>
  <dfn id=concept-get-all-indexed>获取“所有”索引元素</dfn>：
  返回在<var>collection</var>中的第<var>index</var>个元素，如果没有第
  <var>index</var> 个元素则返回 null。</p>

  <p>给定名字 <var>name</var>，从 <code id=htmlallcollection-接口:htmlallcollection-10><a href=#htmlallcollection>HTMLAllCollection</a></code> <var>collection</var>
  <dfn id=concept-get-all-named>获取“所有”命名元素</dfn> 应执行下列步骤：</p>

  <ol><li><p>如果 <var>name</var> 为空字符串则返回 null。<li>
    <p>令 <var>subCollection</var> 为一个与 <var>collection</var> 处于同一根 <code id=htmlallcollection-接口:document-3><a href=dom.html#document>Document</a></code>
    的 <code id=htmlallcollection-接口:htmlcollection-6><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> 对象，且它的过滤器只匹配：</p>

    <ul><li><p><code>name</code> 属性等于 <var>name</var> 的
     <a href=#all-named-elements id=htmlallcollection-接口:all-named-elements-2>“所有”命名元素</a>，或者：<li><p><a href=https://dom.spec.whatwg.org/#concept-id id=htmlallcollection-接口:concept-id-2 data-x-internal=concept-id>ID</a> 等于 <var>name</var> 的元素。</ul>
   <li><p>如果在 <var>subCollection</var> 中只有一个元素，则返回该元素。<li><p>否则如果 <var>subCollection</var> 为空则返回 null。<li><p>否则返回 <var>subCollection</var>。</ol>

  


  <h5 id=htmlformcontrolscollection-接口>2.6.2.2 <code id=htmlformcontrolscollection-接口:htmlformcontrolscollection><a href=#htmlformcontrolscollection>HTMLFormControlsCollection</a></code> 接口<a href=#htmlformcontrolscollection-接口 class=self-link></a></h5>

  <p><code id=htmlformcontrolscollection-接口:htmlformcontrolscollection-2><a href=#htmlformcontrolscollection>HTMLFormControlsCollection</a></code> 接口用于
  <code id=htmlformcontrolscollection-接口:the-form-element><a href=forms.html#the-form-element>form</a></code> 元素中 <a href=forms.html#category-listed id=htmlformcontrolscollection-接口:category-listed>列出的元素</a>
  的 <a href=https://dom.spec.whatwg.org/#concept-collection id=htmlformcontrolscollection-接口:concept-collection data-x-internal=concept-collection>集合</a>。</p>

  <pre class=idl>interface <dfn id=htmlformcontrolscollection>HTMLFormControlsCollection</dfn> : <a id=htmlformcontrolscollection-接口:htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection data-x-internal=htmlcollection>HTMLCollection</a> {
  // inherits <a href=https://dom.spec.whatwg.org/#dom-htmlcollection-length id=htmlformcontrolscollection-接口:dom-htmlcollection-length data-x-internal=dom-htmlcollection-length>length</a> and <a href=https://dom.spec.whatwg.org/#dom-htmlcollection-item id=htmlformcontrolscollection-接口:dom-htmlcollection-item data-x-internal=dom-htmlcollection-item>item</a>()
  getter (<a href=#radionodelist id=htmlformcontrolscollection-接口:radionodelist>RadioNodeList</a> or <a id=htmlformcontrolscollection-接口:element href=https://dom.spec.whatwg.org/#interface-element data-x-internal=element>Element</a>)? <a href=#dom-htmlformcontrolscollection-nameditem id=htmlformcontrolscollection-接口:dom-htmlformcontrolscollection-nameditem>namedItem</a>(DOMString name); // shadows inherited <a href=https://dom.spec.whatwg.org/#dom-htmlcollection-nameditem id=htmlformcontrolscollection-接口:dom-htmlcollection-nameditem data-x-internal=dom-htmlcollection-nameditem>namedItem()</a>
};

interface <dfn id=radionodelist>RadioNodeList</dfn> : <a id=htmlformcontrolscollection-接口:nodelist href=https://dom.spec.whatwg.org/#interface-nodelist data-x-internal=nodelist>NodeList</a> {
  attribute DOMString <a href=#dom-radionodelist-value id=htmlformcontrolscollection-接口:dom-radionodelist-value>value</a>;
};</pre>

  <dl class=domintro><dt><var>collection</var> . <code id=htmlformcontrolscollection-接口:dom-htmlcollection-length-2><a data-x-internal=dom-htmlcollection-length href=https://dom.spec.whatwg.org/#dom-htmlcollection-length>length</a></code><dd>
    <p>返回集合中元素的数目。</p>
   <dt><var>element</var> = <var>collection</var> . <code id=htmlformcontrolscollection-接口:dom-htmlcollection-item-2><a data-x-internal=dom-htmlcollection-item href=https://dom.spec.whatwg.org/#dom-htmlcollection-item>item</a></code>(<var>index</var>)<dt><var>element</var> = <var>collection</var>[<var>index</var>]<dd>
    <p>从集合中返回下标为 <var>index</var> 的项目。
    这些项目以 <span data="tree order">树序</span> 排序。</p>
   <dt><var>element</var> = <var>collection</var> . <code id=htmlformcontrolscollection-接口:dom-htmlformcontrolscollection-nameditem-2><a href=#dom-htmlformcontrolscollection-nameditem>namedItem</a></code>(<var>name</var>)<dt><var>radioNodeList</var> = <var>collection</var> . <code id=htmlformcontrolscollection-接口:dom-htmlformcontrolscollection-nameditem-3><a href=#dom-htmlformcontrolscollection-nameditem>namedItem</a></code>(<var>name</var>)<dt><var>element</var> = <var>collection</var>[<var>name</var>]<dt><var>radioNodeList</var> = <var>collection</var>[<var>name</var>]<dd>
    <p>从集合中返回 <a href=https://dom.spec.whatwg.org/#concept-id id=htmlformcontrolscollection-接口:concept-id data-x-internal=concept-id>ID</a> 或 <code id=htmlformcontrolscollection-接口:attr-fe-name><a href=forms.html#attr-fe-name>name</a></code>
    为 <var>name</var> 的项目。</p>
    <p>如果有多个匹配的项目，则返回一个包含所有那些元素的 <code id=htmlformcontrolscollection-接口:radionodelist-2><a href=#radionodelist>RadioNodeList</a></code> 对象。</p>
   <dt><var>radioNodeList</var> . <var>value</var> [ = <var>value</var> ]<dd>
    <p>返回该对象表示的首个选中的单选按钮的值。</p>
    <p>可以被设置，此时选中第一个值为该对象表示的值的单选按钮。</p>
   </dl>

  

  <p>该对象 <a href=https://heycam.github.io/webidl/#dfn-supported-property-indices id=htmlformcontrolscollection-接口:supported-property-indices data-x-internal=supported-property-indices>支持的属性下标</a>
  与 <code id=htmlformcontrolscollection-接口:htmlcollection-2><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> 中定义的相同。</p>

  <p><a href=https://heycam.github.io/webidl/#dfn-supported-property-names id=htmlformcontrolscollection-接口:supported-property-names data-x-internal=supported-property-names>支持的属性名</a> 由
  <a href=https://dom.spec.whatwg.org/#represented-by-the-collection id=htmlformcontrolscollection-接口:represented-by-the-collection data-x-internal=represented-by-the-collection>该集合表示的</a> 所有元素的所有
  <code id=htmlformcontrolscollection-接口:the-id-attribute><a href=dom.html#the-id-attribute>id</a></code> 和 <code id=htmlformcontrolscollection-接口:attr-fe-name-2><a href=forms.html#attr-fe-name>name</a></code> 属性的非空值组成。
  这些值以 <a href=https://dom.spec.whatwg.org/#concept-tree-order id=htmlformcontrolscollection-接口:tree-order data-x-internal=tree-order>树序</a> 排列，
  忽略后面的重复项，元素的 <code id=htmlformcontrolscollection-接口:the-id-attribute-2><a href=dom.html#the-id-attribute>id</a></code> 在 <code>name</code> 之前
  （如果都存在的话），它们是互不相同的也互不为重复项。</p>

  <p><dfn id=dom-htmlformcontrolscollection-nameditem><code>namedItem(<var>name</var>)</code></dfn>
  方法必须根据下列算法操作：</p>

  <ol><li>如果 <var>name</var> 为空字符串，返回 null 并停止算法。<li>该方法被调用时，如果该集合中只有一个节点的 <code id=htmlformcontrolscollection-接口:the-id-attribute-3><a href=dom.html#the-id-attribute>id</a></code> 属性或
   <code id=htmlformcontrolscollection-接口:attr-fe-name-3><a href=forms.html#attr-fe-name>name</a></code> 属性等于 <var>name</var>，则返回该节点并停止算法。<li>否则，如果集合中没有一个节点的 <code id=htmlformcontrolscollection-接口:the-id-attribute-4><a href=dom.html#the-id-attribute>id</a></code> 属性或
   <code id=htmlformcontrolscollection-接口:attr-fe-name-4><a href=forms.html#attr-fe-name>name</a></code> 属性等于 <var>name</var>，则返回 null 并停止该算法。<li>否则，创建一个新的 <code id=htmlformcontrolscollection-接口:radionodelist-3><a href=#radionodelist>RadioNodeList</a></code> 对象，
   表示该 <code id=htmlformcontrolscollection-接口:htmlformcontrolscollection-3><a href=#htmlformcontrolscollection>HTMLFormControlsCollection</a></code> 对象的一个 <a href=#live id=htmlformcontrolscollection-接口:live>实时</a> 视图，
   且 <code id=htmlformcontrolscollection-接口:radionodelist-4><a href=#radionodelist>RadioNodeList</a></code> 对象中只包含
   <code id=htmlformcontrolscollection-接口:the-id-attribute-5><a href=dom.html#the-id-attribute>id</a></code> 属性或 <code id=htmlformcontrolscollection-接口:attr-fe-name-5><a href=forms.html#attr-fe-name>name</a></code> 属性等于
   <var>name</var> 的节点。<code id=htmlformcontrolscollection-接口:radionodelist-5><a href=#radionodelist>RadioNodeList</a></code> 对象中的节点必须以
   <a href=https://dom.spec.whatwg.org/#concept-tree-order id=htmlformcontrolscollection-接口:tree-order-2 data-x-internal=tree-order>树序</a> 排序。<li>返回该 <code id=htmlformcontrolscollection-接口:radionodelist-6><a href=#radionodelist>RadioNodeList</a></code> 对象。</ol>

  <hr>

  <p>继承自 <code id=htmlformcontrolscollection-接口:nodelist-2><a data-x-internal=nodelist href=https://dom.spec.whatwg.org/#interface-nodelist>NodeList</a></code> 接口的 <code id=htmlformcontrolscollection-接口:radionodelist-7><a href=#radionodelist>RadioNodeList</a></code> 接口的成员
  必须与 <code id=htmlformcontrolscollection-接口:nodelist-3><a data-x-internal=nodelist href=https://dom.spec.whatwg.org/#interface-nodelist>NodeList</a></code> 对象上的表现一致。</p>

  <p>在获取<code id=htmlformcontrolscollection-接口:radionodelist-8><a href=#radionodelist>RadioNodeList</a></code> 对象上的
  <dfn id=dom-radionodelist-value><code>value</code></dfn> IDL 属性时，
  必须返回运行下列步骤的返回值：</p>

  <ol><li><p>令 <var>element</var> 为 <code id=htmlformcontrolscollection-接口:radionodelist-9><a href=#radionodelist>RadioNodeList</a></code> 对象表示的第一个
   （<a href=https://dom.spec.whatwg.org/#concept-tree-order id=htmlformcontrolscollection-接口:tree-order-3 data-x-internal=tree-order>树序</a>）
   <code id=htmlformcontrolscollection-接口:attr-input-type><a href=forms.html#attr-input-type>type</a></code> 属性处于
   <a href="forms.html#radio-button-state-(type=radio)" id="htmlformcontrolscollection-接口:radio-button-state-(type=radio)">单选按钮</a> 状态且
   <a href=forms.html#concept-fe-checked id=htmlformcontrolscollection-接口:concept-fe-checked>选中状态</a> 为真的 <code id=htmlformcontrolscollection-接口:the-input-element><a href=forms.html#the-input-element>input</a></code> 元素。
   如果这样的元素不存在，令它为 null。<li><p>如果 <var>element</var> 为 null，返回空字符串。<li><p>如果 <var>element</var> 为没有 <code id=htmlformcontrolscollection-接口:attr-input-value><a href=forms.html#attr-input-value>value</a></code> 属性的元素，
   返回“<code>on</code>” 字符串。<li><p>否则返回该 <var id=htmlformcontrolscollection-接口:element-2><a data-x-internal=element href=https://dom.spec.whatwg.org/#interface-element>元素</a></var> 的
   <code id=htmlformcontrolscollection-接口:attr-input-value-2><a href=forms.html#attr-input-value>value</a></code> 属性的值。</ol>

  <p>当设置时，<code id=htmlformcontrolscollection-接口:dom-radionodelist-value-2><a href=#dom-radionodelist-value>value</a></code> IDL 属性必须执行下列步骤：</p>

  <ol><li><p>如果新的值是字符串“<code>on</code>”：令 <var>element</var> 为
   <code id=htmlformcontrolscollection-接口:radionodelist-10><a href=#radionodelist>RadioNodeList</a></code> 对象表示的第一个（<a href=https://dom.spec.whatwg.org/#concept-tree-order id=htmlformcontrolscollection-接口:tree-order-4 data-x-internal=tree-order>树序</a>）
   <code id=htmlformcontrolscollection-接口:attr-input-type-2><a href=forms.html#attr-input-type>type</a></code> 属性处于
   <a href="forms.html#radio-button-state-(type=radio)" id="htmlformcontrolscollection-接口:radio-button-state-(type=radio)-2">单选按钮</a> 状态且
   <code id=htmlformcontrolscollection-接口:attr-input-value-3><a href=forms.html#attr-input-value>value</a></code> 内容属性缺失，
   或存在且等于新的值（如果有新值的话）的 <code id=htmlformcontrolscollection-接口:the-input-element-2><a href=forms.html#the-input-element>input</a></code> 元素。
   如果这样的元素不存在，令 <var>element</var> 为 null。</p>

   <p>除此之外：令 <var>element</var> 为
   <code id=htmlformcontrolscollection-接口:radionodelist-11><a href=#radionodelist>RadioNodeList</a></code> 对象表示的第一个（<a href=https://dom.spec.whatwg.org/#concept-tree-order id=htmlformcontrolscollection-接口:tree-order-5 data-x-internal=tree-order>树序</a>）
   <code id=htmlformcontrolscollection-接口:attr-input-type-3><a href=forms.html#attr-input-type>type</a></code> 属性处于
   <a href="forms.html#radio-button-state-(type=radio)" id="htmlformcontrolscollection-接口:radio-button-state-(type=radio)-3">单选按钮</a> 状态且
   <code id=htmlformcontrolscollection-接口:attr-input-value-4><a href=forms.html#attr-input-value>value</a></code> 内容属性存在且等于新值（如果有的话）
   的 <code id=htmlformcontrolscollection-接口:the-input-element-3><a href=forms.html#the-input-element>input</a></code> 元素。
   如果这样的元素不存在，令 <var>element</var> 为 null。<li><p>如果 <var>element</var> 不是 null， 则设置它的 <a href=forms.html#concept-fe-checked id=htmlformcontrolscollection-接口:concept-fe-checked-2>选中状态</a> 为真。</p>

  </ol>



  


  <h5 id=htmloptionscollection-接口>2.6.2.3 <code id=htmloptionscollection-接口:htmloptionscollection><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> 接口<a href=#htmloptionscollection-接口 class=self-link></a></h5>

  <p><code id=htmloptionscollection-接口:htmloptionscollection-2><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> 接口用于 <code id=htmloptionscollection-接口:the-option-element><a href=forms.html#the-option-element>option</a></code> 元素的 <a href=https://dom.spec.whatwg.org/#concept-collection id=htmloptionscollection-接口:concept-collection data-x-internal=concept-collection>集合</a>。它经常以 <code id=htmloptionscollection-接口:the-select-element><a href=forms.html#the-select-element>select</a></code> 元素为根，
  且拥有操作其后代属性和方法。</p>

  <pre class=idl>interface <dfn id=htmloptionscollection>HTMLOptionsCollection</dfn> : <a id=htmloptionscollection-接口:htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection data-x-internal=htmlcollection>HTMLCollection</a> {
  // inherits <a href=https://dom.spec.whatwg.org/#dom-htmlcollection-item id=htmloptionscollection-接口:dom-htmlcollection-item data-x-internal=dom-htmlcollection-item>item</a>(), <a href=https://dom.spec.whatwg.org/#dom-htmlcollection-nameditem id=htmloptionscollection-接口:dom-htmlcollection-nameditem data-x-internal=dom-htmlcollection-nameditem>namedItem</a>()
  [<a id=htmloptionscollection-接口:cereactions href=scripting.html#cereactions>CEReactions</a>] attribute unsigned long <a href=#dom-htmloptionscollection-length id=htmloptionscollection-接口:dom-htmloptionscollection-length>length</a>; // shadows inherited <a href=https://dom.spec.whatwg.org/#dom-htmlcollection-length id=htmloptionscollection-接口:dom-htmlcollection-length data-x-internal=dom-htmlcollection-length>length</a>
  [<a id=htmloptionscollection-接口:cereactions-2 href=scripting.html#cereactions>CEReactions</a>] <a href=#dom-htmloptionscollection-setter>setter</a> void (unsigned long index, <a id=htmloptionscollection-接口:htmloptionelement href=forms.html#htmloptionelement>HTMLOptionElement</a>? option);
  [<a id=htmloptionscollection-接口:cereactions-3 href=scripting.html#cereactions>CEReactions</a>] void <a href=#dom-htmloptionscollection-add id=htmloptionscollection-接口:dom-htmloptionscollection-add>add</a>((<a id=htmloptionscollection-接口:htmloptionelement-2 href=forms.html#htmloptionelement>HTMLOptionElement</a> or <a id=htmloptionscollection-接口:htmloptgroupelement href=forms.html#htmloptgroupelement>HTMLOptGroupElement</a>) element, optional (<a id=htmloptionscollection-接口:htmlelement href=dom.html#htmlelement>HTMLElement</a> or long)? before = null);
  [<a id=htmloptionscollection-接口:cereactions-4 href=scripting.html#cereactions>CEReactions</a>] void <a href=#dom-htmloptionscollection-remove id=htmloptionscollection-接口:dom-htmloptionscollection-remove>remove</a>(long index);
  attribute long <a href=#dom-htmloptionscollection-selectedindex id=htmloptionscollection-接口:dom-htmloptionscollection-selectedindex>selectedIndex</a>;
};</pre>

  <dl class=domintro><dt><var>collection</var> . <code id=htmloptionscollection-接口:dom-htmloptionscollection-length-2><a href=#dom-htmloptionscollection-length>length</a></code> [ = <var>value</var> ]<dd>
    <p>返回集合中元素的数目。</p>
    <p>当设置为较小的数字时，截断相应容器中 <code id=htmloptionscollection-接口:the-option-element-2><a href=forms.html#the-option-element>option</a></code> 元素的数目。</p>
    <p>当设置为较大的数字时，在容器中新增空白的 <code id=htmloptionscollection-接口:the-option-element-3><a href=forms.html#the-option-element>option</a></code> 元素。</p>
   <dt><var>element</var> = <var>collection</var> . <code id=htmloptionscollection-接口:dom-htmlcollection-item-2><a data-x-internal=dom-htmlcollection-item href=https://dom.spec.whatwg.org/#dom-htmlcollection-item>item</a></code>(<var>index</var>)<dt><var>element</var> = <var>collection</var>[<var>index</var>]<dd>
    <p>返回集合中下标为 <var>index</var> 的项目。项目以 <a href=https://dom.spec.whatwg.org/#concept-tree-order id=htmloptionscollection-接口:tree-order data-x-internal=tree-order>树序</a> 排序。</p>
   <dt><var>collection</var>[<var>index</var>] = <var>element</var><dd>
    <p>当 <var>index</var> 比集合中项目的数目大时，在相应容器中新增空白 <code id=htmloptionscollection-接口:the-option-element-4><a href=forms.html#the-option-element>option</a></code> 元素。
    <p>当设为 null 时，从集合中移除在下标 <var>index</var> 处的项目。</p>
    <p>当设为一个 <code id=htmloptionscollection-接口:the-option-element-5><a href=forms.html#the-option-element>option</a></code> 元素时，在下标 <var>index</var> 处新增或替换为该元素。</p>
   <dt><var>element</var> = <var>collection</var> . <code id=htmloptionscollection-接口:dom-htmlcollection-nameditem-2><a data-x-internal=dom-htmlcollection-nameditem href=https://dom.spec.whatwg.org/#dom-htmlcollection-nameditem>namedItem</a></code>(<var>name</var>)<dt><var>element</var> = <var>collection</var>[<var>name</var>]<dd>
    <p>从集合中返回 <a href=https://dom.spec.whatwg.org/#concept-id id=htmloptionscollection-接口:concept-id data-x-internal=concept-id>ID</a> 或 <code id=htmloptionscollection-接口:attr-option-name><a href=obsolete.html#attr-option-name>name</a></code>
    为 <var>name</var> 的元素。</p>
    <p>如果有多个匹配项则返回第一个。</p>
   <dt><var>collection</var> . <code id=htmloptionscollection-接口:dom-htmloptionscollection-add-2><a href=#dom-htmloptionscollection-add>add</a></code>(<var>element</var> [, <var>before</var> ] )<dd>
    <p>在 <var>before</var> 节点前插入 <var>element</var>。</p>
    <p><var>before</var> 参数是数字时，在该数字处的项前插入 <var>element</var>；
    是集合中的元素时，在该元素前插入 <var>element</var>。</p>
    <p>如果 <var>before</var> 被省略或者为 null， 或者是一个溢出的数字，
    就在列表尾部插入 <var>element</var>。</p>
    <p>如果 <var>element</var> 是被插入元素的祖先，
    该方法将会抛出 <a id=htmloptionscollection-接口:hierarchyrequesterror href=https://heycam.github.io/webidl/#hierarchyrequesterror data-x-internal=hierarchyrequesterror>"<code>HierarchyRequestError</code>"</a> <code id=htmloptionscollection-接口:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。</p>
   <dt><var>collection</var> . <code id=htmloptionscollection-接口:dom-htmloptionscollection-remove-2><a href=#dom-htmloptionscollection-remove>remove</a></code>(<var>index</var>)<dd>
    <p>从集合中移除下标为 <var>index</var> 的元素。</p>
   <dt><var>collection</var> . <code id=htmloptionscollection-接口:dom-htmloptionscollection-selectedindex-2><a href=#dom-htmloptionscollection-selectedindex>selectedIndex</a></code> [ = <var>value</var> ]<dd>

    <p>返回第一个项的下标（如果有的话），否则，如果没有选中项则返回 −1。</p>

    <p>可以被设置，来改变选中项。</p>

   </dl>

  

  <p>该对象 <a href=https://heycam.github.io/webidl/#dfn-supported-property-indices id=htmloptionscollection-接口:supported-property-indices data-x-internal=supported-property-indices>支持的属性下标</a>
  与 <code id=htmloptionscollection-接口:htmlcollection-2><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> 对象中定义的相同。</p>

  <p>当获取时，<dfn id=dom-htmloptionscollection-length><code>length</code></dfn>
  属性必须返回 <a href=https://dom.spec.whatwg.org/#represented-by-the-collection id=htmloptionscollection-接口:represented-by-the-collection data-x-internal=represented-by-the-collection>集合表示的</a> 节点的数目。</p>

  <p>当设置时，其行为取决于新的值等于、大于或小于
  当时 <a href=https://dom.spec.whatwg.org/#represented-by-the-collection id=htmloptionscollection-接口:represented-by-the-collection-2 data-x-internal=represented-by-the-collection>集合表示的</a> 节点的数目。
  如果等于，则设置该属性不应做任何事情。如果大于，则必须将 <var>n</var> 个新的、
  没有属性和子节点的 <code id=htmloptionscollection-接口:the-option-element-6><a href=forms.html#the-option-element>option</a></code> 元素追加到 <code id=htmloptionscollection-接口:htmloptionscollection-3><a href=#htmloptionscollection>HTMLOptionsCollection</a></code>
  的根 <code id=htmloptionscollection-接口:the-select-element-2><a href=forms.html#the-select-element>select</a></code> 元素上。其中 <var>n</var> 为这两个数字之差（新的值减去旧的值）。
  同时必须触发 Mutation 事件，如同插入了包含这些 <code id=htmloptionscollection-接口:the-option-element-7><a href=forms.html#the-option-element>option</a></code> 元素的
  <code id=htmloptionscollection-接口:documentfragment><a data-x-internal=documentfragment href=https://dom.spec.whatwg.org/#interface-documentfragment>DocumentFragment</a></code> 一样。如果新的值更小，则必须从父节点中移除集合中最后的
  <var>n</var> 个节点，其中 <var>n</var> 为这两个数之差（旧的值减去新的值）。</p>

  <p class=note>设置 <code id=htmloptionscollection-接口:dom-htmloptionscollection-length-3><a href=#dom-htmloptionscollection-length>length</a></code>
  不会移除或增加任何 <code id=htmloptionscollection-接口:the-optgroup-element><a href=forms.html#the-optgroup-element>optgroup</a></code> 元素，也不会给既有的 <code id=htmloptionscollection-接口:the-optgroup-element-2><a href=forms.html#the-optgroup-element>optgroup</a></code> 元素增加子节点。
  （虽然可以从中移除子节点）。</p>

  <p><a href=https://heycam.github.io/webidl/#dfn-supported-property-names id=htmloptionscollection-接口:supported-property-names data-x-internal=supported-property-names>支持的属性名</a> 由
  所有 <a href=https://dom.spec.whatwg.org/#represented-by-the-collection id=htmloptionscollection-接口:represented-by-the-collection-3 data-x-internal=represented-by-the-collection>集合表示的</a> 元素的
  所有<code id=htmloptionscollection-接口:the-id-attribute><a href=dom.html#the-id-attribute>id</a></code> 和 <code id=htmloptionscollection-接口:attr-option-name-2><a href=obsolete.html#attr-option-name>name</a></code>属性的非空值构成。
  这些值以 <a href=https://dom.spec.whatwg.org/#concept-tree-order id=htmloptionscollection-接口:tree-order-2 data-x-internal=tree-order>树序</a> 排列，
  忽略后面的重复项，元素的 <code id=htmloptionscollection-接口:the-id-attribute-2><a href=dom.html#the-id-attribute>id</a></code> 在
  <code id=htmloptionscollection-接口:attr-option-name-3><a href=obsolete.html#attr-option-name>name</a></code> 之前（如果都存在的话），它们互不相同也互不为重复项。</p>

  <p id=dom-htmloptionscollection-setter>当用户代理
  <a href=https://heycam.github.io/webidl/#dfn-set-the-value-of-a-new-indexed-property id=htmloptionscollection-接口:set-the-value-of-a-new-indexed-property data-x-internal=set-the-value-of-a-new-indexed-property>设置一个新的索引属性的值</a>
  或 <a href=https://heycam.github.io/webidl/#dfn-set-the-value-of-an-existing-indexed-property id=htmloptionscollection-接口:set-the-value-of-an-existing-indexed-property data-x-internal=set-the-value-of-an-existing-indexed-property>设置已存在的索引属性的值</a> 时，
  设属性下标为 <var>index</var>，新的值为 <var>value</var>，它必须运行下列算法：</p>

  <ol><li><p>如果 <var>value</var> 为 null，以  <var>index</var> 为参数运行 <code id=htmloptionscollection-接口:dom-htmloptionscollection-remove-3><a href=#dom-htmloptionscollection-remove>remove</a></code> 方法的步骤，并终止本步骤。<li><p>令 <var>length</var> 为 <a href=https://dom.spec.whatwg.org/#represented-by-the-collection id=htmloptionscollection-接口:represented-by-the-collection-4 data-x-internal=represented-by-the-collection>集合表示的</a>
   节点的数目。<li><p>令 <var>n</var> 为 <var>index</var> 减 <var>length</var>。<li><p>如果 <var>n</var> 大于0，则 <a href=https://dom.spec.whatwg.org/#concept-node-append id=htmloptionscollection-接口:concept-node-append data-x-internal=concept-node-append>追加</a>
   一个由 <span><var>n</var>-1</span> 个新的、 没有属性和子元素的 <code id=htmloptionscollection-接口:the-option-element-8><a href=forms.html#the-option-element>option</a></code> 元素组成的
   <code id=htmloptionscollection-接口:documentfragment-2><a data-x-internal=documentfragment href=https://dom.spec.whatwg.org/#interface-documentfragment>DocumentFragment</a></code> 到 <code id=htmloptionscollection-接口:htmloptionscollection-4><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> 所在的根 <code id=htmloptionscollection-接口:the-select-element-3><a href=forms.html#the-select-element>select</a></code> 元素。<li><p>如果 <var>n</var> 大于等于0，<a href=https://dom.spec.whatwg.org/#concept-node-append id=htmloptionscollection-接口:concept-node-append-2 data-x-internal=concept-node-append>追加</a>
   <var>value</var> 到 <code id=htmloptionscollection-接口:the-select-element-4><a href=forms.html#the-select-element>select</a></code> 元素。否则，以 <var>value</var>
   <a href=https://dom.spec.whatwg.org/#concept-node-replace id=htmloptionscollection-接口:concept-node-replace data-x-internal=concept-node-replace>替换</a> 集合中第 <var>index</var> 个元素。</ol>

  <p><dfn id=dom-htmloptionscollection-add><code>add(<var>element</var>, <var>before</var>)</code></dfn> 方法必须按照下列算法执行：</p>

  <ol><li><p>如果 <var>element</var> 为 <code id=htmloptionscollection-接口:htmloptionscollection-5><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> 所在的根
   <code id=htmloptionscollection-接口:the-select-element-5><a href=forms.html#the-select-element>select</a></code> 元素的祖先节点，则抛出一个
   <a id=htmloptionscollection-接口:hierarchyrequesterror-2 href=https://heycam.github.io/webidl/#hierarchyrequesterror data-x-internal=hierarchyrequesterror>"<code>HierarchyRequestError</code>"</a> <code id=htmloptionscollection-接口:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> 并终止这些步骤。<li><p>如果 <var>before</var> 为一个元素，但它并非 <code id=htmloptionscollection-接口:htmloptionscollection-6><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> 所在的根
   <code id=htmloptionscollection-接口:the-select-element-6><a href=forms.html#the-select-element>select</a></code> 元素的后代，则抛出一个
   <a id=htmloptionscollection-接口:notfounderror href=https://heycam.github.io/webidl/#notfounderror data-x-internal=notfounderror>"<code>NotFoundError</code>"</a> <code id=htmloptionscollection-接口:domexception-3><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> 并终止这些步骤。<li><p>如果 <var>element</var> 和 <var>before</var> 为同一元素，则返回并终止这些步骤。<li><p>如果 <var>before</var> 为一个节点，那么令 <var>reference</var> 为该节点。
   否则如果 <var>before</var> 为整数且集合中存在第 <var>before</var> 个节点，令 <var>reference</var>
   为该节点。否则令 <var>reference</var> 为 null。<li><p>如果 <var>reference</var> 不为 null，令 <var>parent</var> 为 <var>reference</var>
   的父节点。否则令 <var>parent</var> 为 <code id=htmloptionscollection-接口:htmloptionscollection-7><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> 所在的根
   <code id=htmloptionscollection-接口:the-select-element-7><a href=forms.html#the-select-element>select</a></code> 元素。<li><p>在<var>reference</var><a href=https://dom.spec.whatwg.org/#concept-node-pre-insert id=htmloptionscollection-接口:pre-insert data-x-internal=pre-insert>之前插入</a>
   <var>element</var> 到 <var>parent</var> 节点中。</p>

  </ol>

  <p><dfn id=dom-htmloptionscollection-remove><code>remove(<var>index</var>)</code></dfn> 方法
  必须按照下列算法执行：</p>

  <ol><li><p>如果 <a href=https://dom.spec.whatwg.org/#represented-by-the-collection id=htmloptionscollection-接口:represented-by-the-collection-5 data-x-internal=represented-by-the-collection>集合表示的</a> 元素数目为0，
  终止这些步骤。<li><p>如果 <var>index</var> 小于零，或小于 <a href=https://dom.spec.whatwg.org/#represented-by-the-collection id=htmloptionscollection-接口:represented-by-the-collection-6 data-x-internal=represented-by-the-collection>
   集合表示的</a> 节点数目，终止这些步骤。<li><p>令 <var>element</var> 为集合中第 <var>index</var> 个元素。<li><p>将 <var>element</var> 从它的父节点移除。</ol>

  <p><dfn id=dom-htmloptionscollection-selectedindex><code>selectedIndex</code></dfn> IDL
  属性必须像 <code id=htmloptionscollection-接口:htmloptionscollection-8><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> 所在的根 <code id=htmloptionscollection-接口:the-select-element-8><a href=forms.html#the-select-element>select</a></code> 元素上的同名属性一样操作。</p>

  

  


  <h4 id=domstringlist-接口>2.6.3 <code id=domstringlist-接口:domstringlist><a href=#domstringlist>DOMStringList</a></code> 接口<a href=#domstringlist-接口 class=self-link></a></h4>

  <p><code id=domstringlist-接口:domstringlist-2><a href=#domstringlist>DOMStringList</a></code> 接口是表示字符串列表的一种毫不时髦的复古的方式。</p>

  <pre class=idl>[Exposed=(Window,Worker)]
interface <dfn id=domstringlist>DOMStringList</dfn> {
  readonly attribute unsigned long <a href=#dom-domstringlist-length id=domstringlist-接口:dom-domstringlist-length>length</a>;
  getter DOMString? <a href=#dom-domstringlist-item id=domstringlist-接口:dom-domstringlist-item>item</a>(unsigned long index);
  boolean <a href=#dom-domstringlist-contains id=domstringlist-接口:dom-domstringlist-contains>contains</a>(DOMString string);
};</pre>

  <p class=warning>新 API 必须使用 <code>sequence&lt;DOMString></code> 或
  其他等价的接口，而不是 <code id=domstringlist-接口:domstringlist-3><a href=#domstringlist>DOMStringList</a></code>。</p>

  <dl class=domintro><dt><var>strings</var> . <code id=domstringlist-接口:dom-domstringlist-length-2><a href=#dom-domstringlist-length>length</a></code><dd><p>返回 <var>strings</var> 中字符串的个数。<dt><var>strings</var>[<var>index</var>]<dt><var>strings</var> . <code id=domstringlist-接口:dom-domstringlist-item-2><a href=#dom-domstringlist-item>item</a></code>(<var>index</var>)<dd><p>返回 <var>strings</var> 中下标为 <var>index</var> 的字符串。<dt><var>strings</var> . <code id=domstringlist-接口:dom-domstringlist-contains-2><a href=#dom-domstringlist-contains>contains</a></code>(<var>string</var>)<dd><p>如果 <var>strings</var> 包含 <var>string</var> 则返回 true，否则返回 false。</dl>

  

  <p>每个 <code id=domstringlist-接口:domstringlist-4><a href=#domstringlist>DOMStringList</a></code> 对象有一个与之关联的 <a href=https://infra.spec.whatwg.org/#list id=domstringlist-接口:list data-x-internal=list>列表</a>。</p>

  <p><code id=domstringlist-接口:domstringlist-5><a href=#domstringlist>DOMStringList</a></code> 对象 <a href=https://heycam.github.io/webidl/#dfn-supported-property-indices id=domstringlist-接口:supported-property-indices data-x-internal=supported-property-indices>支持的属性下标</a>
  为 0 到关联列表的 <a href=https://infra.spec.whatwg.org/#list-size id=domstringlist-接口:list-size data-x-internal=list-size>大小</a> 减 1。如果与它关联的列表
  <a href=https://infra.spec.whatwg.org/#list-is-empty id=domstringlist-接口:list-is-empty data-x-internal=list-is-empty>为空</a>，它就没有
  <a href=https://heycam.github.io/webidl/#dfn-supported-property-indices id=domstringlist-接口:supported-property-indices-2 data-x-internal=supported-property-indices>支持的属性下标</a>。</p>

  <p><dfn id=dom-domstringlist-length><code>length</code></dfn> 属性的读取方法必须返回
  与该 <code id=domstringlist-接口:domstringlist-6><a href=#domstringlist>DOMStringList</a></code> 对象关联的列表的 <a href=https://infra.spec.whatwg.org/#list-size id=domstringlist-接口:list-size-2 data-x-internal=list-size>大小</a>。</p>

  <p><dfn id=dom-domstringlist-item><code>item(<var>index</var>)</code></dfn> 方法被调用时，
  必须返回该 <code id=domstringlist-接口:domstringlist-7><a href=#domstringlist>DOMStringList</a></code> 对象的关联列表中第 <var>index</var> 个项目，
  如果 <var>index</var> 加一大于该 <code id=domstringlist-接口:domstringlist-8><a href=#domstringlist>DOMStringList</a></code> 对象的关联列表的 <a href=https://infra.spec.whatwg.org/#list-size id=domstringlist-接口:list-size-3 data-x-internal=list-size>大小</a>。</p>

  <p><dfn id=dom-domstringlist-contains><code>contains(<var>string</var>)</code></dfn>
  方法被调用时，如果该 <code id=domstringlist-接口:domstringlist-9><a href=#domstringlist>DOMStringList</a></code> 对象的关联列表
  <a href=https://infra.spec.whatwg.org/#list-contain id=domstringlist-接口:list-contains data-x-internal=list-contains>包含</a> <var>string</var>，则必须返回 true，
  否则必须返回 false。</p>

  


  

  <h4 id=垃圾回收>2.6.4 垃圾回收<a href=#垃圾回收 class=self-link></a></h4>

  <p>任何 IDL 属性都暗示着一个预先存在的对象对另一个对象的
  <dfn id=implied-strong-reference>强引用</dfn>。</p>

  <div class=example>

   <p>例如，<code id=垃圾回收:dom-document-2><a href=browsers.html#dom-document-2>window.document</a></code> 属性意味着
   <code id=垃圾回收:window><a href=browsers.html#window>Window</a></code> 对象对它的 <code id=垃圾回收:document><a href=dom.html#document>Document</a></code> 对象有一个强引用。
   类似地，从<code id=垃圾回收:document-2><a href=dom.html#document>Document</a></code>到任何后代节点都有一个强引用，
   从任何节点到它的<a href=https://dom.spec.whatwg.org/#concept-node-document id=垃圾回收:node-document data-x-internal=node-document>节点文档</a>也都有一个强引用。</p>

  </div>

  


  

  <h3 id=安全地传递结构化数据>2.7 安全地传递结构化数据<a href=#安全地传递结构化数据 class=self-link></a></h3>

  <p>本节使用 JavaScript 标准的术语和排版惯例。 <a href=references.html#refsJAVASCRIPT>[JAVASCRIPT]</a></p>

  <h4 id=可序列化对象>2.7.1 <dfn>可序列化对象</dfn><a href=#可序列化对象 class=self-link></a></h4>

  <p><a href=#可序列化对象 id=可序列化对象:可序列化对象>可序列化对象</a> 支持被序列化以及之后反序列化，
  且这一过程与给定的 <a href=https://tc39.github.io/ecma262/#sec-code-realms id=可序列化对象:javascript-realm data-x-internal=javascript-realm>JavaScript 领域</a> 无关。
  这允许它们存储在磁盘中用于后续恢复，或者在文档和 worker 的边界上克隆
  （包括不同 <a href=browsers.html#concept-origin id=可序列化对象:concept-origin>域</a> 的文档之间，
  或者不同的 <a href=webappapis.html#event-loop id=可序列化对象:event-loop>事件循环</a> 之间）。</p>

  <p>并非所有对象都是 <a href=#可序列化对象 id=可序列化对象:可序列化对象-2>可序列化对象</a>，也并不是
  <a href=#可序列化对象 id=可序列化对象:可序列化对象-3>可克隆的对象</a> 的所有方面都需要在序列化时保留。</p>

  <p><a href=https://heycam.github.io/webidl/#dfn-platform-object id=可序列化对象:platform-object data-x-internal=platform-object>平台对象</a> 可以是
  <a href=#可序列化对象 id=可序列化对象:可序列化对象-4>可序列化对象</a>
  只要它们实现了用 <dfn id=serializable data-dfn-type=extended-attribute data-lt=Serializable data-export=""><code>[Serializable]</code></dfn>
  IDL <a href=https://heycam.github.io/webidl/#dfn-extended-attribute id=可序列化对象:extended-attribute data-x-internal=extended-attribute>扩展属性</a> 标注的接口。
  这样的接口必须定义下面的算法：</p>

  <dl><dt><dfn id=serialization-steps data-export="">序列化步骤</dfn>，
   接受一个 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=可序列化对象:platform-object-2 data-x-internal=platform-object>平台对象</a> <var>value</var>，
   一个 <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=可序列化对象:record data-x-internal=record>记录</a> <var>serialized</var>，
   和一个布尔值 <var>forStorage</var><dd>
   <p>把 <var>value</var> 中的数据序列化为 <var>serialized</var> 字段的一系列步骤。
   序列化到 <var>serialized</var> 中的结果数据必须独立于任何 <a href=https://tc39.github.io/ecma262/#sec-code-realms id=可序列化对象:javascript-realm-2 data-x-internal=javascript-realm>JavaScript 领域</a>。</p>

    <p>如果不可能序列化，这些步骤会抛出异常。</p>

    <p>这些步骤可能会执行一个 <a href=#sub-serialization id=可序列化对象:sub-serialization>子序列化</a> 来序列化嵌套的数据结构。
    它们不应直接调用 <a href=#structuredserialize id=可序列化对象:structuredserialize>StructuredSerialize</a>，因为这样做会忽略
    一个重要的 <var>memory</var> 参数。</p>

    <p>引入这些步骤，如果与该算法无关，则不应该提及 <var>forStorage</var> 参数。</p>
   <dt><dfn id=deserialization-steps data-export="">反序列化步骤</dfn>，
   接受一个 <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=可序列化对象:record-2 data-x-internal=record>记录</a> <var>serialized</var>
   和一个 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=可序列化对象:platform-object-3 data-x-internal=platform-object>平台对象</a> <var>value</var><dd>
    <p>把 <var>serialized</var> 中的数据反序列化的一系列步骤，用它适当地建立 <var>value</var>。
    <var>value</var> 将会是一个新创建的相应 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=可序列化对象:platform-object-4 data-x-internal=platform-object>平台对象</a> 类型的实例，
    它的内部数据还未建立；这一工作交给这些步骤：</p>

    <p>如果不可能反序列化这些步骤会抛出一个异常。</p>

    <p>这些步骤可能会执行一个 <a href=#sub-deserialization id=可序列化对象:sub-deserialization>子反序列化</a>
    来反序列化嵌套的数据结构。
    它们不能直接调用 <a href=#structureddeserialize id=可序列化对象:structureddeserialize>StructuredDeserialize</a>，一文这样做会忽略
    重要的 <var>targetRealm</var> 和 <var>memory</var> 参数。</p>
   </dl>

  <p>由平台对象的定义决定哪些数据被这些步骤序列化和反序列化。通常这些步骤是非常对称的。</p>

  <p><code id=可序列化对象:serializable><a href=#serializable>[Serializable]</a></code> 扩展属性不允许有任何参数，
  并且不能出现任何不是接口的地方。在一个接口上它必须只出现一次。它不能用在回调接口上。
  如果它出现在部分接口（partial interface）上，或者一个混入接口（mixin）上，
  那么它必须也出现在原始（original）或被混入（mixed-in-to）接口上，
  并且部分接口或混入提供任何的 <a href=#serialization-steps id=可序列化对象:serialization-steps>序列化步骤</a> 和
  <a href=#deserialization-steps id=可序列化对象:deserialization-steps>反序列化步骤</a> 应该理解为
  增加到原始或被混入接口的对应步骤上。</p>

  <div class=example>
   <p>加入我们在定义一个平台对象 <code>Person</code>，它与两部分数据相关联：</p>

   <ul class=brief><li>一个名字值，是一个字符串；<li>最好朋友的值，是另一个 <code>Person</code> 实例或 null</ul>

   <p>接着，我们使用 <code id=可序列化对象:serializable-2><a href=#serializable>[Serializable]</a></code>
   <a href=https://heycam.github.io/webidl/#dfn-extended-attribute id=可序列化对象:extended-attribute-2 data-x-internal=extended-attribute>扩展属性</a>
   标注 <code>Person</code> 接口，可以把 <code>Person</code> 实例定义为
   <a href=#可序列化对象 id=可序列化对象:可序列化对象-5>可序列化对象</a>，同时定义下列算法：</p>

   <dl><dt><a href=#serialization-steps id=可序列化对象:serialization-steps-2>序列化步骤</a><dd>
     <ol><li><p>设置 <var>serialized</var>.[[Name]] 为 <var>value</var> 关联的名字值。<li><p>令 <var>serializedBestFriend</var> 为 <var>value</var> 关联的最好朋友的值的
      <a href=#sub-serialization id=可序列化对象:sub-serialization-2>子序列化</a>。<li><p>设置 <var>serialized</var>.[[BestFriend]] 为 <var>serializedBestFriend</var>。</ol>
    <dt><a href=#deserialization-steps id=可序列化对象:deserialization-steps-2>反序列化步骤</a><dd>
     <ol><li><p>设置 <var>value</var> 关联的名字值为 <var>serialized</var>.[[Name]]。<li><p>令 <var>deserializedBestFriend</var> 为 <var>serialized</var>.[[BestFriend]] 的
      <a href=#sub-deserialization id=可序列化对象:sub-deserialization-2>子反序列化</a>。<li><p>设置 <var>value</var> 关联的最好朋友值为 <var>deserializedBestFriend</var>。</ol>
    </dl>
  </div>

  <p>在 JavaScript 规范中定义的对象直接由 <a href=#structuredserialize id=可序列化对象:structuredserialize-2>StructuredSerialize</a> 抽象操作处理。</p>

  <p id=cloneable-objects class=note>最初，本规范定义了“克隆对象”的概念，
  可以从一个 <a href=https://tc39.github.io/ecma262/#sec-code-realms id=可序列化对象:javascript-realm-3 data-x-internal=javascript-realm>JavaScript 领域</a> 克隆到另一个。
  但为了更好地指定某些更复杂的情况的行为，更新了模型来显示地进行序列化和反序列化。</p>

  <h4 id=可传输对象 data-lt="transferable object" data-export="">2.7.2 <dfn>可传输对象</dfn><a href=#可传输对象 class=self-link></a></h4>

  <p><a href=#可传输对象 id=可传输对象:可传输对象>可传输对象</a> 支持在 <a href=webappapis.html#event-loop id=可传输对象:event-loop>事件循环</a> 之间传输。传输其实就是有效地重新创建对象并共享对底层数据的引用，然后将被传输的对象分离。
  在转让昂贵资源的所有权时很有用。并非所有对象都是 <a href=#可传输对象 id=可传输对象:可传输对象-2>可传输对象</a>，
  也并非 <a href=#可传输对象 id=可传输对象:可传输对象-3>可传输对象</a> 的所有方面都会在传输时被保留。</p>

  <p class=note>传输是不可逆转的、不幂等的操作。对象一旦被传输就不可再次传输或使用。</p>

  <p><a href=https://heycam.github.io/webidl/#dfn-platform-object id=可传输对象:platform-object data-x-internal=platform-object>平台对象</a> 可以是
  <a href=#可传输对象 id=可传输对象:可传输对象-4>可传输对象</a>，
  只要它们实现了以 <dfn id=transferable data-dfn-type=extended-attribute data-lt=Transferable data-export=""><code>[Transferable]</code></dfn> IDL
  <a href=https://heycam.github.io/webidl/#dfn-extended-attribute id=可传输对象:extended-attribute data-x-internal=extended-attribute>扩展属性</a> 注解的接口。
  这样的接口必须定义下列算法：</p>

  <dl><dt><dfn id=transfer-steps data-export="">传输步骤</dfn>，
   接受一个 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=可传输对象:platform-object-2 data-x-internal=platform-object>平台对象</a> <var>value</var>
   和一个 <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=可传输对象:record data-x-internal=record>记录</a> <var>dataHolder</var><dd>
     <p>把 <var>value</var> 中的数据传输到 <var>dataHolder</var> 字段的一系列步骤。
     <var>dataHolder</var> 中的结果数据必须独立于任何 <a href=https://tc39.github.io/ecma262/#sec-code-realms id=可传输对象:javascript-realm data-x-internal=javascript-realm>JavaScript 领域</a>。</p>

    <p>如果不可能传输，这些步骤会抛出异常。</p>
   <dt><dfn id=transfer-receiving-steps data-export="">接收步骤</dfn>，
   接收一个 <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=可传输对象:record-2 data-x-internal=record>记录</a> <var>dataHolder</var>
   和一个 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=可传输对象:platform-object-3 data-x-internal=platform-object>平台对象</a> <var>value</var><dd>
    <p>接收 <var>dataHolder</var> 中的数据并用它适当地建立 <var>value</var> 的一系列步骤。
    <var>value</var> 将会是一个新创建的相应 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=可传输对象:platform-object-4 data-x-internal=platform-object>平台对象</a> 类型的实例，
    它的内部数据还未建立；这一工作交给这些步骤：</p>

    <p>如果不可能接收这次传输，这些步骤会抛出异常。</p>
   </dl>

  <p>由平台对象的定义决定哪些数据被这些步骤传输。通常这些步骤是非常对称的。</p>

  <p><code id=可传输对象:transferable><a href=#transferable>[Transferable]</a></code> 扩展属性不允许有任何参数，
  并且不能出现任何不是接口的地方。在一个接口上它必须只出现一次。它不能用在回调接口上。
  如果它出现在部分接口（partial interface）上，或者一个混入接口（mixin）上，
  那么它必须也出现在原始（original）或被混入（mixed-in-to）接口上，
  并且部分接口或混入提供任何的 <a href=#transfer-steps id=可传输对象:transfer-steps>传输步骤</a> 和
  <a href=#transfer-receiving-steps id=可传输对象:transfer-receiving-steps>接收步骤</a> 应该理解为
  增加到原始或被混入接口的对应步骤上。</p>

  <p>是 <a href=#可传输对象 id=可传输对象:可传输对象-5>可传输对象</a>
  的 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=可传输对象:platform-object-5 data-x-internal=platform-object>平台对象</a> 有一个
  <dfn data-dfn-for="platform object" id=detached data-dfn-type=attribute data-export="">[[Detached]]</dfn> 内部槽。
  用于确保一旦平台对象已经被传输，它不能被再次传输。</p>

  <p>JavaScript 标准中定义的对象直接交由 <a href=#structuredserializewithtransfer id=可传输对象:structuredserializewithtransfer>StructuredSerializeWithTransfer</a> 抽象操作处理。</p>

  <h4 id=structuredserializeinternal data-dfn-type=abstract-op data-noexport="" data-lt=StructuredSerializeInternal>2.7.3 <dfn>StructuredSerializeInternal</dfn> ( <var>value</var>，
  <var>forStorage</var> [ ，<var>memory</var> ] )<a href=#structuredserializeinternal class=self-link></a></h4>

  <p><a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal>StructuredSerializeInternal</a> 抽象操作接受一个 JavaScript 值 <var>value</var> 作为输入，
  把它序列化为一个 <a href=https://tc39.github.io/ecma262/#sec-code-realms id=structuredserializeinternal:javascript-realm data-x-internal=javascript-realm>领域</a> 无关的形式，在这里表示为一个
  <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:record data-x-internal=record>记录</a>。这一序列化的形式有着后续反序列化到不同领域的新
  JavaScript 值需要的所有必要信息。</p>

  <p>这一过程可能会抛出一个异常，例如当尝试序列化不可序列化对象时。</p>

  <ol><li>
    <p>如果没有提供 <var>memory</var>，令 <var>memory</var> 为一个空的 <a href=https://infra.spec.whatwg.org/#ordered-map id=structuredserializeinternal:ordered-map data-x-internal=ordered-map>映射</a>。</p>

    <p class=note><var>memory</var> 映射是为了避免把对象序列化两次。
    最终会用于保持环状结构以及标识图中的重复对象。</p>
   <li><p>如果 <var>memory</var>[<var>value</var>] <a href=https://infra.spec.whatwg.org/#map-exists id=structuredserializeinternal:map-exists data-x-internal=map-exists>存在</a>，则
   返回 <var>memory</var>[<var>value</var>]。<li><p>令<var>deep</var> 为 false。<li><p>如果 <a href=https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values id=structuredserializeinternal:js-type data-x-internal=js-type>Type</a>(<var>value</var>) 为 Undefined，Null，Boolean，
   String 或 Number，则返回 { [[Type]]: "primitive"，[[Value]]: <var>value</var> }。<li><p>如果 <a href=https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values id=structuredserializeinternal:js-type-2 data-x-internal=js-type>Type</a>(<var>value</var>) 为 Symbol，则抛出一个
   <a id=structuredserializeinternal:datacloneerror href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializeinternal:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>令<var>serialized</var> 为一个未初始化的值。<li><p>如果 <var>value</var> 有一个 [[BooleanData]] 内部槽，则把 <var>serialized</var> 设置为
   { [[Type]]: "Boolean",[[BooleanData]]: <var>value</var>.[[BooleanData]] }。<li><p>否则，如果 <var>value</var> 有一个 [[NumberData]] 内部槽，则把
   <var>serialized</var> 设置为 { [[Type]]: "Number",[[NumberData]]: <var>value</var>.[[NumberData]]
   }。<li><p>否则，如果 <var>value</var> 有一个 [[StringData]] 内部槽，则把
   <var>serialized</var> 设置为 { [[Type]]: "String",[[StringData]]: <var>value</var>.[[StringData]]
   }。<li><p>否则，如果 <var>value</var> 有一个 [[DateValue]] 内部槽，则把
   <var>serialized</var> 设置为 { [[Type]]: "Date",[[DateValue]]: <var>value</var>.[[DateValue]]
   }。<li><p>否则，如果 <var>value</var> 有一个 [[RegExpMatcher]] 内部槽，则把
   <var>serialized</var> 设置为 { [[Type]]: "RegExp",[[RegExpMatcher]]:
   <var>value</var>.[[RegExpMatcher]]，[[OriginalSource]]: <var>value</var>.[[OriginalSource]]，
   [[OriginalFlags]]: <var>value</var>.[[OriginalFlags]] }。<li>
    <p>否则，如果 <var>value</var> 有一个 [[ArrayBufferData]] 内部槽，则：</p>

    <ol><li><p>令<var>size</var> 为 <var>value</var>.[[ArrayBufferByteLength]]。<li>
      <p>如果 ! <a id=structuredserializeinternal:issharedarraybuffer href=https://tc39.github.io/ecma262/#sec-issharedarraybuffer data-x-internal=issharedarraybuffer>IsSharedArrayBuffer</a>(<var>value</var>) 为 true，则：

      <ol><li><p>如果 <var>forStorage</var> 为 true，则抛出一个
       <a id=structuredserializeinternal:datacloneerror-2 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializeinternal:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>把 <var>serialized</var> 设置为 { [[Type]]: "SharedArrayBuffer",[[ArrayBufferData]]:
       <var>value</var>.[[ArrayBufferData]],[[ArrayBufferByteLength]]: <var>size</var>,
       [[AgentCluster]]: <a href=https://tc39.github.io/ecma262/#current-realm id=structuredserializeinternal:current-realm-record data-x-internal=current-realm-record>当前领域记录</a> 对应的
       <a href=https://tc39.github.io/ecma262/#sec-agent-clusters id=structuredserializeinternal:agent-cluster data-x-internal=agent-cluster>代理集群</a> }。</ol>
     <li>
      <p>否则：</p>

      <ol><li><p>如果 ! <a id=structuredserializeinternal:isdetachedbuffer href=https://tc39.github.io/ecma262/#sec-isdetachedbuffer data-x-internal=isdetachedbuffer>IsDetachedBuffer</a>(<var>value</var>) 为 true，则抛出一个
       <a id=structuredserializeinternal:datacloneerror-3 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializeinternal:domexception-3><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li>
        <p>令<var>dataCopy</var> 为 ? <a id=structuredserializeinternal:createbytedatablock href=https://tc39.github.io/ecma262/#sec-createbytedatablock data-x-internal=createbytedatablock>CreateByteDataBlock</a>(<var>size</var>)。</p>

        <p class=note>在分配地址失败时可能会抛出一个 <code id=structuredserializeinternal:js-rangeerror><a data-x-internal=js-rangeerror href=https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-rangeerror>RangeError</a></code> 异常。</p>
       <li><p>执行 ! <a id=structuredserializeinternal:copydatablockbytes href=https://tc39.github.io/ecma262/#sec-copydatablockbytes data-x-internal=copydatablockbytes>CopyDataBlockBytes</a>(<var>dataCopy</var>,0,<var>value</var>.[[ArrayBufferData]],0,<var>size</var>)。<li><p>把 <var>serialized</var> 设置为 { [[Type]]: "ArrayBuffer",[[ArrayBufferData]]:
       <var>dataCopy</var>,[[ArrayBufferByteLength]]: <var>size</var> }。</ol>
     </ol>
   <li>
    <p>否则，如果 <var>value</var> 有一个 [[ViewedArrayBuffer]] 内部槽，则：</p>

    <ol><li><p>令 <var>buffer</var> 为 <var>value</var> 的 [[ViewedArrayBuffer]] 内部槽的值。<li><p>令 <var>bufferSerialized</var> 为 ?
     <a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal-2>StructuredSerializeInternal</a>(<var>buffer</var>,<var>forStorage</var>,
     <var>memory</var>)。<li><p>断言： <var>bufferSerialized</var>.[[Type]] 是 "ArrayBuffer"。<li><p>如果 <var>value</var> 有一个 [[DataView]] 内部槽，则把 <var>serialized</var> 设置为
     { [[Type]]: "ArrayBufferView",[[Constructor]]: "DataView",[[ArrayBufferSerialized]]:
     <var>bufferSerialized</var>,[[ByteLength]]: <var>value</var>.[[ByteLength]],[[ByteOffset]]:
     <var>value</var>.[[ByteOffset]] }。<li>
      <p>否则：</p>

      <ol><li><p>断言： <var>value</var> 有一个 [[TypedArrayName]] 内部槽。<li><p>把 <var>serialized</var> 设置为 { [[Type]]: "ArrayBufferView",[[Constructor]]:
       <var>value</var>.[[TypedArrayName]],[[ArrayBufferSerialized]]: <var>bufferSerialized</var>,
       [[ByteLength]]: <var>value</var>.[[ByteLength]],[[ByteOffset]]:
       <var>value</var>.[[ByteOffset]],[[ArrayLength]]: <var>value</var>.[[ArrayLength]] }。</ol>
     </ol>
   <li>
    <p>否则，如果 <var>value</var> 有 [[MapData]] 内部槽，则：</p>

    <ol><li><p>设置<var>serialized</var> 为 { [[Type]]: "Map",[[MapData]]: 一个新的空 <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:js-list data-x-internal=js-list>列表</a> }。<li><p>设置<var>deep</var> 为 true。</ol>
   <li>
    <p>否则，if <var>value</var> 有 [[SetData]] 内部槽，则：</p>

    <ol><li><p>设置 <var>serialized</var> 为 { [[Type]]: "Set",[[SetData]]: 一个新的空 <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:js-list-2 data-x-internal=js-list>列表</a> }。<li><p>设置 <var>deep</var> 为 true。</ol>
   <li>
    <p>否则，如果 <var>value</var> 是一个外来 Array 对象，那么：</p>
    

    <ol><li><p>令<var>valueLenDescriptor</var> 为 ?
     <a id=structuredserializeinternal:ordinarygetownproperty href=https://tc39.github.io/ecma262/#sec-ordinarygetownproperty data-x-internal=ordinarygetownproperty>OrdinaryGetOwnProperty</a>(<var>value</var>，"<code>length</code>")。<li><p>令<var>valueLen</var> 为 <var>valueLenDescriptor</var>.[[Value]]。<li><p>设置<var>serialized</var> 为 { [[Type]]: "Array",[[Length]]: <var>valueLen</var>,
     [[Properties]]: 一个新的空 <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:js-list-3 data-x-internal=js-list>列表</a> }。<li><p>设置<var>deep</var> 为 true。</ol>
   <li>
    <p>否则，如果 <var>value</var> 是一个 <a href=#可序列化对象 id=structuredserializeinternal:可序列化对象>可序列化的</a>
    <a href=https://heycam.github.io/webidl/#dfn-platform-object id=structuredserializeinternal:platform-object data-x-internal=platform-object>平台对象</a>：</p>

    <ol><li><p>如果 <var>value</var> 有一个 <a href=#detached id=structuredserializeinternal:detached>[[Detached]]</a> 内部槽且值为 true，
     则抛出一个 <a id=structuredserializeinternal:datacloneerror-4 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializeinternal:domexception-4><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>令<var>typeString</var> 为 <var>value</var> 的
     <a href=https://heycam.github.io/webidl/#dfn-primary-interface id=structuredserializeinternal:primary-interface data-x-internal=primary-interface>主接口</a> 标识。<li><p>设置<var>serialized</var> 为 { [[Type]]: <var>typeString</var> }。<li><p>设置<var>deep</var> 为 true。</ol>
   <li><p>否则，如果 <var>value</var> 是一个 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=structuredserializeinternal:platform-object-2 data-x-internal=platform-object>平台对象</a>，则抛出一个
   <a id=structuredserializeinternal:datacloneerror-5 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializeinternal:domexception-5><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>否则，如果 <a id=structuredserializeinternal:iscallable href=https://tc39.github.io/ecma262/#sec-iscallable data-x-internal=iscallable>IsCallable</a>(<var>value</var>) 为 true，则抛出一个
   <a id=structuredserializeinternal:datacloneerror-6 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializeinternal:domexception-6><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li>
    <p>否则，如果 <var>value</var> 有除了 [[Prototype]] 和 [[Extensible]] 之外的任何内部槽，
    则抛出一个 <a id=structuredserializeinternal:datacloneerror-7 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializeinternal:domexception-7><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。</p>

    <p class=example>例如 [[PromiseState]] 或 [[WeakMapData]] 内部槽。</p>
   <li>
    <p>否则，如果 <var>value</var> 是一个外来对象，则抛出一个
    <a id=structuredserializeinternal:datacloneerror-8 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializeinternal:domexception-8><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。</p>

    <p class=example>例如代理对象。</p>
   <li>
    <p>否则：</p>

    <ol><li><p>设置<var>serialized</var> 为 { [[Type]]: "Object",[[Properties]]: 一个新的空 <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:js-list-4 data-x-internal=js-list>列表</a> }。<li><p>设置<var>deep</var> 为 true。</ol>
   <li><p><a href=https://infra.spec.whatwg.org/#map-set id=structuredserializeinternal:map-set data-x-internal=map-set>设置</a> <var>memory</var>[<var>value</var>] 为
   <var>serialized</var>。<li>
    <p>如果 <var>deep</var> 为 true，则：</p>

    <ol><li>
      <p>如果 <var>value</var> 有一个 [[MapData]] 内部槽，则：

      <ol><li><p>令 <var>copiedList</var> 为一个新的空 <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:js-list-5 data-x-internal=js-list>列表</a>。

       <li>
        <p>对 <var>value</var>.[[MapData]] 中的 <a href=https://infra.spec.whatwg.org/#list-iterate id=structuredserializeinternal:list-iterate data-x-internal=list-iterate>每一个</a>
        <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:record-2 data-x-internal=record>记录</a> { [[Key]]，[[Value]] } <var>entry</var>：</p>

        <ol><li><p>令<var>copiedEntry</var> 为一个新的 <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:record-3 data-x-internal=record>记录</a>
         { [[Key]]: <var>entry</var>.[[Key]]，[[Value]]: <var>entry</var>.[[Value]] }。<li><p>如果 <var>copiedEntry</var>.[[Key]] 不是特殊值 <i>empty</i>，<a href=https://infra.spec.whatwg.org/#list-append id=structuredserializeinternal:list-append data-x-internal=list-append>追加</a> <var>copiedEntry</var> 到 <var>copiedList</var>。</ol>
       <li>
        <p>对 <var>copiedList</var> 中的 <a href=https://infra.spec.whatwg.org/#list-iterate id=structuredserializeinternal:list-iterate-2 data-x-internal=list-iterate>每一个</a>
        <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:record-4 data-x-internal=record>记录</a> { [[Key]]，[[Value]] } <var>entry</var>：</p>

        <ol><li><p>令 <var>serializedKey</var> 为 ?
         <a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal-3>StructuredSerializeInternal</a>(<var>entry</var>.[[Key]],<var>forStorage</var>,
         <var>memory</var>)。<li><p>令 <var>serializedValue</var> 为 ?
         <a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal-4>StructuredSerializeInternal</a>(<var>entry</var>.[[Value]],<var>forStorage</var>,
         <var>memory</var>)。<li><p><a href=https://infra.spec.whatwg.org/#list-append id=structuredserializeinternal:list-append-2 data-x-internal=list-append>追加</a> { [[Key]]: <var>serializedKey</var>,
         [[Value]]: <var>serializedValue</var> } 到 <var>serialized</var>.[[MapData]]。</ol>
       </ol>
     <li>
      <p>否则，如果 <var>value</var> 有一个 [[SetData]] 内部槽，则：</p>

      <ol><li><p>令<var>copiedList</var> 为一个新的空 <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:js-list-6 data-x-internal=js-list>列表</a>。

       <li>
        <p>对 <var>value</var>.[[SetData]] 中 <a href=https://infra.spec.whatwg.org/#list-iterate id=structuredserializeinternal:list-iterate-3 data-x-internal=list-iterate>每一个</a>
        <var>entry</var>：</p>

        <ol><li><p>如果 <var>entry</var> 不是特殊值 <i>empty</i>，<a href=https://infra.spec.whatwg.org/#list-append id=structuredserializeinternal:list-append-3 data-x-internal=list-append>追加</a> <var>entry</var> 到 <var>copiedList</var>。</ol>
       <li>
        <p>对 <var>copiedList</var> 中 <a href=https://infra.spec.whatwg.org/#list-iterate id=structuredserializeinternal:list-iterate-4 data-x-internal=list-iterate>每一个</a> <var>entry</var>：</p>

        <ol><li><p>令 <var>serializedEntry</var> 为 ?
         <a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal-5>StructuredSerializeInternal</a>(<var>entry</var>,<var>forStorage</var>,
         <var>memory</var>)。<li><p><a href=https://infra.spec.whatwg.org/#list-append id=structuredserializeinternal:list-append-4 data-x-internal=list-append>追加</a> <var>serializedEntry</var> 到
         <var>serialized</var>.[[SetData]]。</ol>
       </ol>
     <li>
      <p>否则，如果 <var>value</var> 是一个
      <a href=#可序列化对象 id=structuredserializeinternal:可序列化对象-2>可序列化的</a>
      <a href=https://heycam.github.io/webidl/#dfn-platform-object id=structuredserializeinternal:platform-object-3 data-x-internal=platform-object>平台对象</a>，则给定
      <var>value</var>，<var>serialized</var>，和 <var>forStorage</var> 执行适当的
      <a href=#serialization-steps id=structuredserializeinternal:serialization-steps>序列化步骤</a>。</p>

      <p><a href=#serialization-steps id=structuredserializeinternal:serialization-steps-2>序列化步骤</a> 可能需要执行一个 <dfn id=sub-serialization data-export="">字序列化</dfn>。
      该操作接受 <var>subValue</var> 值作为输入，返回 <a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal-6>StructuredSerializeInternal</a>
      (<var>subValue</var>, <var>forStorage</var>,<var>memory</var>)。
      （换句话说，<a href=#sub-serialization id=structuredserializeinternal:sub-serialization>子序列化</a> 是
      <a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal-7>StructuredSerializeInternal</a> 的与该调用一致的特化。）</p>
     <li>
      <p>否则：

      <ol><li><p>令 <var>enumerableKeys</var> 为一个新的空 <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:js-list-7 data-x-internal=js-list>列表</a>。<li>
        <p>对 <var>value</var>.[[OwnPropertyKeys]]() 中的每一个 <var>key</var>：</p>

        <ol><li>
          <p>如果 <a href=https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values id=structuredserializeinternal:js-type-3 data-x-internal=js-type>Type</a>(<var>key</var>) 为 String，则：</p>

          <ol><li><p>令<var>valueDesc</var> 为 !
           <var>value</var>.[[GetOwnProperty]](<var>key</var>)。<li><p>如果 <var>valueDesc</var>.[[Enumerable]] 为 true，则 <a href=https://infra.spec.whatwg.org/#list-append id=structuredserializeinternal:list-append-5 data-x-internal=list-append>追加</a> <var>key</var> 到 <var>enumerableKeys</var>。</ol>
         </ol>
       <li>
        <p>对 <var>enumerableKeys</var> 中的每一个 <var>key</var> ：</p>

        <ol><li>
          <p>如果 ! <a id=structuredserializeinternal:hasownproperty href=https://tc39.github.io/ecma262/#sec-hasownproperty data-x-internal=hasownproperty>HasOwnProperty</a>(<var>value</var>,<var>key</var>) 为 true，则：</p>

          <ol><li><p>令<var>inputValue</var> 为 ? <var>value</var>.[[Get]](<var>key</var>,
           <var>value</var>)。<li><p>令<var>outputValue</var> 为 ?
           <a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal-8>StructuredSerializeInternal</a>(<var>inputValue</var>,<var>forStorage</var>,
           <var>memory</var>)。<li><p><a href=https://infra.spec.whatwg.org/#list-append id=structuredserializeinternal:list-append-6 data-x-internal=list-append>追加</a> { [[Key]]: <var>key</var>,[[Value]]:
           <var>outputValue</var> } 到 <var>serialized</var>.[[Properties]]。</ol>
         </ol>
       </ol>

      <p class=note>
      上面执行的键的集合非常类似于 JavaScript 规范的 <a id=structuredserializeinternal:enumerableownproperties href=https://tc39.github.io/ecma262/#sec-enumerableownproperties data-x-internal=enumerableownproperties>EnumerableOwnProperties</a> 操作，
      但最关键的是它使用 [[OwnPropertyKeys]] 内部方法提供的确定性排序，
      而不是像 <a id=structuredserializeinternal:enumerableownproperties-2 href=https://tc39.github.io/ecma262/#sec-enumerableownproperties data-x-internal=enumerableownproperties>EnumerableOwnProperties</a> 那样以非未定义的方式对键进行重新排序。
      <a href=references.html#refsJAVASCRIPT>[JAVASCRIPT]</a></p>
     </ol>
   <li><p>返回 <var>serialized</var>。</ol>

  <div class=example>
   <p>注意 <a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal-9>StructuredSerializeInternal</a> 产生的 <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:record-5 data-x-internal=record>记录</a>
   可能包含其他记录的 "指针"，这产生了环装引用。例如当我们传递下面的 JavaScript 对象到
   <a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal-10>StructuredSerializeInternal</a> 中时：</p>

  <pre>const o = {};
o.myself = o;</pre>

  <p>它产生了下面的结果：</p>

  <pre><samp>{
  [[Type]]: "Object",
  [[Properties]]: «
    {
      [[Key]]: "myself",
      [[Value]]: <i>&lt;一个指向整个结构的指针></i>
    }
  »
}</samp></pre>
  </div>


  <h4 id=structuredserialize data-dfn-type=abstract-op data-lt=StructuredSerialize data-export="">2.7.4 <dfn>StructuredSerialize</dfn> ( <var>value</var> )<a href=#structuredserialize class=self-link></a></h4>

  <ol><li><p>返回 ? <a href=#structuredserializeinternal id=structuredserialize:structuredserializeinternal>StructuredSerializeInternal</a>(<var>value</var>, false).</ol>


  <h4 id=structuredserializeforstorage data-dfn-type=abstract-op data-lt=StructuredSerializeForStorage data-export="">2.7.5 <dfn>StructuredSerializeForStorage</dfn> ( <var>value</var> )<a href=#structuredserializeforstorage class=self-link></a></h4>

  <ol><li><p>返回 ? <a href=#structuredserializeinternal id=structuredserializeforstorage:structuredserializeinternal>StructuredSerializeInternal</a>(<var>value</var>, true).</ol>


  <h4 id=structureddeserialize data-dfn-type=abstract-op data-lt=StructuredDeserialize data-export="">2.7.6 <dfn>StructuredDeserialize</dfn> ( <var>serialized</var>，
  <var>targetRealm</var> [ ，<var>memory</var> ] )<a href=#structureddeserialize class=self-link></a></h4>

  <p><a href=#structureddeserialize id=structureddeserialize:structureddeserialize>StructuredDeserialize</a> 抽象操作接受一个 <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structureddeserialize:record data-x-internal=record>记录</a>
  <var>serialized</var> 作为输入，它由之前的 <a href=#structuredserialize id=structureddeserialize:structuredserialize>StructuredSerialize</a> 或
  <a href=#structuredserializeforstorage id=structureddeserialize:structuredserializeforstorage>StructuredSerializeForStorage</a> 产生，把它反序列化到一个新的
  <var>targetRealm</var> 中创建的 JavaScript 值。</p>

  <p>该过程可能抛出一个异常，例如为新的对象尝试分配内存时（尤其是 <code>ArrayBuffer</code> 对象）。</p>

  <ol><li>
    <p>如果没有提供 <var>memory</var>，令 <var>memory</var> 为一个空的 <a href=https://infra.spec.whatwg.org/#ordered-map id=structureddeserialize:ordered-map data-x-internal=ordered-map>映射</a>。</p>

    <p class=note><var>memory</var> 映射是为了避免把对象反序列化两次。
    最终会用于保持环状结构以及标识图中的重复对象。</p>
   <li><p>如果 <var>memory</var>[<var>sirialized</var>] <a href=https://infra.spec.whatwg.org/#map-exists id=structureddeserialize:map-exists data-x-internal=map-exists>存在</a>，则
   返回 <var>memory</var>[<var>serialized</var>]。<li><p>令<var>deep</var> 为 false。<li><p>令<var>value</var> 为一个未初始化的值。<li>
    <p>如果 <var>serialized</var> 包含一个 [[TransferConsumed]] 字段，则：</p>

    <ol><li><p>断言： <var>serialized</var>.[[TransferConsumed]] 为 false。
     （一定不能进入这种情况：在同一个序列化上调用多次 <a href=#structureddeserialize id=structureddeserialize:structureddeserialize-2>StructuredDeserialize</a>，而那个序列化又包含了传输数据容器。）<li><p>设置 <var>serialized</var>.[[TransferConsumed]] 为 true。<li>
      <p>如果 <var>serialized</var>.[[Type]] 是 "ArrayBuffer"，则设置 <var>value</var> 为一个新的
      <var>targetRealm</var> 中的 ArrayBuffer 对象，其 [[ArrayBufferData]] 内部槽值为
      <var>serialized</var>.[[ArrayBufferData]]，其 [[ArrayBufferByteLength]] 内部槽值为
      <var>serialized</var>.[[ArrayBufferByteLength]]。</p>

      <p class=note>在反序列化期间可以访问 [[ArrayBufferData]] 占用的原始内存的情况下，
      此步骤不大可能会引发异常，因为不需要分配新的内存：
      只是把 [[ArrayBufferData]] 占用的内存转移到新的 ArrayBuffer 中。
      例如当源和目标 Realm 都在同一进程中时，就属于这种情况。
     <li>
      <p>否则：</p>

      <ol><li><p>令 <var>interfaceName</var> 为 <var>serialized</var>.[[Type]]。<li><p>如果由 <var>interfaceName</var> 标识的接口没有暴露在
       <var>targetRealm</var> 中，则抛出一个 <a id=structureddeserialize:datacloneerror href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a>
       <code id=structureddeserialize:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>设置 <var>value</var> 为一个在 <var>targetRealm</var> 中创建的
       新的由 <var>interfaceName</var> 标识的接口的实例。<li><p>给定 <var>serialized</var> 和 <var>value</var>，为 <var>interfaceName</var> 标识的接口
       执行适当的 <a href=#transfer-receiving-steps id=structureddeserialize:transfer-receiving-steps>接收步骤</a>。</ol>
     </ol>
   <li><p>否则，如果 <var>serialized</var>.[[Type]] 是 "primitive"，则设置 <var>value</var> 为
   <var>serialized</var>.[[Value]]。</p>

   <li><p>否则，如果 <var>serialized</var>.[[Type]] 是 "Boolean"，则设置 <var>value</var>
   为一个 <var>targetRealm</var> 中的新的 Boolean 对象，其 [[BooleanData]] 内部槽值为
   <var>serialized</var>.[[BooleanData]]。<li><p>否则，如果 <var>serialized</var>.[[Type]] 是 "Number"，则设置 <var>value</var>
   为一个 <var>targetRealm</var> 中的新的 Number 对象，其 [[NumberData]] 内部槽值为
   <var>serialized</var>.[[NumberData]]。<li><p>否则，如果 <var>serialized</var>.[[Type]] 是 "String"，则设置 <var>value</var>
   为一个 <var>targetRealm</var> 中的新的 String 对象，其 [[StringData]] 内部槽值为
   <var>serialized</var>.[[StringData]]。<li><p>否则，如果 <var>serialized</var>.[[Type]] 是 "Date"，则设置 <var>value</var>
   为一个 <var>targetRealm</var> 中的新的 Date 对象，其 [[DateValue]] 内部槽值为
   <var>serialized</var>.[[DateValue]]。<li><p>否则，如果 <var>serialized</var>.[[Type]] 是 "RegExp"，则设置 <var>value</var>
   为一个 <var>targetRealm</var> 中的新的 RegExp 对象，其 [[RegExpMatcher]] 内部槽值为
   <var>serialized</var>.[[RegExpMatcher]]，其 [[OriginalSource]] 内部槽值为
   <var>serialized</var>.[[OriginalSource]]，其 [[OriginalFlags]] 内部槽值为
   <var>serialized</var>.[[OriginalFlags]]。<li>
    <p>否则，如果 <var>serialized</var>.[[Type]] 是 "SharedArrayBuffer"，则：</p>

    <ol><li><p>如果 <var>targetRealm</var> 对应的 <a id=structureddeserialize:agent-cluster href=https://tc39.github.io/ecma262/#sec-agent-clusters data-x-internal=agent-cluster>agent cluster</a> 不是
     <var>serialized</var>.[[AgentCluster]]，则抛出一个
     <a id=structureddeserialize:datacloneerror-2 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structureddeserialize:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>否则，设置 <var>value</var> 到一个 <var>targetRealm</var> 中的新的 SharedArrayBuffer 对象，
     其 [[ArrayBufferData]] 内部槽值为 <var>serialized</var>.[[ArrayBufferData]]，
     其 [[ArrayBufferByteLength]] 内部槽值是 <var>serialized</var>.[[ArrayBufferByteLength]]。</ol>
   <li>
    <p>否则，如果 <var>serialized</var>.[[Type]] 是 "ArrayBuffer"，则设置 <var>value</var>
    为一个 <var>targetRealm</var> 中新的 ArrayBuffer 对象，其 [[ArrayBufferData]] 内部槽值为
    <var>serialized</var>.[[ArrayBufferData]]，其 [[ArrayBufferByteLength]] 内部槽值为
    <var>serialized</var>.[[ArrayBufferByteLength]]。</p>

    <p>如果这抛出了一个异常，则抛出一个 <a id=structureddeserialize:datacloneerror-3 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a>
    <code id=structureddeserialize:domexception-3><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。</p>

    <p class=note>如果没有足够的内存来创建这样一个 ArrayBuffer 对象，该步骤可能会抛出异常。</p>
   <li>
    <p>否则，如果 <var>serialized</var>.[[Type]] 是 "ArrayBufferView"，则：</p>

    <ol><li><p>令<var>deserializedArrayBuffer</var> 为 ?
     <a href=#structureddeserialize id=structureddeserialize:structureddeserialize-3>StructuredDeserialize</a>(<var>serialized</var>.[[ArrayBufferSerialized]],
     <var>targetRealm</var>,<var>memory</var>)。<li><p>如果 <var>serialized</var>.[[Constructor]] 是 "DataView"，则设置 <var>value</var> 为
     <var>targetRealm</var> 中的一个新的 DataView 对象，其 [[ViewedArrayBuffer]] 内部槽值为
     <var>deserializedArrayBuffer</var>，其 [[ByteLength]] 内部槽值为
     <var>serialized</var>.[[ByteLength]]，其 [[ByteOffset]] 内部槽值为
     <var>serialized</var>.[[ByteOffset]]。<li><p>否则，设置 <var>value</var> 为一个 <var>targetRealm</var> 中新的有类型数组对象，
     使用 <var>serialized</var>.[[Constructor]] 给出的构造器，其
     [[ViewedArrayBuffer]] 内部槽值为 <var>deserializedArrayBuffer</var>，其
     [[TypedArrayName]] 内部槽值为 <var>serialized</var>.[[Constructor]]，其
     [[ByteLength]] 内部槽值为 <var>serialized</var>.[[ByteLength]]，其
     [[ByteOffset]] 内部槽值为 <var>serialized</var>.[[ByteOffset]]，其
     [[ArrayLength]] 内部槽值为 <var>serialized</var>.[[ArrayLength]]。</ol>
   <li>
    <p>否则，如果 <var>serialized</var>.[[Type]] 是 "Map"，则：</p>

    <ol><li><p>设置<var>value</var> 为 <var>targetRealm</var> 中一个新的 Map 对象，其 [[MapData]]
     内部槽值为一个新的空 <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structureddeserialize:js-list data-x-internal=js-list>列表</a>。<li><p>设置<var>deep</var> to true。</ol>
   <li>
    <p>否则，如果 <var>serialized</var>.[[Type]] 是 "Set"，则：</p>

    <ol><li><p>设置<var>value</var> 为一个 <var>targetRealm</var> 中新的设置对象，其 [[SetData]]
     内部槽值为一个新的空 <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structureddeserialize:js-list-2 data-x-internal=js-list>列表</a>。<li><p>设置<var>deep</var> 为 true。</ol>
   <li>
    <p>否则，如果 <var>serialized</var>.[[Type]] 是 "Array"，则：</p>

    <ol><li><p>令<var>outputProto</var> 为 <var>targetRealm</var> 中的 <a id=structureddeserialize:%arrayprototype% href=https://tc39.github.io/ecma262/#sec-properties-of-the-array-prototype-object data-x-internal=%arrayprototype%>%ArrayPrototype%</a> 固有对象。<li><p>设置 <var>value</var> 为 ! <a id=structureddeserialize:arraycreate href=https://tc39.github.io/ecma262/#sec-arraycreate data-x-internal=arraycreate>ArrayCreate</a>(<var>serialized</var>.[[Length]],
     <var>outputProto</var>)。<li><p>设置<var>deep</var> 为 true。</ol>
   <li>
    <p>否则，如果 <var>serialized</var>.[[Type]] 是 "Object"，则：</p>

    <ol><li><p>设置<var>value</var> 为 <var>targetRealm</var> 中一个新的 Object。<li><p>设置<var>deep</var> 为 true。</ol>
   <li>
    <p>否则：</p>

    <ol><li><p>令 <var>interfaceName</var> 为 <var>serialized</var>.[[Type]]。<li><p>如果 <var>interfaceName</var> 标识的接口没有暴露在
     <var>targetRealm</var> 中，则抛出一个 <a id=structureddeserialize:datacloneerror-4 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a>
     <code id=structureddeserialize:domexception-4><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>设置<var>value</var> 为在 <var>targetRealm</var> 中创建的、
     以 <var>interfaceName</var> 标识的接口的一个新的实例。</p>

     <li><p>设置<var>deep</var> 为 true。</ol>
   <li><p><a href=https://infra.spec.whatwg.org/#map-set id=structureddeserialize:map-set data-x-internal=map-set>设置</a> <var>memory</var>[<var>serialized</var>] 为
   <var>value</var>。<li>
    <p>如果 <var>deep</var> 为 true，则：</p>

    <ol><li>
      <p>如果 <var>serialized</var>.[[Type]] 是 "Map"，则：</p>

      <ol><li>
        <p>对 <var>serialized</var>.[[MapData]] 中的 <a href=https://infra.spec.whatwg.org/#list-iterate id=structureddeserialize:list-iterate data-x-internal=list-iterate>每一个</a>
        <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structureddeserialize:record-2 data-x-internal=record>记录</a> { [[Key]]，[[Value]] } <var>entry</var>：</p>

        <ol><li><p>令<var>deserializedKey</var> 为 ?
         <a href=#structureddeserialize id=structureddeserialize:structureddeserialize-4>StructuredDeserialize</a>(<var>entry</var>.[[Key]],<var>targetRealm</var>,
         <var>memory</var>)。<li><p>令<var>deserializedValue</var> 为 ?
         <a href=#structureddeserialize id=structureddeserialize:structureddeserialize-5>StructuredDeserialize</a>(<var>entry</var>.[[Value]],<var>targetRealm</var>,
         <var>memory</var>)。<li><p><a href=https://infra.spec.whatwg.org/#list-append id=structureddeserialize:list-append data-x-internal=list-append>追加</a> { [[Key]]: <var>deserializedKey</var>,
         [[Value]]: <var>deserializedValue</var> } 到 <var>value</var>.[[MapData]]。</ol>
       </ol>
     <li>
      <p>否则，如果 <var>serialized</var>.[[Type]] 是 "Set"，则：</p>

      <ol><li>
        <p>对 <var>serialized</var>.[[SetData]] 中 <a href=https://infra.spec.whatwg.org/#list-iterate id=structureddeserialize:list-iterate-2 data-x-internal=list-iterate>每一个</a>
        <var>entry</var>：</p>

        <ol><li><p>令<var>deserializedEntry</var> 为 ?
         <a href=#structureddeserialize id=structureddeserialize:structureddeserialize-6>StructuredDeserialize</a>(<var>entry</var>,<var>targetRealm</var>,
         <var>memory</var>)。<li><p><a href=https://infra.spec.whatwg.org/#list-append id=structureddeserialize:list-append-2 data-x-internal=list-append>追加</a> <var>deserializedEntry</var> 到
         <var>value</var>.[[SetData]]。</ol>
       </ol>
     <li>
      <p>否则，如果 <var>serialized</var>.[[Type]] 是 "Array" 或 "Object"，则：</p>

      <ol><li>
        <p>对 <var>serialized</var>.[[Properties]] 中的 <a href=https://infra.spec.whatwg.org/#list-iterate id=structureddeserialize:list-iterate-3 data-x-internal=list-iterate>每一个</a>
        <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structureddeserialize:record-3 data-x-internal=record>记录</a> { [[Key]]，[[Value]] } <var>entry</var>：</p>

        <ol><li><p>令<var>deserializedValue</var> 为 ?
         <a href=#structureddeserialize id=structureddeserialize:structureddeserialize-7>StructuredDeserialize</a>(<var>entry</var>.[[Value]],<var>targetRealm</var>,
         <var>memory</var>)。<li><p>令<var>result</var> 为 ! <a id=structureddeserialize:createdataproperty href=https://tc39.github.io/ecma262/#sec-createdataproperty data-x-internal=createdataproperty>CreateDataProperty</a>(<var>value</var>,
         <var>entry</var>.[[Key]],<var>deserializedValue</var>)。<li><p>断言： <var>result</var> 为 true。</ol>
       </ol>
     <li>
      <p>否则：</p>

      <ol><li>
        <p>给定 <var>serialized</var> 和 <var>value</var>，为 <var>serialized</var>.[[Type]] 标识的接口
        执行适当的 <a href=#deserialization-steps id=structureddeserialize:deserialization-steps>反序列化步骤</a>。</p>

        <p><a href=#deserialization-steps id=structureddeserialize:deserialization-steps-2>反序列化步骤</a> 可能会执行一个 <dfn id=sub-deserialization data-export="">子反序列化</dfn>。该操作接受
        先前序列化后的 <a id=structureddeserialize:record-4 href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type data-x-internal=record>Record</a> <var>subSerialized</var> 作为输入，返回
        <a href=#structureddeserialize id=structureddeserialize:structureddeserialize-8>StructuredDeserialize</a>(<var>subSerialized</var>,<var>targetRealm</var>,
        <var>memory</var>)。（换句话说，<a href=#sub-deserialization id=structureddeserialize:sub-deserialization>子反序列化</a> 是
        是 <a href=#structureddeserialize id=structureddeserialize:structureddeserialize-9>StructuredDeserialize</a> 的与该调用一致的特化。）</p>
       </ol>
    </ol>
   <li><p>返回 <var>value</var>。</ol>

  <h4 id=structuredserializewithtransfer data-dfn-type=abstract-op data-lt=StructuredSerializeWithTransfer data-export="">2.7.7 <dfn>StructuredSerializeWithTransfer</dfn> ( <var>value</var>，
  <var>transferList</var> )<a href=#structuredserializewithtransfer class=self-link></a></h4>

  <ol><li>
    <p>令<var>memory</var> 为一个空的 <a href=https://infra.spec.whatwg.org/#ordered-map id=structuredserializewithtransfer:ordered-map data-x-internal=ordered-map>映射</a>。</p>

    <p class=note>除了它在 <a href=#structuredserializeinternal id=structuredserializewithtransfer:structuredserializeinternal>StructuredSerializeInternal</a> 中的正常使用外，
    在本算法中 <var>memory</var> 还用来确保 <a href=#structuredserializeinternal id=structuredserializewithtransfer:structuredserializeinternal-2>StructuredSerializeInternal</a>
    忽略了 <var>transferList</var> 中的项目，来让我们做自己的处理。</p>
   <li>
    <p>对 <var>transferList</var> 中的 <a href=https://infra.spec.whatwg.org/#list-iterate id=structuredserializewithtransfer:list-iterate data-x-internal=list-iterate>每一个</a>
    <var>transferable</var>：</p>

    <ol><li><p>如果 <var>transferable</var> 既没有 [[ArrayBufferData]] 内部槽
     又没有 <a href=#detached id=structuredserializewithtransfer:detached>[[Detached]]</a> 内部槽，则抛出一个
     <a id=structuredserializewithtransfer:datacloneerror href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializewithtransfer:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>如果 <var>transferable</var> 有一个 [[ArrayBufferData]] 内部槽且
     ! <a id=structuredserializewithtransfer:issharedarraybuffer href=https://tc39.github.io/ecma262/#sec-issharedarraybuffer data-x-internal=issharedarraybuffer>IsSharedArrayBuffer</a>(<var>transferable</var>) 为 true 或
     ! <a id=structuredserializewithtransfer:isdetachedbuffer href=https://tc39.github.io/ecma262/#sec-isdetachedbuffer data-x-internal=isdetachedbuffer>IsDetachedBuffer</a>(<var>transferable</var>) 为 true，则抛出一个
     <a id=structuredserializewithtransfer:datacloneerror-2 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializewithtransfer:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>如果 <var>transferable</var> 有一个 <a href=#detached id=structuredserializewithtransfer:detached-2>[[Detached]]</a> 内部槽且
     <var>transferable</var>.<a href=#detached id=structuredserializewithtransfer:detached-3>[[Detached]]</a> 为 true，则抛出一个
     <a id=structuredserializewithtransfer:datacloneerror-3 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializewithtransfer:domexception-3><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>令<var>placeholder</var> 为一个用户代理定义的占位对象。<li><p><a href=https://infra.spec.whatwg.org/#map-set id=structuredserializewithtransfer:map-set data-x-internal=map-set>设置</a> <var>memory</var>[<var>transferable</var>] 为
     <var>placeholder</var>。</ol>
   <li><p>令<var>serialized</var> 为 ? <a href=#structuredserializeinternal id=structuredserializewithtransfer:structuredserializeinternal-3>StructuredSerializeInternal</a>(<var>value</var>,
   false,<var>memory</var>)。<li><p>令<var>transferDataHolders</var> 为一个新的空 <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structuredserializewithtransfer:js-list data-x-internal=js-list>列表</a>。<li>
    <p>对 <var>transferList</var> 中的 <a href=https://infra.spec.whatwg.org/#list-iterate id=structuredserializewithtransfer:list-iterate-2 data-x-internal=list-iterate>每一个</a>
    <var>transferable</var>：</p>

    <ol><li><p>令<var>placeholder</var> 为 <var>memory</var>[<var>transferable</var>]。<li><p>令<var>dataHolder</var> 为一个未初始化的值。<li>
      <p>如果 <var>transferable</var> 有一个 [[ArrayBufferData]] 内部槽，则：</p>

      <ol><li><p>设置<var>dataHolder</var> 为 { [[TransferConsumed]]: false,[[Type]]: "ArrayBuffer",
       [[ArrayBufferData]]: <var>transferable</var>.[[ArrayBufferData]],[[ArrayBufferByteLength]]:
       <var>transferable</var>.[[ArrayBufferByteLength]] }。<li><p>执行 ! <a id=structuredserializewithtransfer:detacharraybuffer href=https://tc39.github.io/ecma262/#sec-detacharraybuffer data-x-internal=detacharraybuffer>DetachArrayBuffer</a>(<var>transferable</var>)。</ol>
     <li>
      <p>否则：</p>

      <ol><li><p>断言： <var>transferable</var> 是一个 <a href=#可传输对象 id=structuredserializewithtransfer:可传输对象>可传输的</a>
       <a href=https://heycam.github.io/webidl/#dfn-platform-object id=structuredserializewithtransfer:platform-object data-x-internal=platform-object>平台对象</a>。<li><p>令<var>interfaceName</var> 为 <var>transferable</var> 的
       <a href=https://heycam.github.io/webidl/#dfn-primary-interface id=structuredserializewithtransfer:primary-interface data-x-internal=primary-interface>主接口</a> 的标识符。<li><p>设置<var>dataHolder</var> 为 { [[TransferConsumed]]: false,[[Type]]:
       <var>interfaceName</var> }。<li><p>指定 <var>transferable</var> 和 <var>dataHolder</var>，
       为 <var>interfaceName</var> 标识的接口执行适当的 <a href=#transfer-steps id=structuredserializewithtransfer:transfer-steps>传输步骤</a>。<li><p>设置<var>transferable</var>.<a href=#detached id=structuredserializewithtransfer:detached-4>[[Detached]]</a> 为 true。</ol>
     <li><p>在 <var>serialized</var> 中，用 <var>dataHolder</var> 替换所有的 <var>placeholder</var> 实例。<li><p><a href=https://infra.spec.whatwg.org/#list-append id=structuredserializewithtransfer:list-append data-x-internal=list-append>追加</a> <var>dataHolder</var> 到
     <var>transferDataHolders</var>。</ol>
   <li><p>返回 { [[Serialized]]: <var>serialized</var>,[[TransferDataHolders]]:
   <var>transferDataHolders</var> }。</ol>

  <h4 id=structureddeserializewithtransfer data-dfn-type=abstract-op data-lt=StructuredDeserializeWithTransfer data-export="">2.7.8 <dfn>StructuredDeserializeWithTransfer</dfn> (
  <var>serializeWithTransferResult</var>，<var>targetRealm</var> )<a href=#structureddeserializewithtransfer class=self-link></a></h4>

  <ol><li>
    <p>令 <var>memory</var> 为一个空的 <a href=https://infra.spec.whatwg.org/#ordered-map id=structureddeserializewithtransfer:ordered-map data-x-internal=ordered-map>映射</a>。</p>

    <p class=note>除了它在 <a href=#structureddeserialize id=structureddeserializewithtransfer:structureddeserialize>StructuredDeserialize</a> 中的正常使用外，
    在本算法中 <var>memory</var> 还用来帮助我们确定传输值的列表。</p>
   <li><p>令<var>deserialized</var> 为 ?
   <a href=#structureddeserialize id=structureddeserializewithtransfer:structureddeserialize-2>StructuredDeserialize</a>(<var>serializeWithTransferResult</var>.[[Serialized]],
   <var>targetRealm</var>,<var>memory</var>)。<li><p>令<var>transferredValues</var> 为一个新的空 <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structureddeserializewithtransfer:js-list data-x-internal=js-list>列表</a>。<li>
    <p>对 <var>serializeWithTransferResult</var>.[[TransferDataHolders]] 中的
    <a href=https://infra.spec.whatwg.org/#list-iterate id=structureddeserializewithtransfer:list-iterate data-x-internal=list-iterate>每一个</a> <var>transferDataHolder</var>：</p>

    <ol><li><p><a href=https://infra.spec.whatwg.org/#list-append id=structureddeserializewithtransfer:list-append data-x-internal=list-append>追加</a>
     <var>memory</var>[<var>transferDataHolder</var>] 到 <var>transferredValues</var>。</ol>
   <li><p>返回 { [[Deserialized]]: <var>deserialized</var>,[[TransferredValues]]:
   <var>transferredValues</var> }。</ol>


  <h4 id=performing-structured-clones-from-other-specifications>2.7.9 在其他规范中执行序列化和传输<a href=#performing-structured-clones-from-other-specifications class=self-link></a></h4>

  <p>其他规范可以使用这里定义的抽象操作。下面为每个抽象操作何时比较有用提供了指导以及例子。</p>

  <dl><dt><a href=#structuredserializewithtransfer id=performing-structured-clones-from-other-specifications:structuredserializewithtransfer>StructuredSerializeWithTransfer</a><dt><a href=#structureddeserializewithtransfer id=performing-structured-clones-from-other-specifications:structureddeserializewithtransfer>StructuredDeserializeWithTransfer</a><dd>
    <p>把一个值克隆到另一个 <a href=https://tc39.github.io/ecma262/#sec-code-realms id=performing-structured-clones-from-other-specifications:javascript-realm data-x-internal=javascript-realm>JavaScript Realm</a>，
    带着传输列表但提前不知道目标领域。
    这一情况下序列化步骤可以立即执行，反序列化步骤延迟到目标 Realm 已知的时候执行。</p>

    <p class=example><code id=performing-structured-clones-from-other-specifications:dom-messageport-postmessage><a href=comms.html#dom-messageport-postmessage>messagePort.postMessage()</a></code>
    使用这一对抽象操作，因为目标 Realm 直到 <code id=performing-structured-clones-from-other-specifications:messageport><a href=comms.html#messageport>MessagePort</a></code>
    <a href=comms.html#has-been-shipped id=performing-structured-clones-from-other-specifications:has-been-shipped>发出</a> 时才知道。</p>
   <dt><a href=#structuredserialize id=performing-structured-clones-from-other-specifications:structuredserialize>StructuredSerialize</a><dt><a href=#structuredserializeforstorage id=performing-structured-clones-from-other-specifications:structuredserializeforstorage>StructuredSerializeForStorage</a><dt><a href=#structureddeserialize id=performing-structured-clones-from-other-specifications:structureddeserialize>StructuredDeserialize</a><dd>
    <p>为给定的值创建一个 <a id=performing-structured-clones-from-other-specifications:javascript-realm-2 href=https://tc39.github.io/ecma262/#sec-code-realms data-x-internal=javascript-realm>JavaScript Realm</a> 无关的可以保存无限时间的快照，
    然后（可能很多次）具象化回 JavaScript 值。</p>

    <p><a href=#structuredserializeforstorage id=performing-structured-clones-from-other-specifications:structuredserializeforstorage-2>StructuredSerializeForStorage</a> 可以在序列化被用于持久保存值的时候
    （而不是在 Realm 之间传递）使用。当尝试序列化 <code id=performing-structured-clones-from-other-specifications:sharedarraybuffer><a data-x-internal=sharedarraybuffer href=https://tc39.github.io/ecma262/#sec-sharedarraybuffer-objects>SharedArrayBuffer</a></code> 对象时会抛出异常，
    因为保存共享内存没有意义。类似地，当指定有着定制的
    <a href=#serialization-steps id=performing-structured-clones-from-other-specifications:serialization-steps>序列化步骤</a>
    的 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=performing-structured-clones-from-other-specifications:platform-object data-x-internal=platform-object>平台对象</a>
    且 <var>forStorage</var> 参数为 true 时，也可能抛出异常或者有不同的行为。</p>

    <p class=example><code id=performing-structured-clones-from-other-specifications:dom-history-pushstate><a href=browsers.html#dom-history-pushstate>history.pushState()</a></code> 和 <code id=performing-structured-clones-from-other-specifications:dom-history-replacestate><a href=browsers.html#dom-history-replacestate>history.replaceState()</a></code> 在作者提供的状态对象上使用
    <a href=#structuredserializeforstorage id=performing-structured-clones-from-other-specifications:structuredserializeforstorage-3>StructuredSerializeForStorage</a>，把它们存储为
    <a href=browsers.html#session-history-entry id=performing-structured-clones-from-other-specifications:session-history-entry>会话历史入口</a> 的
    <a href=browsers.html#serialized-state id=performing-structured-clones-from-other-specifications:serialized-state>序列化状态</a>。
    然后 <code id=performing-structured-clones-from-other-specifications:dom-history-state><a href=browsers.html#dom-history-state>history.state</a></code> 属性用了
    <a href=#structureddeserialize id=performing-structured-clones-from-other-specifications:structureddeserialize-2>StructuredDeserialize</a> 来返回最初提供的状态对象的一份克隆。</p>

    <p class=example><code id=performing-structured-clones-from-other-specifications:dom-broadcastchannel-postmessage><a href=comms.html#dom-broadcastchannel-postmessage>broadcastChannel.postMessage()</a></code> 对它的输入使用了
    <a href=#structuredserialize id=performing-structured-clones-from-other-specifications:structuredserialize-2>StructuredSerialize</a>，然后对结果多次使用了 <a href=#structureddeserialize id=performing-structured-clones-from-other-specifications:structureddeserialize-3>StructuredDeserialize</a>
    来对每一个广播目标产生新的拷贝。注意在多目标情况下传输没有意义。</p>

    <p class=example>持久化 JavaScript 值到文件系统的 API 可能还会对它的输入使用
    <a href=#structuredserializeforstorage id=performing-structured-clones-from-other-specifications:structuredserializeforstorage-4>StructuredSerializeForStorage</a> 并对它的输出使用 <a href=#structureddeserialize id=performing-structured-clones-from-other-specifications:structureddeserialize-4>StructuredDeserialize</a>。</p>
   </dl>

  <p>一般来说，调用点可能会传递 Web IDL 值而不是 JavaScript 值；
  这将被理解为在调用这些算法之前执行到 JavaScript 值的隐式
  <a href=https://heycam.github.io/webidl/#es-type-mapping id=performing-structured-clones-from-other-specifications:concept-idl-convert data-x-internal=concept-idl-convert>转换</a>。</p>

  <p id=structuredclone class=note><span id=structured-clone></span>
  本规范曾经定义了“结构化克隆”算法和一个 StructuredClone 抽象操作。
  然而在实践中，它的所有已知用途可以更好地通过单独的序列化和反序列化步骤来实现，所以把它删除了。</p>

  <hr>

  <p>如果在任意对象上进行操作，对于非用户代码同步调用到用户代理方法的调用点必须在调用
  <a href=#structuredserialize id=performing-structured-clones-from-other-specifications:structuredserialize-3>StructuredSerialize</a>，<a href=#structuredserializeforstorage id=performing-structured-clones-from-other-specifications:structuredserializeforstorage-5>StructuredSerializeForStorage</a>，
  或 <a href=#structuredserializewithtransfer id=performing-structured-clones-from-other-specifications:structuredserializewithtransfer-2>StructuredSerializeWithTransfer</a> 等抽象操作之前小心地
  <a href=webappapis.html#prepare-to-run-script id=performing-structured-clones-from-other-specifications:prepare-to-run-script>准备执行脚本</a> 以及
  <a href=webappapis.html#prepare-to-run-a-callback id=performing-structured-clones-from-other-specifications:prepare-to-run-a-callback>准备运行 fallback</a>。

  这是必要的，因为序列化过程可能会调用作者定义的访问器作为最终的深度序列化步骤，
  这些访问器调用的操作可能会依赖于
  <a href=webappapis.html#concept-entry-everything id=performing-structured-clones-from-other-specifications:concept-entry-everything>entry</a> 和 <a href=webappapis.html#concept-incumbent-everything id=performing-structured-clones-from-other-specifications:concept-incumbent-everything>incumbent</a> 的概念已经建立好。</p>

  <p class=example><code id=performing-structured-clones-from-other-specifications:dom-window-postmessage><a href=comms.html#dom-window-postmessage>window.postMessage()</a></code> 对它的参数执行
  <a href=#structuredserializewithtransfer id=performing-structured-clones-from-other-specifications:structuredserializewithtransfer-3>StructuredSerializeWithTransfer</a> 操作，但是在算法中的同步部分立即执行这一操作则需要小心。
  因为可能无需 <a href=webappapis.html#prepare-to-run-script id=performing-structured-clones-from-other-specifications:prepare-to-run-script-2>准备执行脚本</a> 和
  <a href=webappapis.html#prepare-to-run-a-callback id=performing-structured-clones-from-other-specifications:prepare-to-run-a-callback-2>准备执行 fallback</a> 就能使用该算法。</p>

  <p class=example>作为对比，假设有个 API 直接通过
  <a href=webappapis.html#event-loop id=performing-structured-clones-from-other-specifications:event-loop>事件循环</a> 的 <a href=webappapis.html#concept-task id=performing-structured-clones-from-other-specifications:concept-task>任务</a>
  来定期地使用 <a href=#structuredserialize id=performing-structured-clones-from-other-specifications:structuredserialize-4>StructuredSerialize</a> 序列化一些作者提供的对象，
  可能需要事先确保它执行了适当的准备工作。现在我们还没见过平台上有这样的 API；
  通常，作为作者代码的同步结果来事先执行序列化更加容易。</p>

  <h4 id=blob-和-filelist-对象的猴子补丁>2.7.10 <code id=blob-和-filelist-对象的猴子补丁:blob><a data-x-internal=blob href=https://w3c.github.io/FileAPI/#blob>Blob</a></code> 和 <code id=blob-和-filelist-对象的猴子补丁:filelist><a data-x-internal=filelist href=https://w3c.github.io/FileAPI/#filelist-section>FileList</a></code> 对象的猴子补丁<a href=#blob-和-filelist-对象的猴子补丁 class=self-link></a></h4>

  <p class=XXX>这一猴子补丁会在适当的时候移除。参阅 <a href=https://github.com/w3c/FileAPI/issues/32>w3c/FileAPI issue 32</a>。</p>

  <p><code id=blob-和-filelist-对象的猴子补丁:blob-2><a data-x-internal=blob href=https://w3c.github.io/FileAPI/#blob>Blob</a></code> 对象是 <a href=#可序列化对象 id=blob-和-filelist-对象的猴子补丁:可序列化对象>可序列化对象</a>。
  <code id=blob-和-filelist-对象的猴子补丁:blob-3><a data-x-internal=blob href=https://w3c.github.io/FileAPI/#blob>Blob</a></code> 接口必须用 <code id=blob-和-filelist-对象的猴子补丁:serializable><a href=#serializable>[Serializable]</a></code>
  <a href=https://heycam.github.io/webidl/#dfn-extended-attribute id=blob-和-filelist-对象的猴子补丁:extended-attribute data-x-internal=extended-attribute>扩展属性</a> 来注解。
  给定 <var>value</var> 和 <var>serialized</var>，它们的
  <a href=#serialization-steps id=blob-和-filelist-对象的猴子补丁:serialization-steps>序列化步骤</a> 是：</p>

  <ol><li><p>设置<var>serialized</var>.[[SnapshotState]] 为 <var>value</var> 的
   <a href=https://w3c.github.io/FileAPI/#snapshot-state id=blob-和-filelist-对象的猴子补丁:snapshot-state data-x-internal=snapshot-state>快照状态</a>。<li><p>设置<var>serialized</var>.[[ByteSequence]] 为 <var>value</var>的低层字节序列。</ol>

  <p>给定 <var>serialized</var> 和 <var>value</var>，它们的
  <a href=#deserialization-steps id=blob-和-filelist-对象的猴子补丁:deserialization-steps>反序列化步骤</a> 是：</p>

  <ol><li><p>设置<var>value</var>的 <a id=blob-和-filelist-对象的猴子补丁:snapshot-state-2 href=https://w3c.github.io/FileAPI/#snapshot-state data-x-internal=snapshot-state>snapshot state</a> 为
   <var>serialized</var>.[[SnapshotState]]。<li><p>设置<var>value</var>的低层字节序列为
   <var>serialized</var>.[[ByteSequence]]。</ol>

  <hr>

  <p><code id=blob-和-filelist-对象的猴子补丁:file><a data-x-internal=file href=https://w3c.github.io/FileAPI/#file>File</a></code> 对象是 <a href=#可序列化对象 id=blob-和-filelist-对象的猴子补丁:可序列化对象-2>可序列化对象</a>。
  <code id=blob-和-filelist-对象的猴子补丁:file-2><a data-x-internal=file href=https://w3c.github.io/FileAPI/#file>File</a></code> 接口必须用 <code id=blob-和-filelist-对象的猴子补丁:serializable-2><a href=#serializable>[Serializable]</a></code>
  <a href=https://heycam.github.io/webidl/#dfn-extended-attribute id=blob-和-filelist-对象的猴子补丁:extended-attribute-2 data-x-internal=extended-attribute>扩展属性</a> 来注解。
  给定 <var>value</var> 和 <var>serialized</var>，它们的
  <a href=#serialization-steps id=blob-和-filelist-对象的猴子补丁:serialization-steps-2>序列化步骤</a> 是：</p>

  <ol><li><p>设置<var>serialized</var>.[[SnapshotState]] 为 <var>value</var> 的
   <a href=https://w3c.github.io/FileAPI/#snapshot-state id=blob-和-filelist-对象的猴子补丁:snapshot-state-3 data-x-internal=snapshot-state>快照状态</a>。<li><p>设置<var>serialized</var>.[[ByteSequence]] 为 <var>value</var>的低层字节序列。<li><p>设置<var>serialized</var>.[[Name]] 为 <var>value</var> 的
   <code id=blob-和-filelist-对象的猴子补丁:dom-file-name><a data-x-internal=dom-file-name href=https://w3c.github.io/FileAPI/#dfn-name>name</a></code> 属性的值。<li><p>设置<var>serialized</var>.[[LastModified]] 为 <var>value</var>的
   <code id=blob-和-filelist-对象的猴子补丁:dom-file-lastmodified><a data-x-internal=dom-file-lastmodified href=https://w3c.github.io/FileAPI/#dfn-lastModified>lastModified</a></code> 属性的值。</ol>

  <p>给定 <var>serialized</var> 和 <var>value</var>，
  它们的 <a href=#deserialization-steps id=blob-和-filelist-对象的猴子补丁:deserialization-steps-2>反序列步骤</a> 是：</p>

  <ol><li><p>设置<var>value</var>的 <a id=blob-和-filelist-对象的猴子补丁:snapshot-state-4 href=https://w3c.github.io/FileAPI/#snapshot-state data-x-internal=snapshot-state>snapshot state</a> 为
   <var>serialized</var>.[[SnapshotState]]。<li><p>设置<var>value</var>的低层字节序列为
   <var>serialized</var>.[[ByteSequence]]。<li><p>初始化 <var>value</var>的 <code id=blob-和-filelist-对象的猴子补丁:dom-file-name-2><a data-x-internal=dom-file-name href=https://w3c.github.io/FileAPI/#dfn-name>name</a></code>
   属性的值为 <var>serialized</var>.[[Name]]。<li><p>初始化 <var>value</var>的 <code id=blob-和-filelist-对象的猴子补丁:dom-file-lastmodified-2><a data-x-internal=dom-file-lastmodified href=https://w3c.github.io/FileAPI/#dfn-lastModified>lastModified</a></code>
   属性的值为 <var>serialized</var>.[[LastModified]]。</ol>

  <hr>

  <p><code id=blob-和-filelist-对象的猴子补丁:filelist-2><a data-x-internal=filelist href=https://w3c.github.io/FileAPI/#filelist-section>FileList</a></code> 对象是 <a href=#可序列化对象 id=blob-和-filelist-对象的猴子补丁:可序列化对象-3>可序列化对象</a>。
  <code id=blob-和-filelist-对象的猴子补丁:filelist-3><a data-x-internal=filelist href=https://w3c.github.io/FileAPI/#filelist-section>FileList</a></code> 接口必须用 <code id=blob-和-filelist-对象的猴子补丁:serializable-3><a href=#serializable>[Serializable]</a></code>
  <a href=https://heycam.github.io/webidl/#dfn-extended-attribute id=blob-和-filelist-对象的猴子补丁:extended-attribute-3 data-x-internal=extended-attribute>扩展属性</a> 来注解。
  给定 <var>value</var> 和 <var>serialized</var>，它们的
  <a href=#serialization-steps id=blob-和-filelist-对象的猴子补丁:serialization-steps-3>序列化步骤</a> 是：</p>

  <ol><li><p>设置<var>serialized</var>.[[Files]] 为一个空的列表 <a id=blob-和-filelist-对象的猴子补丁:list href=https://infra.spec.whatwg.org/#list data-x-internal=list>list</a>。<li><p>对 <var>value</var> 中的每一个 <var>file</var>，
   <a href=https://infra.spec.whatwg.org/#list-append id=blob-和-filelist-对象的猴子补丁:list-append data-x-internal=list-append>追加</a> <var>file</var> 的
   <a href=#sub-serialization id=blob-和-filelist-对象的猴子补丁:sub-serialization>子序列化</a> 到 <var>serialized</var>.[[Files]]。</ol>

  <p>给定 <var>serialized</var> 和 <var>value</var>，
  它们的 <a href=#deserialization-steps id=blob-和-filelist-对象的猴子补丁:deserialization-steps-3>反序列步骤</a> 是：</p>

  <ol><li><p>对 <var>serialized</var>.[[Files]] 中的
   <a href=https://infra.spec.whatwg.org/#list-iterate id=blob-和-filelist-对象的猴子补丁:list-iterate data-x-internal=list-iterate>每一个</a> <var>file</var>，把 <var>file</var> 的
   <a href=#sub-deserialization id=blob-和-filelist-对象的猴子补丁:sub-deserialization>子反序列化</a> 加到 <var>value</var>。</ol>

  


  <nav><a href=introduction.html>← 1 概述</a> — <a href=index.html>Table of Contents</a> — <a href=dom.html>3 HTML 文档的语义，结构，与API →</a></nav>
<script src=/html/resources/zh-cn.js></script>
